{"version":3,"file":"main.js","sourceRoot":"","sources":["../../../../../../../browser/src/main.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/* global errorMessages getParameterByName accessToken accessTokenTTL accessHeader */\n/* global app L vex host idleTimeoutSecs outOfFocusTimeoutSecs _ */\n/*eslint indent: [error, \"tab\", { \"outerIIFEBody\": 0 }]*/\n(function (global) {\n\n\nvar wopiParams = {};\nvar wopiSrc = getParameterByName('WOPISrc');\n\nif (wopiSrc !== '' && accessToken !== '') {\n\twopiParams = { 'access_token': accessToken, 'access_token_ttl': accessTokenTTL };\n}\nelse if (wopiSrc !== '' && accessHeader !== '') {\n\twopiParams = { 'access_header': accessHeader };\n}\n\nvar filePath = getParameterByName('file_path');\nvar permission = getParameterByName('permission') || 'edit';\nvar timestamp = getParameterByName('timestamp');\n// Should the document go inactive or not\nvar alwaysActive = getParameterByName('alwaysactive');\n// Cool Debug mode\nvar debugMode = getParameterByName('debug');\nif (wopiSrc === '' && filePath === '' && !window.ThisIsAMobileApp) {\n\tvex.dialog.alert(errorMessages.wrongwopisrc);\n}\nif (host === '' && !window.ThisIsAMobileApp) {\n\tvex.dialog.alert(errorMessages.emptyhosturl);\n}\n\nvar docURL, docParams;\nvar isWopi = false;\nif (wopiSrc != '') {\n\tdocURL = decodeURIComponent(wopiSrc);\n\tdocParams = wopiParams;\n\tisWopi = true;\n} else {\n\tdocURL = filePath;\n\tdocParams = {};\n}\n\nvar notWopiButIframe = getParameterByName('NotWOPIButIframe') != '';\nvar map = L.map('map', {\n\tserver: host,\n\tdoc: docURL,\n\tdocParams: docParams,\n\tpermission: permission,\n\ttimestamp: timestamp,\n\tdocumentContainer: 'document-container',\n\tdebug: debugMode,\n\t// the wopi and wopiSrc properties are in sync: false/true : empty/non-empty\n\twopi: isWopi,\n\twopiSrc: wopiSrc,\n\tnotWopiButIframe: notWopiButIframe,\n\talwaysActive: alwaysActive,\n\tidleTimeoutSecs: idleTimeoutSecs,  // Dim when user is idle.\n\toutOfFocusTimeoutSecs: outOfFocusTimeoutSecs, // Dim after switching tabs.\n});\n\n////// Controls /////\n\nmap.uiManager = L.control.uiManager();\nmap.addControl(map.uiManager);\n\nmap.uiManager.initializeBasicUI();\n\nL.Map.THIS = map;\n\nmap.loadDocument(global.socket);\n\nglobal.socket = app.socket;\nwindow.addEventListener('beforeunload', function () {\n\tif (map && app.socket) {\n\t\tif (app.socket.setUnloading)\n\t\t\tapp.socket.setUnloading();\n\t\tapp.socket.close();\n\t}\n});\n\nwindow.docPermission = permission;\nwindow.bundlejsLoaded = true;\n\n\n////// Unsupported Browser Warning /////\n\nif (L.Browser.isInternetExplorer) {\n\tvex.dialog.alert(_('Warning! The browser you are using is not supported.'));\n}\n\n}(window));\n"]}
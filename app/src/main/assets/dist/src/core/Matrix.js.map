{"version":3,"file":"Matrix.js","sourceRoot":"","sources":["../../../../../../../../browser/src/core/Matrix.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * @class  L.Matrix\n *\n * @param {Number} a\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} e\n * @param {Number} f\n */\nL.Matrix = function(a, b, c, d, e, f) {\n\n\t/**\n\t* @type {Array.<Number>}\n\t*/\n\tthis._matrix = [a, b, c, d, e, f];\n};\n\n\nL.Matrix.prototype = {\n\n\n\t/**\n\t* @param  {L.Point} point\n\t* @return {L.Point}\n\t*/\n\ttransform: function(point) {\n\t\treturn this._transform(point.clone());\n\t},\n\n\n\t/**\n\t* Destructive\n\t*\n\t* [ x ] = [ a  b  tx ] [ x ] = [ a * x + b * y + tx ]\n\t* [ y ] = [ c  d  ty ] [ y ] = [ c * x + d * y + ty ]\n\t*\n\t* @param  {L.Point} point\n\t* @return {L.Point}\n\t*/\n\t_transform: function(point) {\n\t\tvar matrix = this._matrix;\n\t\tvar x = point.x, y = point.y;\n\t\tpoint.x = matrix[0] * x + matrix[1] * y + matrix[4];\n\t\tpoint.y = matrix[2] * x + matrix[3] * y + matrix[5];\n\t\treturn point;\n\t},\n\n\n\t/**\n\t* @param  {L.Point} point\n\t* @return {L.Point}\n\t*/\n\tuntransform: function (point) {\n\t\tvar matrix = this._matrix;\n\t\treturn new L.Point(\n\t\t\t(point.x / matrix[0] - matrix[4]) / matrix[0],\n\t\t\t(point.y / matrix[2] - matrix[5]) / matrix[2]\n\t\t);\n\t},\n\n\n\t/**\n\t* @return {L.Matrix}\n\t*/\n\tclone: function() {\n\t\tvar matrix = this._matrix;\n\t\treturn new L.Matrix(\n\t\t\tmatrix[0], matrix[1], matrix[2],\n\t\t\tmatrix[3], matrix[4], matrix[5]\n\t\t);\n\t},\n\n\n\t/**\n\t* @param {L.Point=|Number=} translate\n\t* @return {L.Matrix|L.Point}\n\t*/\n\ttranslate: function(translate) {\n\t\tif (translate === undefined) {\n\t\t\treturn new L.Point(this._matrix[4], this._matrix[5]);\n\t\t}\n\n\t\tvar translateX, translateY;\n\t\tif (typeof translate === 'number') {\n\t\t\ttranslateX = translateY = translate;\n\t\t} else {\n\t\t\ttranslateX = translate.x;\n\t\t\ttranslateY = translate.y;\n\t\t}\n\n\t\treturn this._add(1, 0, 0, 1, translateX, translateY);\n\t},\n\n\n\t/**\n\t* @param {L.Point=|Number=} scale\n\t* @return {L.Matrix|L.Point}\n\t*/\n\tscale: function(scale, origin) {\n\t\tif (scale === undefined) {\n\t\t\treturn new L.Point(this._matrix[0], this._matrix[3]);\n\t\t}\n\n\t\tvar scaleX, scaleY;\n\t\torigin = origin || L.point(0, 0);\n\t\tif (typeof scale === 'number') {\n\t\t\tscaleX = scaleY = scale;\n\t\t} else {\n\t\t\tscaleX = scale.x;\n\t\t\tscaleY = scale.y;\n\t\t}\n\n\t\treturn this\n\t\t\t._add(scaleX, 0, 0, scaleY, origin.x, origin.y)\n\t\t\t._add(1, 0, 0, 1, -origin.x, -origin.y);\n\t},\n\n\n\t/**\n\t* m00  m01  x - m00 * x - m01 * y\n\t* m10  m11  y - m10 * x - m11 * y\n\t* @param {Number}   angle\n\t* @param {L.Point=} origin\n\t* @return {L.Matrix}\n\t*/\n\trotate: function(angle, origin) {\n\t\tvar cos = Math.cos(angle);\n\t\tvar sin = Math.sin(angle);\n\n\t\torigin = origin || new L.Point(0, 0);\n\n\t\treturn this\n\t\t\t._add(cos, sin, -sin, cos, origin.x, origin.y)\n\t\t\t._add(1, 0, 0, 1, -origin.x, -origin.y);\n\t},\n\n\n\t/**\n\t* Invert rotation\n\t* @return {L.Matrix}\n\t*/\n\tflip: function() {\n\t\tthis._matrix[1] *= -1;\n\t\tthis._matrix[2] *= -1;\n\t\treturn this;\n\t},\n\n\n\t/**\n\t* @param {Number|L.Matrix} a\n\t* @param {Number} b\n\t* @param {Number} c\n\t* @param {Number} d\n\t* @param {Number} e\n\t* @param {Number} f\n\t*/\n\t_add: function(a, b, c, d, e, f) {\n\t\tvar result = [[], [], []];\n\t\tvar src = this._matrix;\n\t\tvar m = [\n\t\t\t[src[0], src[2], src[4]],\n\t\t\t[src[1], src[3], src[5]],\n\t\t\t[     0,      0,     1]\n\t\t];\n\t\tvar other = [\n\t\t\t[a, c, e],\n\t\t\t[b, d, f],\n\t\t\t[0, 0, 1]\n\t\t], val;\n\n\n\t\tif (a && a instanceof L.Matrix) {\n\t\t\tsrc = a._matrix;\n\t\t\tother = [\n\t\t\t\t[src[0], src[2], src[4]],\n\t\t\t\t[src[1], src[3], src[5]],\n\t\t\t\t[     0,      0,     1]];\n\t\t}\n\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\tfor (var j = 0; j < 3; j++) {\n\t\t\t\tval = 0;\n\t\t\t\tfor (var k = 0; k < 3; k++) {\n\t\t\t\t\tval += m[i][k] * other[k][j];\n\t\t\t\t}\n\t\t\t\tresult[i][j] = val;\n\t\t\t}\n\t\t}\n\n\t\tthis._matrix = [\n\t\t\tresult[0][0], result[1][0], result[0][1],\n\t\t\tresult[1][1], result[0][2], result[1][2]\n\t\t];\n\t\treturn this;\n\t}\n\n\n};\n\n\nL.matrix = function(a, b, c, d, e, f) {\n\treturn new L.Matrix(a, b, c, d, e, f);\n};\n"]}
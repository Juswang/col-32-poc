{"version":3,"file":"Log.js","sourceRoot":"","sources":["../../../../../../../../browser/src/core/Log.js"],"names":[],"mappings":"AAAA,gCAAgC;AAChC;;GAEG;AAEH,CAAC,CAAC,GAAG,GAAG;IACP,GAAG,EAAE,UAAU,GAAG,EAAE,SAAS,EAAE,UAAU,EAAE,IAAI;QAC9C,IAAI,CAAC,IAAI,EAAE;YACV,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;SAClB;QACD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YAChB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;SAChB;QACD,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;QACzC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAC,GAAG,EAAG,GAAG,EAAE,SAAS,EAAG,SAAS;YAChD,MAAM,EAAG,UAAU,EAAE,IAAI,EAAG,IAAI,EAAC,CAAC,CAAC;QACpC,8DAA8D;IAC/D,CAAC;IAED,WAAW,EAAE;QACZ,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC;YAC7B,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE;gBAAE,OAAO,CAAC,CAAC,CAAC;aAAE;YACnC,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE;gBAAE,OAAO,CAAC,CAAC;aAAE;YAClC,OAAO,CAAC,CAAC;QACV,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC3C,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,GAAG;gBAC9D,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YACjD,IAAI,IAAI,IAAI,CAAC;SACb;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAED,KAAK,EAAE;QACN,8CAA8C;IAC/C,CAAC;IAED,IAAI,EAAE;QACL,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,EAAE,EAAC,IAAI,EAAE,UAAU,EAAC,CAAC,EACzD,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,EACvC,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QAEpC,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,MAAM,CAAC;QACjC,CAAC,CAAC,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC,CAAC,OAAO,CAAC,WAAW,GAAI,CAAC,UAAU,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACpE,CAAC,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACnG,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC;IAED,KAAK,EAAE;QACN,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IACjB,CAAC;CACD,CAAC","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Log contains methods for logging the activity\n */\n\nL.Log = {\n\tlog: function (msg, direction, tileCoords, time) {\n\t\tif (!time) {\n\t\t\ttime = Date.now();\n\t\t}\n\t\tif (!this._logs) {\n\t\t\tthis._logs = [];\n\t\t}\n\t\tmsg = msg.replace(/(\\r\\n|\\n|\\r)/gm, ' ');\n\t\tthis._logs.push({msg : msg, direction : direction,\n\t\t\tcoords : tileCoords, time : time});\n\t\t//window.app.console.log(time + '-' + direction + ': ' + msg);\n\t},\n\n\t_getEntries: function () {\n\t\tthis._logs.sort(function (a, b) {\n\t\t\tif (a.time < b.time) { return -1; }\n\t\t\tif (a.time > b.time) { return 1; }\n\t\t\treturn 0;\n\t\t});\n\t\tvar data = '';\n\t\tfor (var i = 0; i < this._logs.length; i++) {\n\t\t\tdata += this._logs[i].time + '.' + this._logs[i].direction + '.' +\n\t\t\t\t\tthis._logs[i].msg + '.' + this._logs[i].coords;\n\t\t\tdata += '\\n';\n\t\t}\n\t\treturn data;\n\t},\n\n\tprint: function () {\n\t\t// window.app.console.log(this._getEntries());\n\t},\n\n\tsave: function () {\n\t\tvar blob = new Blob([this._getEntries()], {type: 'text/csv'}),\n\t\t    e = document.createEvent('MouseEvents'),\n\t\t    a = document.createElement('a');\n\n\t\ta.download = Date.now() + '.csv';\n\t\ta.href = window.URL.createObjectURL(blob);\n\t\ta.dataset.downloadurl =  ['text/csv', a.download, a.href].join(':');\n\t\te.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t\ta.dispatchEvent(e);\n\t},\n\n\tclear: function () {\n\t\tthis._logs = [];\n\t}\n};\n"]}
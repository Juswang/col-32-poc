{"version":3,"file":"Map.Keyboard.js","sourceRoot":"","sources":["../../../../../../../../../browser/src/map/handler/Map.Keyboard.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n *\n * It handles keyboard interactions which are NOT text input, including those which\n * don't require edit permissions (e.g. page scroll). Text input is handled\n * at TextInput.\n */\n\n/* global app UNOKey UNOModifier */\n\nL.Map.mergeOptions({\n\tkeyboard: true,\n\tkeyboardPanOffset: 20,\n\tkeyboardZoomOffset: 1\n});\n\nL.Map.Keyboard = L.Handler.extend({\n\n\tkeymap: {\n\t\t8   : UNOKey.BACKSPACE,\n\t\t9   : UNOKey.TAB,\n\t\t13  : UNOKey.RETURN,\n\t\t16  : null, // shift\t\t: UNKOWN\n\t\t17  : null, // ctrl\t\t: UNKOWN\n\t\t18  : null, // alt\t\t: UNKOWN\n\t\t19  : null, // pause/break\t: UNKOWN\n\t\t20  : null, // caps lock\t: UNKOWN\n\t\t27  : UNOKey.ESCAPE,\n\t\t32  : UNOKey.SPACE,\n\t\t33  : UNOKey.PAGEUP,\n\t\t34  : UNOKey.PAGEDOWN,\n\t\t35  : UNOKey.END,\n\t\t36  : UNOKey.HOME,\n\t\t37  : UNOKey.LEFT,\n\t\t38  : UNOKey.UP,\n\t\t39  : UNOKey.RIGHT,\n\t\t40  : UNOKey.DOWN,\n\t\t45  : UNOKey.INSERT,\n\t\t46  : UNOKey.DELETE,\n\t\t48  : UNOKey.NUM0,\n\t\t49  : UNOKey.NUM1,\n\t\t50  : UNOKey.NUM2,\n\t\t51  : UNOKey.NUM3,\n\t\t52  : UNOKey.NUM4,\n\t\t53  : UNOKey.NUM5,\n\t\t54  : UNOKey.NUM6,\n\t\t55  : UNOKey.NUM7,\n\t\t56  : UNOKey.NUM8,\n\t\t57  : UNOKey.NUM9,\n\t\t65  : UNOKey.A,\n\t\t66  : UNOKey.B,\n\t\t67  : UNOKey.C,\n\t\t68  : UNOKey.D,\n\t\t69  : UNOKey.E,\n\t\t70  : UNOKey.F,\n\t\t71  : UNOKey.G,\n\t\t72  : UNOKey.H,\n\t\t73  : UNOKey.I,\n\t\t74  : UNOKey.J,\n\t\t75  : UNOKey.K,\n\t\t76  : UNOKey.L,\n\t\t77  : UNOKey.M,\n\t\t78  : UNOKey.N,\n\t\t79  : UNOKey.O,\n\t\t80  : UNOKey.P,\n\t\t81  : UNOKey.Q,\n\t\t82  : UNOKey.R,\n\t\t83  : UNOKey.S,\n\t\t84  : UNOKey.T,\n\t\t85  : UNOKey.U,\n\t\t86  : UNOKey.V,\n\t\t87  : UNOKey.W,\n\t\t88  : UNOKey.X,\n\t\t89  : UNOKey.Y,\n\t\t90  : UNOKey.Z,\n\t\t91  : null, // left window key\t: UNKOWN\n\t\t92  : null, // right window key\t: UNKOWN\n\t\t93  : null, // select key\t: UNKOWN\n\t\t96  : UNOKey.NUM0,\n\t\t97  : UNOKey.NUM1,\n\t\t98  : UNOKey.NUM2,\n\t\t99  : UNOKey.NUM3,\n\t\t100 : UNOKey.NUM4,\n\t\t101 : UNOKey.NUM5,\n\t\t102 : UNOKey.NUM6,\n\t\t103 : UNOKey.NUM7,\n\t\t104 : UNOKey.NUM8,\n\t\t105 : UNOKey.NUM9,\n\t\t106 : UNOKey.MULTIPLY,\n\t\t107 : UNOKey.ADD,\n\t\t109 : UNOKey.SUBTRACT,\n\t\t110 : UNOKey.DECIMAL,\n\t\t111 : UNOKey.DIVIDE,\n\t\t112 : UNOKey.F1,\n\t\t113 : UNOKey.F2,\n\t\t114 : UNOKey.F3,\n\t\t115 : UNOKey.F4,\n\t\t116 : UNOKey.F5,\n\t\t117 : UNOKey.F6,\n\t\t118 : UNOKey.F7,\n\t\t119 : UNOKey.F8,\n\t\t120 : UNOKey.F9,\n\t\t121 : UNOKey.F10,\n\t\t122 : UNOKey.F11,\n\t\t144 : UNOKey.NUMLOCK,\n\t\t145 : UNOKey.SCROLLLOCK,\n\t\t173 : UNOKey.SUBTRACT,\n\t\t186 : UNOKey.SEMICOLON,\n\t\t187 : UNOKey.EQUAL,\n\t\t188 : UNOKey.COMMA,\n\t\t189 : UNOKey.SUBTRACT,\n\t\t190 : null, // period\t\t: UNKOWN\n\t\t191 : null, // forward slash\t: UNKOWN\n\t\t192 : null, // grave accent\t: UNKOWN\n\t\t219 : null, // open bracket\t: UNKOWN\n\t\t220 : null, // back slash\t: UNKOWN\n\t\t221 : null, // close bracket\t: UNKOWN\n\t\t222 : null  // single quote\t: UNKOWN\n\t},\n\n\thandleOnKeyDownKeys: {\n\t\t// these keys need to be handled on keydown in order for them\n\t\t// to work on chrome\n\t\t// Backspace and Delete are handled at TextInput's 'beforeinput' handler.\n\t\t9   : true, // tab\n\t\t19  : true, // pause/break\n\t\t20  : true, // caps lock\n\t\t27  : true, // escape\n\t\t33  : true, // page up\n\t\t34  : true, // page down\n\t\t35  : true, // end\n\t\t36  : true, // home\n\t\t37  : true, // left arrow\n\t\t38  : true, // up arrow\n\t\t39  : true, // right arrow\n\t\t40  : true, // down arrow\n\t\t45  : true, // insert\n\t\t113 : true  // f2\n\t},\n\n\tkeyCodes: {\n\t\tpageUp:   33,\n\t\tpageDown: 34,\n\t\tenter:    13\n\t},\n\n\tnavigationKeyCodes: {\n\t\tleft:    [37],\n\t\tright:   [39],\n\t\tdown:    [40],\n\t\tup:      [38],\n\t\tzoomIn:  [187, 107, 61, 171],\n\t\tzoomOut: [189, 109, 173]\n\t},\n\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._setPanOffset(map.options.keyboardPanOffset);\n\t\tthis._setZoomOffset(map.options.keyboardZoomOffset);\n\t\tthis.modifier = 0;\n\t},\n\n\taddHooks: function () {\n\t\tvar container = this._map._container;\n\n\t\t// make the container focusable by tabbing\n\t\tif (container.tabIndex === -1) {\n\t\t\tcontainer.tabIndex = '0';\n\t\t}\n\n\t\tL.DomEvent.on(this._map.getContainer(), 'keydown keyup keypress', this._onKeyDown, this);\n\t\tL.DomEvent.on(window.document, 'keydown', this._globalKeyEvent, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map.getContainer(), 'keydown keyup keypress', this._onKeyDown, this);\n\t\tL.DomEvent.off(window.document, 'keydown', this._globalKeyEvent, this);\n\t},\n\n\t_ignoreKeyEvent: function(ev) {\n\t\tvar shift = ev.shiftKey ? UNOModifier.SHIFT : 0;\n\t\tif (shift && (ev.keyCode === 45 || ev.keyCode === 46)) {\n\t\t\t// don't handle shift+insert, shift+delete\n\t\t\t// These are converted to 'cut', 'paste' events which are\n\t\t\t// automatically handled by us, so avoid double-handling\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t_setPanOffset: function (pan) {\n\t\tvar keys = this._panKeys = {},\n\t\t    codes = this.navigationKeyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n\t\t\tkeys[codes.left[i]] = [-1 * pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n\t\t\tkeys[codes.right[i]] = [pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n\t\t\tkeys[codes.down[i]] = [0, pan];\n\t\t}\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n\t\t\tkeys[codes.up[i]] = [0, -1 * pan];\n\t\t}\n\t},\n\n\t_setZoomOffset: function (zoom) {\n\t\tvar keys = this._zoomKeys = {},\n\t\t    codes = this.navigationKeyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n\t\t\tkeys[codes.zoomIn[i]] = zoom;\n\t\t}\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n\t\t\tkeys[codes.zoomOut[i]] = -zoom;\n\t\t}\n\t},\n\n\t// Convert javascript key codes to UNO key codes.\n\t_toUNOKeyCode: function (keyCode) {\n\t\treturn this.keymap[keyCode] || keyCode;\n\t},\n\n\t// _onKeyDown - called only as a DOM event handler\n\t// Calls _handleKeyEvent(), but only if the event doesn't have\n\t// a charCode property (set to something different than 0) - that ignores\n\t// any 'beforeinput', 'keypress' and 'input' events that would add\n\t// printable characters. Those are handled by TextInput.js.\n\t_onKeyDown: function (ev) {\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\tvar completeEvent = app.socket.createCompleteTraceEvent('L.Map.Keyboard._onKeyDown', { type: ev.type, charCode: ev.charCode });\n\t\twindow.app.console.log('keyboard handler:', ev.type, ev.key, ev.charCode, this._expectingInput, ev);\n\n\t\tif (ev.charCode == 0) {\n\t\t\tthis._handleKeyEvent(ev);\n\t\t}\n\t\tif (this._map._docLayer)\n\t\t\tif (ev.shiftKey && ev.type === 'keydown')\n\t\t\t\tthis._map._docLayer.shiftKeyPressed = true;\n\t\t\telse if (ev.keyCode === 16 && ev.type === 'keyup')\n\t\t\t\tthis._map._docLayer.shiftKeyPressed = false;\n\t\tif (completeEvent)\n\t\t\tcompleteEvent.finish();\n\t},\n\n\t_globalKeyEvent: function(ev) {\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\tif (this._map.jsdialog && this._map.jsdialog.hasDialogOpened()\n\t\t\t&& this._map.jsdialog.handleKeyEvent(ev)) {\n\t\t\tev.preventDefault();\n\t\t\treturn;\n\t\t}\n\t},\n\n\t// _handleKeyEvent - checks if the given keyboard event shall trigger\n\t// a message to coolwsd, and calls the given keyEventFn(type, charcode, keycode)\n\t// callback if so.\n\t// Called from _onKeyDown\n\t_handleKeyEvent: function (ev, keyEventFn) {\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\tthis._map.notifyActive();\n\t\tif (this._map.slideShow && this._map.slideShow.fullscreen) {\n\t\t\treturn;\n\t\t}\n\t\tvar docLayer = this._map._docLayer;\n\t\tif (!keyEventFn && docLayer.postKeyboardEvent) {\n\t\t\t// default is to post keyboard events on the document\n\t\t\tkeyEventFn = L.bind(docLayer.postKeyboardEvent, docLayer);\n\t\t}\n\n\t\tthis.modifier = 0;\n\t\tvar shift = ev.shiftKey ? UNOModifier.SHIFT : 0;\n\t\tvar ctrl = ev.ctrlKey ? UNOModifier.CTRL : 0;\n\t\tvar alt = ev.altKey ? UNOModifier.ALT : 0;\n\t\tvar cmd = ev.metaKey ? UNOModifier.CTRL : 0;\n\t\tvar location = ev.location;\n\t\tthis.modifier = shift | ctrl | alt | cmd;\n\n\t\t// On Windows, pressing AltGr = Alt + Ctrl\n\t\t// Presence of AltGr is detected if previous Ctrl + Alt 'location' === 2 (i.e right)\n\t\t// because Ctrl + Alt + <some char> won't give any 'location' information.\n\t\tif (ctrl && alt) {\n\t\t\tif (ev.type === 'keydown' && location === 2) {\n\t\t\t\tthis._prevCtrlAltLocation = location;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (location === 1) {\n\t\t\t\tthis._prevCtrlAltLocation = undefined;\n\t\t\t}\n\n\t\t\tif (this._prevCtrlAltLocation === 2 && location === 0) {\n\t\t\t\t// and we got the final character\n\t\t\t\tif (ev.type === 'keypress') {\n\t\t\t\t\tctrl = alt = this.modifier = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Don't handle remnant 'keyup'\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (ctrl || cmd) {\n\t\t\tif (this._handleCtrlCommand(ev)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar charCode = ev.charCode;\n\t\tvar keyCode = ev.keyCode;\n\n\t\tif ((this.modifier == UNOModifier.ALT || this.modifier == UNOModifier.SHIFT + UNOModifier.ALT) &&\n\t\t    keyCode >= 48) {\n\t\t\t// Presumably a Mac or iOS client accessing a \"special character\". Just ignore the alt modifier.\n\t\t\t// But don't ignore it for Alt + non-printing keys.\n\t\t\tthis.modifier -= alt;\n\t\t\talt = 0;\n\t\t}\n\n\t\t// handle help - F1\n\t\tif (ev.type === 'keydown' && !shift && !ctrl && !alt && !cmd && keyCode === 112) {\n\t\t\tthis._map.showHelp('online-help');\n\t\t\tev.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\t// don't trigger browser reload on F5, launch slideshow in Impress\n\t\tif (ev.type === 'keydown' && keyCode === 116) {\n\t\t\tev.preventDefault();\n\t\t\tif (this._map._docLayer._docType === 'presentation')\n\t\t\t{\n\t\t\t\tthis._map.fire('fullscreen');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tvar unoKeyCode = this._toUNOKeyCode(keyCode);\n\n\t\tif (this.modifier) {\n\t\t\tunoKeyCode |= this.modifier;\n\t\t\tif (ev.type !== 'keyup' && (this.modifier !== shift || (keyCode === 32 && !this._map._isCursorVisible))) {\n\t\t\t\tif (keyEventFn) {\n\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._map.stateChangeHandler._items['.uno:SlideMasterPage'] === 'true') {\n\t\t\tev.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._map.isPermissionEdit()) {\n\t\t\tdocLayer._resetPreFetching();\n\n\t\t\tif (this._ignoreKeyEvent(ev)) {\n\t\t\t\t// key ignored\n\t\t\t}\n\t\t\telse if (ev.type === 'keydown') {\n\t\t\t\t// window.app.console.log(e);\n\t\t\t\tif (this.handleOnKeyDownKeys[keyCode] && charCode === 0) {\n\t\t\t\t\tif (keyEventFn) {\n\t\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ((ev.type === 'keypress') && (!this.handleOnKeyDownKeys[keyCode] || charCode !== 0)) {\n\t\t\t\tif (keyCode === 8 || keyCode === 46 || keyCode === 13)\n\t\t\t\t{\n\t\t\t\t\t// handled generically in TextInput.js\n\t\t\t\t\twindow.app.console.log('Ignore backspace/delete/enter keypress');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (charCode === keyCode && charCode !== 13) {\n\t\t\t\t\t// Chrome sets keyCode = charCode for printable keys\n\t\t\t\t\t// while LO requires it to be 0\n\t\t\t\t\tkeyCode = 0;\n\t\t\t\t\tunoKeyCode = this._toUNOKeyCode(keyCode);\n\t\t\t\t}\n\t\t\t\tif (docLayer._debug) {\n\t\t\t\t\t// key press times will be paired with the invalidation messages\n\t\t\t\t\tdocLayer._debugKeypressQueue.push(+new Date());\n\t\t\t\t}\n\n\t\t\t\tif (keyEventFn) {\n\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (ev.type === 'keyup') {\n\t\t\t\tif ((this.handleOnKeyDownKeys[keyCode] && charCode === 0) ||\n\t\t\t\t    (this.modifier) ||\n\t\t\t\t    unoKeyCode === UNOKey.RETURN) {\n\t\t\t\t\tif (keyEventFn) {\n\t\t\t\t\t\tkeyEventFn('up', charCode, unoKeyCode);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// was handled as textinput\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (keyCode === 9) {\n\t\t\t\t// tab would change focus to other DOM elements\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t}\n\t\telse if (!this.modifier && (keyCode === 33 || keyCode === 34) && ev.type === 'keydown') {\n\t\t\tif (this._map._docLayer._docType === 'presentation' || this._map._docLayer._docType === 'drawing') {\n\t\t\t\tvar partToSelect = keyCode === 33 ? 'prev' : 'next';\n\t\t\t\tthis._map._docLayer._preview._scrollViewByDirection(partToSelect);\n\t\t\t\tif (app.file.fileBasedView)\n\t\t\t\t\tthis._map._docLayer._checkSelectedPart();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse if (!this.modifier && (keyCode === 35 || keyCode === 36) && ev.type === 'keydown') {\n\t\t\tif (this._map._docLayer._docType === 'drawing' && app.file.fileBasedView === true) {\n\t\t\t\tpartToSelect = keyCode === 36 ? 0 : this._map._docLayer._parts -1;\n\t\t\t\tthis._map._docLayer._preview._scrollViewToPartPosition(partToSelect);\n\t\t\t\tthis._map._docLayer._checkSelectedPart();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse if (ev.type === 'keydown') {\n\t\t\tvar key = ev.keyCode;\n\t\t\tvar map = this._map;\n\t\t\tif (key in this._panKeys && !ev.shiftKey) {\n\t\t\t\tif (map._panAnim && map._panAnim._inProgress) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tmap.fire('scrollby', {x: this._panKeys[key][0], y: this._panKeys[key][1]});\n\t\t\t}\n\t\t\telse if (key in this._panKeys && ev.shiftKey &&\n\t\t\t\t\t!docLayer._textCSelections.empty()) {\n\t\t\t\t// if there is a selection and the user wants to modify it\n\t\t\t\tif (keyEventFn) {\n\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (key in this._zoomKeys) {\n\t\t\t\tmap.setZoom(map.getZoom() + (ev.shiftKey ? 3 : 1) * this._zoomKeys[key], null, true /* animate? */);\n\t\t\t}\n\t\t}\n\n\t\tL.DomEvent.stopPropagation(ev);\n\t},\n\n\t_isCtrlKey: function (e) {\n\t\tif (window.ThisIsTheiOSApp || navigator.appVersion.indexOf('Mac') != -1 || navigator.userAgent.indexOf('Mac') != -1)\n\t\t\treturn e.metaKey;\n\t\telse\n\t\t\treturn e.ctrlKey;\n\t},\n\n\t// Given a DOM keyboard event that happened while the Control key was depressed,\n\t// triggers the appropriate action or coolwsd message.\n\t_handleCtrlCommand: function (e) {\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\t// Control\n\t\tif (e.keyCode == 17)\n\t\t\treturn true;\n\n\t\tif (e.type !== 'keydown' && e.key !== 'c' && e.key !== 'v' && e.key !== 'x' &&\n\t\t/* Safari */ e.keyCode !== 99 && e.keyCode !== 118 && e.keyCode !== 120) {\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (e.keyCode !== 67 && e.keyCode !== 86 && e.keyCode !== 88 &&\n\t\t/* Safari */ e.keyCode !== 99 && e.keyCode !== 118 && e.keyCode !== 120 &&\n\t\t\te.key !== 'c' && e.key !== 'v' && e.key !== 'x') {\n\t\t\t// not copy or paste\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && e.shiftKey && e.key === '?') {\n\t\t\tthis._map.showHelp('keyboard-shortcuts');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\t// Handles paste special. The \"Your browser\" thing seems to indicate that this code\n\t\t// snippet is relevant in a browser only.\n\t\tif (!window.ThisIsAMobileApp && e.ctrlKey && e.shiftKey && e.altKey && (e.key === 'v' || e.key === 'V')) {\n\t\t\tthis._map._clip._openPasteSpecialPopup();\n\t\t\treturn true;\n\t\t}\n\n\t\t// Handles unformatted paste\n\t\tif (this._isCtrlKey(e) && e.shiftKey && (e.key === 'v' || e.key === 'V')) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && (e.key === 'k' || e.key === 'K')) {\n\t\t\tthis._map.showHyperlinkDialog();\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && (e.key === 'z' || e.key === 'Z')) {\n\t\t\tapp.socket.sendMessage('uno .uno:Undo');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && (e.key === 'y' || e.key === 'Y')) {\n\t\t\tapp.socket.sendMessage('uno .uno:Redo');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && !e.shiftKey && !e.altKey && (e.key === 'f' || e.key === 'F')) {\n\t\t\tif (!this._map.uiManager.isStatusBarVisible()) {\n\t\t\t\tthis._map.uiManager.showStatusBar();\n\t\t\t}\n\t\t\tthis._map.fire('focussearch');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (e.altKey || e.shiftKey) {\n\n\t\t\t// need to handle Ctrl + Alt + C separately for Firefox\n\t\t\tif (e.key === 'c' && e.altKey) {\n\t\t\t\tthis._map.insertComment();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Ctrl + Alt\n\t\t\tif (!e.shiftKey) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 53: // 5\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:Strikeout');\n\t\t\t\t\treturn true;\n\t\t\t\tcase 70: // f\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:InsertFootnote');\n\t\t\t\t\treturn true;\n\t\t\t\tcase 67: // c\n\t\t\t\tcase 77: // m\n\t\t\t\t\tthis._map.insertComment();\n\t\t\t\t\treturn true;\n\t\t\t\tcase 68: // d\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:InsertEndnote');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (e.altKey) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 68: // Ctrl + Shift + Alt + d for tile debugging mode\n\t\t\t\t\tthis._map._docLayer.toggleTileDebugMode();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t\t/* Without specifying the key type, the messages are sent twice (both keydown/up) */\n\t\tif (e.type === 'keydown' && window.ThisIsAMobileApp) {\n\t\t\tif (e.key === 'c' || e.key === 'C') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Copy');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (e.key === 'v' || e.key === 'V') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Paste');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (e.key === 'x' || e.key === 'X') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Cut');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (window.ThisIsTheAndroidApp)\n\t\t\t\te.preventDefault();\n\t\t}\n\n\t\tswitch (e.keyCode) {\n\t\tcase 51: // 3\n\t\t\tif (this._map.getDocType() === 'spreadsheet') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:SetOptimalColumnWidthDirect');\n\t\t\t\tapp.socket.sendMessage('commandvalues command=.uno:ViewRowColumnHeaders');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\tcase 53: // 5\n\t\t\tif (this._map.getDocType() === 'spreadsheet') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Strikeout');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\tcase 67: // 'C'\n\t\tcase 88: // 'X'\n\t\tcase 99: // 'c'\n\t\tcase 120: // 'x'\n\t\tcase 91: // Left Cmd (Safari)\n\t\tcase 93: // Right Cmd (Safari)\n\t\t\t// we prepare for a copy or cut event\n\t\t\tthis._map.focus();\n\t\t\tthis._map._textInput.select();\n\t\t\treturn true;\n\t\tcase 80: // p\n\t\t\tthis._map.print();\n\t\t\treturn true;\n\t\tcase 83: // s\n\t\t\t// Save only when not read-only.\n\t\t\tif (!this._map.isPermissionReadOnly()) {\n\t\t\t\tthis._map.fire('postMessage', {msgId: 'UI_Save', args: { source: 'keyboard' }});\n\t\t\t\tif (!this._map._disableDefaultAction['UI_Save']) {\n\t\t\t\t\tthis._map.save(false /* An explicit save should terminate cell edit */,\n\t\t\t\t\t               false /* An explicit save should save it again */);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\tcase 86: // v\n\t\tcase 118: // v (Safari)\n\t\t\treturn true;\n\t\tcase 112: // f1\n\t\t\tapp.socket.sendMessage('uno .uno:NoteVisible');\n\t\t\treturn true;\n\t\tcase 188: // ,\n\t\t\tapp.socket.sendMessage('uno .uno:SubScript');\n\t\t\treturn true;\n\t\tcase 190: // .\n\t\t\tapp.socket.sendMessage('uno .uno:SuperScript');\n\t\t\treturn true;\n\t\t}\n\t\tif (e.type === 'keypress' && (e.ctrlKey || e.metaKey) &&\n\t\t\t(e.key === 'c' || e.key === 'v' || e.key === 'x')) {\n\t\t\t// need to handle this separately for Firefox\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n});\n"]}
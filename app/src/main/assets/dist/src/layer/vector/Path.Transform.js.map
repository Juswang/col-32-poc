{"version":3,"file":"Path.Transform.js","sourceRoot":"","sources":["../../../../../../../../../browser/src/layer/vector/Path.Transform.js"],"names":[],"mappings":"AAAA,gCAAgC;AAGhC;;;GAGG;AACH,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC;IAC9C,OAAO,EAAE;QACR,SAAS,EAAE,gCAAgC;KAC3C;IAED,KAAK,EAAE,UAAU,GAAG;QACnB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC/C,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,UAAU;YACvC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,aAAa,CACtD,IAAI,CAAC,OAAO,CAAC,KAAK,CAClB,CAAC,CAAC;SACH;IACF,CAAC;CACD,CAAC,CAAC;AAEH,CAAC,CAAC,aAAa,CAAC,UAAU,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC;IAClD,OAAO,EAAE;QACR,SAAS,EAAE,gCAAgC;KAC3C;IAED,KAAK,EAAE,UAAU,GAAG;QACnB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC/C,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;IAC/B,CAAC;CACD,CAAC,CAAC;AAGH;;;GAGG;AACH,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,aAAa,GAAG;IACtC,aAAa,EAAE,WAAW,EAAE,aAAa,EAAE,WAAW,EAAC,aAAa,EAAE,WAAW,EAAE,aAAa,EAAE,WAAW;CAC7G,CAAC;AAEF,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,iBAAiB,GAAG;IAC1C,IAAI,EAAE,WAAW;IACjB,GAAG,EAAE,WAAW;IAChB,IAAI,EAAE,YAAY;CAClB,CAAC;AAEF;;GAEG;AACH,CAAC,CAAC,aAAa,CAAC,YAAY,GAAG,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;IAC5D,OAAO,EAAE;QACR,SAAS,EAAE,0DAA0D;KACrE;IAED,KAAK,EAAE,UAAU,GAAG;QACnB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC/C,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,UAAU;YACrD,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;SACjC;IACF,CAAC;CACD,CAAC,CAAC;AAEH;;GAEG;AACH,CAAC,CAAC,aAAa,CAAC,YAAY,GAAG,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;IAC5D,mEAAmE;IACnE,4EAA4E;IAC5E,OAAO,EAAE;QACR,SAAS,EAAE,0DAA0D;KACrE;IAED,KAAK,EAAE,UAAU,GAAG;QACnB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC/C,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,UAAU;YACrD,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;SACjC;IACF,CAAC;CACD,CAAC,CAAC;AAEH;;GAEG;AACH,CAAC,CAAC,aAAa,CAAC,UAAU,GAAG,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC;IAC1D,OAAO,EAAE;QACR,SAAS,EAAE,gCAAgC;KAC3C;IAED,KAAK,EAAE,UAAU,GAAG;QACnB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC/C,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,UAAU;YACvC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC,iBAAiB,CAC1D,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,CAC9B,CAAC,CAAC;SACH;IACF,CAAC;CACD,CAAC,CAAC;AAEH,CAAC,CAAC,OAAO,CAAC,aAAa,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC;IAE1C,OAAO,EAAE;QACR,QAAQ,EAAE,IAAI;QACd,OAAO,EAAG,IAAI;QACd,qBAAqB,EAAG,KAAK;QAC7B,cAAc,EAAE,IAAI;QACpB,SAAS,EAAE,KAAK;QAChB,OAAO,EAAG,EAAE;QACZ,OAAO,EAAE,EAAE;QACX,MAAM,EAAE,EAAE;QACV,SAAS,EAAE,CAAC;QACZ,gBAAgB;QAChB,cAAc,EAAE;YACf,MAAM,EAAO,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC3D,SAAS,EAAI,SAAS;YACtB,KAAK,EAAQ,SAAS;YACtB,WAAW,EAAE,CAAC;YACd,MAAM,EAAO,CAAC;YACd,OAAO,EAAM,GAAG;YAChB,SAAS,EAAI,IAAI;SACjB;QAED,gBAAgB,EAAE;YACjB,MAAM,EAAO,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC3D,SAAS,EAAI,SAAS;YACtB,KAAK,EAAQ,SAAS;YACtB,WAAW,EAAE,CAAC;YACd,MAAM,EAAO,CAAC;YACd,OAAO,EAAM,CAAC;YACd,WAAW,EAAE,KAAK;YAClB,SAAS,EAAE,KAAK;YAChB,SAAS,EAAI,KAAK;SAClB;QAED,YAAY;QACZ,aAAa,EAAE;YACd,MAAM,EAAK,CAAC;YACZ,OAAO,EAAI,CAAC;YACZ,WAAW,EAAE,KAAK;YAClB,IAAI,EAAO,KAAK;SAChB;QAED,eAAe,EAAE;YAChB,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;YACV,WAAW,EAAE,KAAK;YAClB,IAAI,EAAE,IAAI;SACV;QAED,mBAAmB;QACnB,mBAAmB,EAAE;YACpB,MAAM,EAAK,CAAC;YACZ,OAAO,EAAI,CAAC;YACZ,SAAS,EAAE,IAAI;YACf,WAAW,EAAE,KAAK;SAClB;QACD,yBAAyB;QACzB,YAAY,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;QAE7D,uCAAuC;QACvC,UAAU,EAAI,CAAC;QAEf,WAAW,EAAQ,CAAC,CAAC,aAAa,CAAC,MAAM;QACzC,iBAAiB,EAAE,CAAC,CAAC,aAAa,CAAC,YAAY;QAC/C,iBAAiB,EAAE,CAAC,CAAC,aAAa,CAAC,YAAY;QAC/C,eAAe,EAAI,CAAC,CAAC,aAAa,CAAC,UAAU;QAC7C,eAAe,EAAI,CAAC,CAAC,aAAa,CAAC,UAAU;KAC7C;IAGD;;;;MAIE;IACF,UAAU,EAAE,UAAS,IAAI;QACxB,aAAa;QACb,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,IAAI,GAAI,IAAI,CAAC;QAElB,WAAW;QACX,IAAI,CAAC,aAAa,GAAK,IAAI,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAK,IAAI,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,cAAc,GAAK,EAAE,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAY,IAAI,CAAC;QAC7B,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,WAAW,GAAO,IAAI,CAAC;QAC5B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,UAAU,GAAQ,EAAE,CAAC;QAC1B,IAAI,CAAC,SAAS,GAAS,IAAI,CAAC;QAC5B,4BAA4B;QAC5B,IAAI,CAAC,eAAe,GAAK,IAAI,CAAC;QAC9B,IAAI,CAAC,YAAY,GAAQ,IAAI,CAAC;QAC9B,IAAI,CAAC,MAAM,GAAc,CAAC,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAc,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,YAAY,GAAQ,CAAC,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAM,IAAI,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,gBAAgB,GAAI,IAAI,CAAC;QAC9B,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QAErC,+BAA+B;QAC/B,IAAI,CAAC,OAAO,GAAY,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEvD,cAAc;QACd,IAAI,CAAC,cAAc,GAAI,IAAI,CAAC;QAC5B,IAAI,CAAC,KAAK,GAAa,IAAI,CAAC;QAC5B,IAAI,CAAC,SAAS,GAAS,EAAE,CAAC;QAC1B,IAAI,CAAC,WAAW,GAAO,IAAI,CAAC;QAC5B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAK,EAAE,CAAC;QAC1B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAGD;;;;MAIE;IACF,MAAM,EAAE,UAAS,OAAO;QACvB,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;YACpB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YAC5B,IAAI,OAAO,EAAE;gBACZ,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;aACzB;YACD,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtC;IACF,CAAC;IAGD;;MAEE;IACF,QAAQ,EAAE;QACT,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,KAAK;aACR,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC;aACxC,EAAE,CAAC,MAAM,EAAO,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC;aACnC,EAAE,CAAC,SAAS,EAAI,IAAI,CAAC,UAAU,EAAI,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;IAC5D,CAAC;IAGD;;MAEE;IACF,WAAW,EAAE;QACZ,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,KAAK;aACR,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC;aACzC,GAAG,CAAC,MAAM,EAAO,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC;aACpC,GAAG,CAAC,SAAS,EAAI,IAAI,CAAC,UAAU,EAAI,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QAE5D,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACnC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAClC;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACtC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SACtB;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACnD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7C;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACpC;QAED,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;IACzB,CAAC;IAED,gBAAgB,EAAE,UAAS,CAAC;QAC3B,IAAI,CAAC,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,gBAAgB,KAAK,KAAK,CAAC;eAC7C,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,gBAAgB,CAAC;YACvC,OAAO;QACR,IAAI,CAAC,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;SACrD;aAAM;YACN,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;SACpD;IACF,CAAC;IAGD;;;MAGE;IACF,UAAU,EAAE,UAAS,OAAO;QAC3B,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC5B,IAAI,OAAO,EAAE;YACZ,IAAI,CAAC,OAAO,EAAE,CAAC;SACf;QAED,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,EACtC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,SAAS,CAAC,OAAO,EACzC,OAAO,CAAC,CAAC;QAEV,IAAI,OAAO,EAAE;YACZ,IAAI,CAAC,MAAM,EAAE,CAAC;SACd;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAGD;;;;MAIE;IACF,MAAM,EAAE,UAAS,KAAK,EAAE,MAAM;QAC7B,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IAC5C,CAAC;IAGD;;;;MAIE;IACF,KAAK,EAAE,UAAS,KAAK,EAAE,MAAM;QAC5B,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC9B,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SAC9B;QACD,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;IAC/C,CAAC;IAGD;;;;;;MAME;IACF,SAAS,EAAE,UAAS,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,WAAW;QAC5D,IAAI,MAAM,GAAO,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;QACxC,cAAc,GAAG,cAAc,IAAI,MAAM,CAAC;QAC1C,WAAW,GAAM,WAAW,IAAO,MAAM,CAAC;QAC1C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;QAC5B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,WAAW,CAAC,CAAC;QAC7E,OAAO,IAAI,CAAC;IACb,CAAC;IAED;;MAEE;IACF,SAAS,EAAE,UAAS,KAAK;QACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1D,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;gBAClC,OAAO,OAAO,CAAC;aACf;SACD;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED;;MAEE;IACF,OAAO,EAAE;QACR,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;QAE1B,kBAAkB;QAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1D,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,OAAO,KAAK,IAAI,CAAC,aAAa,EAAE;gBACnC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;gBACzD,OAAO,CAAC,WAAW,EAAE,CAAC;aACtB;SACD;QAED,MAAM,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC;QAE/B,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAC7B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACrD,CAAC;IAGD;;MAEE;IACF,eAAe,EAAE,UAAS,MAAM;QAC/B,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACtC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAEtC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC5C;IACF,CAAC;IAGD;;MAEE;IACF,MAAM,EAAE;QACP,8CAA8C;QAC9C,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAClC,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QAChC,IAAI,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC;QAEhC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,kBAAkB;QAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1D,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAChC,OAAO,CAAC,OAAO,GAAG,GAAG,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACzD,OAAO,OAAO,CAAC,aAAa,CAAC;YAC7B,OAAO,CAAC,MAAM,EAAE,CAAC;SACjB;QAED,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,GAAI,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAI,CAAC,CAAC;QAEjB,IAAI,CAAC,eAAe,EAAE,CAAC;QAEvB,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAChC,IAAI,KAAK;gBAAE,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;YACnD,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;SACtB;QAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE;YAC9B,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,KAAK;YACZ,QAAQ,EAAE,KAAK;YACf,kCAAkC;YAClC,KAAK,EAAE,IAAI,CAAC,KAAK;SACjB,CAAC,CAAC;QACH,kDAAkD;IACnD,CAAC;IAGD;;;MAGE;IACF,KAAK,EAAE;QACN,IAAI,IAAI,CAAC,QAAQ,EAAE;YAClB,IAAI,IAAI,CAAC,KAAK,EAAE;gBACf,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC5C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aACnE;YACD,IAAI,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACpC;YACD,IAAI,CAAC,eAAe,EAAE,CAAC;SACvB;IACF,CAAC;IAGD;;MAEE;IACF,eAAe,EAAE;QAChB,IAAI,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;QAExC,IAAI,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAClD;QAED,IAAI,IAAI,CAAC,eAAe,EAAE;YACzB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SACtD;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAChD;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACpC;QAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEhE,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YACpD,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7C;QAED,IAAI,CAAC,eAAe,EAAE,CAAC;IACxB,CAAC;IAGD;;MAEE;IACF,oBAAoB,EAAE;QACrB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAE5B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAElC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;SACzE;IACF,CAAC;IAGD;;;;;MAKE;IACF,mBAAmB,EAAE,UAAS,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,WAAW;QACtE,IAAI,GAAG,GAAM,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,IAAI,GAAK,GAAG,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;QACtD,IAAI,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,IAAI,MAAM,CAAC;QAEX,KAAK,GAAG,KAAK,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;QAClC,KAAK,GAAG,KAAK,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAE9C,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;YACtC,WAAW,GAAG,WAAW,IAAI,IAAI,CAAC,YAAY,CAAC;YAC/C,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YACxC,MAAM,GAAG,MAAM;iBACb,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;iBAC9C,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBAC5C,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;SACnD;QAED,IAAI,KAAK,EAAE;YACV,cAAc,GAAG,cAAc,IAAI,IAAI,CAAC,eAAe,CAAC;YACxD,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;YAC3C,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;SAC7C;QAED,OAAO,MAAM,CAAC;IACf,CAAC;IAGD;;;;;;MAME;IACF,eAAe,EAAE,UAAS,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI;QAClD,OAAO,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CACpC,GAAG,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;IACpC,CAAC;IAGD;;;;;;;;;MASE;IACF,gBAAgB,EAAE,UAAS,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,WAAW;QACzE,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,CAAC,GAAG,EAAE;YACT,OAAO,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;YAC7D,OAAO;SACP;QAED,IAAI,IAAI,GAAG,GAAG,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;QACpD,IAAI,CAAC,EAAE,GAAG,CAAC;QAEX,IAAI,eAAe,GAAG,IAAI,CAAC,gBAAgB;YAC1C,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,WAAW,CAAC,CAAC;QACrE,wCAAwC;QAExC,0BAA0B;QAC1B,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,WAAW;YAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,CAClC,IAAI,CAAC,OAAO,EAAE,eAAe,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;SAC3C;aAAM,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,kBAAkB;YAC1D,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;YACxB,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,YAAY,EAAE,CAAC;YAEpC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,WAAW;gBAC7C,OAAO,GAAG,CAAC,OAAO,CAAC,CAAC;aACpB;YACD,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC7C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;oBAClD,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,eAAe,CACnC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,eAAe,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;oBAC5C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACnC;aACD;SACD;aAAM,IAAI,IAAI,YAAY,CAAC,CAAC,QAAQ,EAAE;YACtC,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,eAAe,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;YACpG,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,eAAe,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;SACpG;QAED,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,CAAC;IAED,UAAU,EAAE;QACX,IAAI,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACzD,IAAI,gBAAgB,IAAI,gBAAgB,KAAK,EAAE,EAAE;YAChD,IAAI,EAAE,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACjC,KAAK,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAChC,EAAE,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC7B,IAAI,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC/B,IAAI,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC/B,EAAE,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC7B,KAAK,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAChC,EAAE,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC9B,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;SAClD;QACD,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC9B,OAAO,EAAE,CAAC;IACX,CAAC;IAED,iBAAiB,EAAE,UAAS,IAAI,EAAE,KAAK;QACtC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAC/D,IAAI,IAAI,KAAK,GAAG;YACf,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACvC,IAAI,IAAI,KAAK,GAAG;YACpB,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;aACvC,IAAI,IAAI,KAAK,GAAG;YACpB,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAC7C,CAAC;IAED,iBAAiB,EAAE;QAClB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;QACnD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB;YACjD,IAAI,CAAC,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACpD,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACnC,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;YACnD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACjD,IAAI,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBACtC,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,qBAAqB,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;gBAC/D,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,KAAK,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;gBAC3D,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,eAAe,CAAC,KAAK,EAChD,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,EAAE,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC;qBAC1E,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;aAClC;SACD;IACF,CAAC;IAED,oBAAoB,EAAE,UAAS,CAAC;QAC/B,IAAI,CAAC,KAAK,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,KAAK,IAAI;YAChE,OAAO;QACR,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,gCAAgC;QAChC,6DAA6D;QAC7D,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACxE,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC;QACpB,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACxD,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;IAC3B,CAAC;IAED,oBAAoB,EAAE,UAAS,CAAC;QAC/B,IAAI,CAAC,KAAK,IAAI,CAAC,gBAAgB;YAC9B,OAAO;QACR,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAC9E,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED;;MAEE;IACF,eAAe,EAAE;QAChB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc;YACxC,IAAI,CAAC,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;YACtB,IAAI,CAAC,mBAAmB,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACvD,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC;YACnC,OAAO;QACR,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;YACzB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;YACpB,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAC/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,IAAI,CAAC,IAAI,CAAC,uBAAuB;oBAChC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;gBACxE,IAAI,CAAC,SAAS,CAAC,IAAI,CAClB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC;qBACzH,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;aAC/B;YACD,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;SACpC;QACD,cAAc;QACd,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACnC,IAAI,CAAC,iBAAiB,EAAE,CAAC;SACzB;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE;YAC1C,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAC7B;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE;YACxC,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC3B,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC;SAC9B;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE;YAC1C,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB;QACD,aAAa;QACb,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YAC1B,sBAAsB;YACtB,IAAI,CAAC,uBAAuB,EAAE,CAAC;SAC/B;IACF,CAAC;IAGD;;MAEE;IACF,uBAAuB,EAAE;QACxB,IAAI,GAAG,GAAO,IAAI,CAAC,IAAI,CAAC;QACxB,IAAI,MAAM,GAAK,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QAC7F,IAAI,QAAQ,GAAK,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QAE/F,IAAI,eAAe,GAAG,GAAG,CAAC,kBAAkB,CAC3C,CAAC,CAAC,aAAa,CAAC,WAAW,CAC1B,GAAG,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAC9B,GAAG,CAAC,kBAAkB,CAAC,QAAQ,CAAC,EAChC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAC3B,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,eAAe,CAAC,EAC5D,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC9D,IAAI,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC;QACvD,IAAI,CAAC,eAAe,GAAG,IAAI,iBAAiB,CAAC,eAAe,EAC3D,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC;aAC3B,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC;aAC1B,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAE7C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,CAAC,MAAM,CAClC,CAAC,QAAQ,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,EAC/B,CAAC,QAAQ,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAC/B,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC3C,CAAC;IAED;;MAEE;IACF,mBAAmB,EAAE;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;QACnD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YAC3C,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACrE,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;YACnD,UAAU,CAAC,CAAC,CAAC,CAAC,cAAc,GAAG,KAAK,CAAC;YACrC,IAAI,CAAC,SAAS,CAAC,IAAI,CAClB,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;iBACvC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;SAC/B;IACF,CAAC;IAED,sBAAsB,EAAE,UAAS,GAAG;QACnC,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACxB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QAEpB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE;YAC3B,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;SACnC;QAED,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;QAC5B,IAAI,MAAM,GAAG,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,QAAQ,GAAG,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QACjC,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QAClC,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACvE,IAAI,MAAM,GAAG,CAAC,EAAE;YACf,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;YAC5B,IAAI,mBAAmB,GAAG,MAAM,CAAC,OAAO,CAAC;YACzC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,IAAI,EAAE,EAAE;gBAChC,MAAM,GAAI,IAAI,CAAC,CAAC,MAAM,CACrB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EACrC,mBAAmB,CAAC,GAAG,CAAC,CAAC;gBAC1B,QAAQ,GAAG,IAAI,CAAC,CAAC,MAAM,CACtB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EACrC,mBAAmB,CAAC,GAAG,CAAC,CAAC;aAC1B;iBAAM;gBACN,MAAM,GAAI,IAAI,CAAC,CAAC,MAAM,CACrB,mBAAmB,CAAC,GAAG,EACvB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBACxC,QAAQ,GAAG,IAAI,CAAC,CAAC,MAAM,CACtB,mBAAmB,CAAC,GAAG,EACvB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aACxC;YACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,EACjD,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SAC1D;aACI;YACJ,IAAI,WAAW,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAClF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YACjD,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,CAAC,EAAE,EAAE,YAAY;gBAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,QAAQ,CAAC;oBAC/B,WAAW,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE;oBACnF,WAAW,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE;iBAAC,EACrF,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aACzD;SACD;QACD,IAAI,IAAI,CAAC,SAAS;YACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEpC,IAAI,CAAC,YAAY,GAAI,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;QAEpD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI;aACP,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAK,IAAI,CAAC;aACjF,EAAE,CAAC,SAAS,EAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAA,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACtF,IAAI,CAAC,YAAY,GAAI,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACrF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;QAE/E,IAAI,CAAC,KAAK;aACR,IAAI,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;aAC7C,IAAI,CAAC,YAAY,EAAE;YACnB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;YACpB,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;YAC/B,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE;SACvC,CAAC,CAAC;IACL,CAAC;IAED,iBAAiB,EAAE,UAAS,GAAG;QAC9B,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YAChB,OAAO;SACP;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QAC1C,IAAI,SAAS,GAAG,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAClC,IAAI,kBAAkB,GAAG,CAAC,CAAC;QAC3B,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;YAC3C,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;YAC9B,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;YACnD,kBAAkB,GAAG,CAAC,CAAC;SACvB;aAAM,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,IAAI,EAAE,EAAE;YACnD,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC;YACnD,SAAS,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;YAC9B,kBAAkB,GAAG,EAAE,CAAC;SACxB;aAAM;YACN,SAAS,GAAG,SAAS,CAAC;SACtB;QACD,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;YAC7C,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;YAChD,IAAI,kBAAkB,IAAI,EAAE,EAAE;gBAC7B,OAAO,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;gBAC5B,UAAU,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;aAC/B;iBAAM,IAAI,kBAAkB,IAAI,CAAC,EAAE;gBACnC,OAAO,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;gBAC5B,UAAU,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC;aAC/B;iBAAM,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,CAAC,EAAE,EAAE,YAAY;gBACrD,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC;gBACnD,IAAI,WAAW,IAAI,CAAC,EAAE;oBACrB,OAAO,GAAG,SAAS,CAAC;iBACpB;qBAAM;oBACN,UAAU,GAAG,SAAS,CAAC;iBACvB;aACD;YACD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;SACjD;QACD,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAED,oBAAoB,EAAE;QACrB,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtC,OAAO;SACP;QACD,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI;aACP,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,EAAK,IAAI,CAAC;aACjD,GAAG,CAAC,SAAS,EAAI,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QAEpD,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SACzC;QAED,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE;YAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;YAC1B,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;YAC/B,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE;SACvC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;QAC/B,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACtC;IACF,CAAC;IAED,aAAa,EAAE;QACd,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,6DAA6D;QAC7D,sGAAsG;QACtG,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAE5C,IAAI,UAAU,GAAG,IAAI,CAAC,CAAC,SAAS;QAChC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;YACtB,UAAU,GAAG,IAAI,CAAC,CAAC,kBAAkB;QACtC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;YACtB,OAAO;QAER,IAAI,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACxD,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QACnD,IAAI,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QACzE,IAAI,OAAO,GAAG;YACb,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,eAAe,EAAE,SAAS;YAC1B,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC;gBACf,SAAS,EAAE,eAAe;gBAC1B,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;gBAClB,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;aAClB,CAAC;YACF,SAAS,EAAE,KAAK;SAChB,CAAC;QACF,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC;aACzC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;QACvD,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC5B,CAAC;IAED,qBAAqB,EAAE;QACtB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACxC,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAChE,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;YACnD,IAAI,oBAAoB,GAAG,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YACpF,IAAI,OAAO,GAAG;gBACb,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE;gBACvB,eAAe,EAAE,oBAAoB;aACrC,CAAC;YACF,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,oBAAoB,EACnE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;iBACvD,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC;iBAC1B,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;YACvD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC5B;IACF,CAAC;IAED,wBAAwB,EAAE,UAAS,GAAG;QACrC,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC;QAEhC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,SAAS,GAAG,IAAI,CAAC;QAC9C,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE;YAC3B,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;SACnC;QAED,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,aAAa,EAAE;YACxC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC,CAAC;SAChE;QAED,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,IAAI;aACb,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,mBAAmB,EAAM,IAAI,CAAC;aACnD,EAAE,CAAC,SAAS,EAAI,IAAI,CAAC,sBAAsB,EAAG,IAAI,CAAC,CAAC;IACvD,CAAC;IAED;;MAEE;IACF,mBAAmB,EAAE,UAAS,GAAG;QAChC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YAChB,OAAO;SACP;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;QAC1C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACzC,CAAC;IAED,sBAAsB,EAAE;QACvB,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YAChB,OAAO;SACP;QACD,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,aAAa,EAAE;YACxC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC,CAAC;SACnE;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,SAAS,GAAG,KAAK,CAAC;QAC/C,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,CAAC,KAAK,CAAC,IAAI;aACb,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,mBAAmB,EAAM,IAAI,CAAC;aACpD,GAAG,CAAC,SAAS,EAAI,IAAI,CAAC,sBAAsB,EAAG,IAAI,CAAC,CAAC;QAEvD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE;YAC3B,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;YAC/B,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ;SAC7C,CAAC,CAAC;QAEH,4BAA4B;QAC5B,8EAA8E;QAC9E,qEAAqE;QACrE,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;QACzE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED;;MAEE;IACF,kBAAkB,EAAE;QACnB,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QAClC,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QACpB,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAEpB,OAAO,IAAI,CAAC,CAAC,MAAM,CAClB,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EACrB,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CACrB,CAAC;IACH,CAAC;IAED;;;OAGG;IACF,SAAS,EAAE;QACX,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;IACxC,CAAC;IAED;;;OAGG;IACH,mBAAmB,EAAE,UAAU,GAAG;QACjC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACtB,OAAO,GAAG,CAAC,UAAU,CAAC;SACtB;QAED,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACnD,OAAO,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;IAChD,CAAC;IAED;;;OAGG;IACH,eAAe,EAAE,UAAU,GAAG;QAC7B,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACtB,OAAO,GAAG,CAAC,MAAM,CAAC;SAClB;QAED,OAAO,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC3C,CAAC;IAED;;;MAGE;IACF,cAAc,EAAE,UAAS,GAAG;QAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QACpB,IAAI,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QAElD,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE;YAC3B,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;SACnC;QACD,IAAI,CAAC,aAAa,GAAO,IAAI,CAAC;QAC9B,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC,kBAAkB,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,cAAc,GAAM,aAAa,CAAC;QACvC,IAAI,CAAC,cAAc,GAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAE9C,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;QAChB,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,IAAI;aACb,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,EAAM,IAAI,CAAC;aACzC,EAAE,CAAC,SAAS,EAAI,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAE3C,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,KAAK;aACR,IAAI,CAAC,gBAAgB,EAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;aAC/C,IAAI,CAAC,aAAa,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;IAC3D,CAAC;IAGD;;MAEE;IACF,SAAS,EAAE,UAAS,GAAG;QACtB,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACxC,OAAO;SACP;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QACxC,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;QACnC,IAAI,MAAM,GAAK,IAAI,CAAC,iBAAiB,CAAC;QAEtC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,sBAAsB;QACtB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QAE1D,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc;aAChC,KAAK,EAAE;aACP,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;aAC3B,IAAI,EAAE,CAAC;QAET,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IACzE,CAAC;IAGD;;MAEE;IACF,YAAY,EAAE,UAAS,GAAG;QACzB,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACxC,OAAO;SACP;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QACxC,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;QACnC,IAAI,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACpC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;YAC5D,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QAE7D,IAAI,KAAK,GAAG,CAAC,EAAE;YACd,KAAK,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;SACvB;QAED,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClD,IAAI,CAAC,KAAK,CAAC,IAAI;aACb,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC;aACtC,GAAG,CAAC,SAAS,EAAI,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAE5C,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;QAErE,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;IACjC,CAAC;IAGD;;MAEE;IACF,aAAa,EAAE,UAAS,GAAG;QAC1B,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QACxB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;QAEpB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,IAAI,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE;YAC3B,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;SACnC;QAED,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;QAE5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,YAAY,GAAI,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC;QAEpD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI;aACP,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,EAAK,IAAI,CAAC;aACvC,EAAE,CAAC,SAAS,EAAI,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,YAAY,GAAI,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACrF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/E,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;QAE/E,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC;QAC7C,IAAI,CAAC,KAAK;aACR,IAAI,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;aAC7C,IAAI,CAAC,YAAY,EAAE;YACnB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;YACpB,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;YAC/B,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;SACrC,CAAC,CAAC;QAEJ,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SAC5C;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE;YAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,EAAE,CAAC;gBAClD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/C;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACpC;QAED,iDAAiD;IAClD,CAAC;IAGD;;MAEE;IACF,QAAQ,EAAE,UAAS,GAAG;QACrB,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtC,OAAO;SACP;QAED,IAAI,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC;QAClD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACnC,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;YAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACzC,IAAI,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;gBAC5B,IAAI,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC,EAAE;oBAC/E,SAAS,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;oBAC/B,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;iBACrC;qBAAM,IAAI,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE;oBACnC,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;oBACrC,SAAS,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;iBAChC;aACD;SACD;QAED,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;QAC5C,IAAI,MAAM,EAAE,MAAM,CAAC;QAEnB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,IAAI,cAAc,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;QACjE,IAAI,aAAa,GAAG,MAAM,CAAC,gBAAgB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;QACvE,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,IAAI,CAAC,aAAa,IAAI,cAAc,CAAC,CAAC;QAC/E,4EAA4E;QAC5E,IAAI,CAAC,YAAY,IAAI,cAAc;YAClC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC;QAElF,IAAI,YAAY,EAAE;YACjB,MAAM,GAAG,WAAW,CAAC,UAAU,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;YACnE,MAAM,GAAG,MAAM,CAAC;SAChB;aAAM;YACN,MAAM,GAAG,IAAI,CAAC,aAAa,KAAK,CAAC,CAAC,CAAC;gBAClC,CAAC,WAAW,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5D,MAAM,GAAG,IAAI,CAAC,aAAa,KAAK,CAAC,CAAC,CAAC;gBAClC,CAAC,WAAW,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5D;QAED,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QAE1C,gBAAgB;QAChB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc;aAChC,KAAK,EAAE;aACP,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;QAElC,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE;YACxB,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;SAAE,CAAC,CAAC;IACnD,CAAC;IAGD;;;MAGE;IACF,WAAW,EAAE,WAAS,OAAO;QAC5B,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtC,OAAO;SACP;QACD,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,CAAC,IAAI;aACP,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,EAAK,IAAI,CAAC;aACxC,GAAG,CAAC,SAAS,EAAI,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAE3C,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;YAC1B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SACzC;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE;YAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,EAAE,CAAC;gBAClD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5C;QAED,IAAI,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACjC;QAED,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC1B,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,MAAM,CAAC;SAC/C;QACD,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC;QAC7C,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE;YAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;YAC1B,GAAG,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO;YAC/B,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;YACtE,MAAM,EAAE,OAAO;SACf,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;IAChC,CAAC;IAGD;;MAEE;IACF,YAAY,EAAE;QACb,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAS,KAAK;YAC3C,KAAK,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1D,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAChC,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;SAC/C;IACF,CAAC;IAGD;;;MAGE;IACF,mBAAmB,EAAE;QACpB,OAAO,IAAI,CAAC,CAAC,SAAS,CACrB,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IACtD,CAAC;IAGD;;;;;;;MAOE;IACF,cAAc,EAAE,UAAS,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;QAClD,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;QAC3C,IAAI,OAAO,GAAG;YACb,SAAS,EAAE,6CAA6C;gBACxD,KAAK,GAAG,gBAAgB,GAAG,IAAI;YAC/B,KAAK,EAAM,KAAK;YAChB,IAAI,EAAO,IAAI;SACf,CAAC;QACF,IAAI,IAAI,CAAC,OAAO,CAAC,qBAAqB,IAAI,KAAK,GAAG,CAAC,EAAE;YACpD,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;YACpB,OAAO,CAAC,IAAI,GAAG,KAAK,CAAC;YACrB,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;QACD,IAAI,MAAM,GAAG,IAAI,WAAW,CAAC,MAAM,EAClC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,OAAO,CAAC,CACvD,CAAC;QAEF,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QACpC,OAAO,MAAM,CAAC;IACf,CAAC;IAED,kBAAkB,EAAE,UAAS,MAAM,EAAE,KAAK;QACzC,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;QAC/C,IAAI,OAAO,GAAG;YACb,SAAS,EAAE,+BAA+B;YAC1C,KAAK,EAAM,KAAK;YAChB,MAAM,EAAK,MAAM,CAAC,OAAO;YACzB,EAAE,EAAS,MAAM,CAAC,EAAE;YACpB,IAAI,EAAO,MAAM,CAAC,IAAI;SACtB,CAAC;QACF,IAAI,OAAO,CAAC,MAAM,IAAI,EAAE,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;YAChD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC5B;QACD,IAAI,MAAM,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,EAC1G,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,OAAO,CAAC,CACvD,CAAC;QAEF,MAAM,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,CAAC;QAC1D,OAAO,MAAM,CAAC;IACf,CAAC;IAGD;;MAEE;IACF,aAAa,EAAE;QACd,IAAI,IAAI,CAAC,cAAc;YACtB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC5C,IAAI,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACpC;QACD,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAC/B,CAAC;IAED,aAAa,EAAE;QACd,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACxC,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED;;MAEE;IACF,YAAY,EAAE;QACb,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;QAC/B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChC,CAAC;IAED,OAAO,EAAE,UAAS,GAAG;QACpB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACtB,IAAI,MAAM,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAE3E,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAC9B,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;IACjB,CAAC;IAGD;;MAEE;IACF,UAAU,EAAE,UAAS,GAAG;QACvB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACtB,IAAI,MAAM,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QAE3E,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACnB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAC7C;QACD,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QAExB,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE;YAC9B,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;YACpB,QAAQ,EAAE,CAAC;YACX,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC;YACzC,SAAS,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;YACxC,KAAK,EAAE,IAAI,CAAC,KAAK;SACjB,CAAC,CAAC;IACJ,CAAC;CACD,CAAC,CAAC;AAEH,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC;IACtB,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC3B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;KAC3E;AACF,CAAC,CAAC,CAAC","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n\n\n/**\n * Marker handler\n * @extends {L.CircleMarker}\n */\nL.PathTransform.Handle = L.CircleMarker.extend({\n\toptions: {\n\t\tclassName: 'leaflet-path-transform-handler'\n\t},\n\n\tonAdd: function (map) {\n\t\tL.CircleMarker.prototype.onAdd.call(this, map);\n\t\tif (this.options.setCursor) { // SVG/VML\n\t\t\tthis.setCursorType(L.PathTransform.Handle.CursorsByType[\n\t\t\t\tthis.options.index\n\t\t\t]);\n\t\t}\n\t}\n});\n\nL.PathTransform.GlueHandle = L.CircleMarker.extend({\n\toptions: {\n\t\tclassName: 'leaflet-path-transform-handler'\n\t},\n\n\tonAdd: function (map) {\n\t\tL.CircleMarker.prototype.onAdd.call(this, map);\n\t\tthis.setCursorType('default');\n\t}\n});\n\n\n/**\n * @const\n * @type {Array}\n */\nL.PathTransform.Handle.CursorsByType = [\n\t'nesw-resize', 'ew-resize', 'nwse-resize', 'ns-resize','nesw-resize', 'ew-resize', 'nwse-resize', 'ns-resize'\n];\n\nL.PathTransform.Handle.PolyCursorsByType = {\n\t'10': 'ew-resize',\n\t'8': 'ns-resize',\n\t'38': 'all-scroll',\n};\n\n/**\n * @extends {L.Handler.PathTransform.Handle}\n */\nL.PathTransform.RotateHandle = L.PathTransform.Handle.extend({\n\toptions: {\n\t\tclassName: 'leaflet-path-transform-handler transform-handler--rotate'\n\t},\n\n\tonAdd: function (map) {\n\t\tL.CircleMarker.prototype.onAdd.call(this, map);\n\t\tif (this._path && this.options.setCursor) { // SVG/VML\n\t\t\tthis.setCursorType('all-scroll');\n\t\t}\n\t}\n});\n\n/**\n * @extends {L.Handler.PathTransform.Handle}\n */\nL.PathTransform.CustomHandle = L.PathTransform.Handle.extend({\n\t// transform-handler--rotate and others are defined in branding.css\n\t// Until it is updated, we can use rotate as the style matches with the core\n\toptions: {\n\t\tclassName: 'leaflet-path-transform-handler transform-handler--rotate',\n\t},\n\n\tonAdd: function (map) {\n\t\tL.CircleMarker.prototype.onAdd.call(this, map);\n\t\tif (this._path && this.options.setCursor) { // SVG/VML\n\t\t\tthis.setCursorType('all-scroll');\n\t\t}\n\t}\n});\n\n/**\n * @extends {L.Handler.PathTransform.Handle}\n */\nL.PathTransform.PolyHandle = L.PathTransform.Handle.extend({\n\toptions: {\n\t\tclassName: 'leaflet-path-transform-handler',\n\t},\n\n\tonAdd: function (map) {\n\t\tL.CircleMarker.prototype.onAdd.call(this, map);\n\t\tif (this.options.setCursor) { // SVG/VML\n\t\t\tthis.setCursorType(L.PathTransform.Handle.PolyCursorsByType[\n\t\t\t\tthis.options.cursor.toString()\n\t\t\t]);\n\t\t}\n\t}\n});\n\nL.Handler.PathTransform = L.Handler.extend({\n\n\toptions: {\n\t\trotation: true,\n\t\tscaling:  true,\n\t\tscaleSouthAndEastOnly:  false,\n\t\tuniformScaling: true,\n\t\tisRotated: false,\n\t\tmaxZoom:  22,\n\t\thandles: [],\n\t\tshapes: [],\n\t\tshapeType: 0,\n\t\t// edge handlers\n\t\thandlerOptions: {\n\t\t\tradius:      L.Browser.touch && !L.Browser.pointer ? 10 : 5,\n\t\t\tfillColor:   '#ffffff',\n\t\t\tcolor:       '#202020',\n\t\t\tfillOpacity: 1,\n\t\t\tweight:      2,\n\t\t\topacity:     0.7,\n\t\t\tsetCursor:   true\n\t\t},\n\n\t\tgluePointOptions: {\n\t\t\tradius:      L.Browser.touch && !L.Browser.pointer ? 10 : 5,\n\t\t\tfillColor:   '#EE3E3E',\n\t\t\tcolor:       '#202020',\n\t\t\tfillOpacity: 1,\n\t\t\tweight:      2,\n\t\t\topacity:     1,\n\t\t\tinteractive: false,\n\t\t\tdraggable: false,\n\t\t\tsetCursor:   false\n\t\t},\n\n\t\t// rectangle\n\t\tboundsOptions: {\n\t\t\tweight:    1,\n\t\t\topacity:   0,\n\t\t\tinteractive: false,\n\t\t\tfill:      false\n\t\t},\n\n\t\tpolyLineOptions: {\n\t\t\tweight: 1,\n\t\t\topacity: 1,\n\t\t\tinteractive: false,\n\t\t\tfill: true\n\t\t},\n\n\t\t// rotation handler\n\t\trotateHandleOptions: {\n\t\t\tweight:    1,\n\t\t\topacity:   1,\n\t\t\tsetCursor: true,\n\t\t\tinteractive: false\n\t\t},\n\t\t// rotation handle length\n\t\thandleLength: L.Browser.touch && !L.Browser.pointer ? 40 : 20,\n\n\t\t// maybe I'll add skewing in the future\n\t\tedgesCount:   4,\n\n\t\thandleClass:       L.PathTransform.Handle,\n\t\trotateHandleClass: L.PathTransform.RotateHandle,\n\t\tcustomHandleClass: L.PathTransform.CustomHandle,\n\t\tpolyHandleClass:   L.PathTransform.PolyHandle,\n\t\tglueHandleClass:   L.PathTransform.GlueHandle\n\t},\n\n\n\t/**\n\t* @class L.Handler.PathTransform\n\t* @constructor\n\t* @param  {L.Path} path\n\t*/\n\tinitialize: function(path) {\n\t\t// references\n\t\tthis._path = path;\n\t\tthis._map  = null;\n\n\t\t// handlers\n\t\tthis._activeMarker   = null;\n\t\tthis._originMarker   = null;\n\t\tthis._rotationMarker = null;\n\t\tthis._customMarkers   = [];\n\t\tthis._anchor          = null;\n\t\tthis._customHandlePosition = null;\n\t\tthis._polyMarker     = null;\n\t\tthis._polyMarkerPosition = null;\n\t\tthis._polyEdges      = [];\n\t\tthis._polyLine       = null;\n\t\t// origins & temporary state\n\t\tthis._rotationOrigin   = null;\n\t\tthis._scaleOrigin      = null;\n\t\tthis._angle            = 0;\n\t\tthis._scale            = L.point(1, 1);\n\t\tthis._initialDist      = 0;\n\t\tthis._initialDistX     = 0;\n\t\tthis._initialDistY     = 0;\n\t\tthis._rotationStart    = null;\n\t\tthis._rotationOriginPt = null;\n\t\tthis._handlersVisible  = true;\n\t\tthis._handlerPointsConverted = false;\n\n\t\t// preview and transform matrix\n\t\tthis._matrix          = new L.Matrix(1, 0, 0, 1, 0, 0);\n\t\tthis._projectedMatrix = new L.Matrix(1, 0, 0, 1, 0, 0);\n\n\t\t// ui elements\n\t\tthis._handlersGroup  = null;\n\t\tthis._rect           = null;\n\t\tthis._handlers       = [];\n\t\tthis._handleLine     = null;\n\t\tthis._glueHandlersGroup = null;\n\t\tthis._glueHandlers   = [];\n\t\tthis._activeGluePoint = null;\n\t},\n\n\n\t/**\n\t* If the polygon is not rendered, you can transform it yourself\n\t* in the coordinates, and do it properly.\n\t* @param {Object=} options\n\t*/\n\tenable: function(options) {\n\t\tif (this._path._map) {\n\t\t\tthis._map = this._path._map;\n\t\t\tif (options) {\n\t\t\t\tthis.setOptions(options);\n\t\t\t}\n\t\t\tL.Handler.prototype.enable.call(this);\n\t\t}\n\t},\n\n\n\t/**\n\t* Init interactions and handlers\n\t*/\n\taddHooks: function() {\n\t\tthis._createHandlers();\n\t\tthis._path\n\t\t\t.on('dragstart', this._onDragStart, this)\n\t\t\t.on('drag',      this._onDrag, this)\n\t\t\t.on('dragend',   this._onDragEnd,   this);\n\t\tthis._map.on('handlerstatus', this._onHandlerStatus, this);\n\t},\n\n\n\t/**\n\t* Remove handlers\n\t*/\n\tremoveHooks: function() {\n\t\tthis._hideHandlers();\n\t\tthis._path\n\t\t\t.off('dragstart', this._onDragStart, this)\n\t\t\t.off('drag',      this._onDrag, this)\n\t\t\t.off('dragend',   this._onDragEnd,   this);\n\t\tthis._map.off('handlerstatus', this._onHandlerStatus, this);\n\n\t\tif (this._map.hasLayer(this._rect)) {\n\t\t\tthis._map.removeLayer(this._rect);\n\t\t}\n\n\t\tif (this._polyLine) {\n\t\t\tthis._map.removeLayer(this._polyLine);\n\t\t\tthis._polyLine = null;\n\t\t}\n\n\t\tfor (var i = 0; i < this._glueHandlers.length; i++) {\n\t\t\tthis._map.removeLayer(this._glueHandlers[i]);\n\t\t}\n\n\t\tif (this._anchor) {\n\t\t\tthis._map.removeLayer(this._anchor);\n\t\t}\n\n\t\tthis._handlersGroup = null;\n\t\tthis._glueHandlersGroup = null;\n\t\tthis._rect = null;\n\t\tthis._handlers = [];\n\t\tthis._glueHandlers = [];\n\t},\n\n\t_onHandlerStatus: function(e) {\n\t\tif ((e.hidden && this._handlersVisible === false)\n\t\t\t|| (!e.hidden && this._handlersVisible))\n\t\t\treturn;\n\t\tif (e.hidden) {\n\t\t\tthis._hideHandlers();\n\t\t\tthis._path.off('dragstart', this._onDragStart, this);\n\t\t} else {\n\t\t\tthis._showHandlers();\n\t\t\tthis._path.on('dragstart', this._onDragStart, this);\n\t\t}\n\t},\n\n\n\t/**\n\t* Change editing options\n\t* @param {Object} options\n\t*/\n\tsetOptions: function(options) {\n\t\tvar enabled = this._enabled;\n\t\tif (enabled) {\n\t\t\tthis.disable();\n\t\t}\n\n\t\tthis.options = L.PathTransform.merge({},\n\t\t\tL.Handler.PathTransform.prototype.options,\n\t\t\toptions);\n\n\t\tif (enabled) {\n\t\t\tthis.enable();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\n\t/**\n\t* @param  {Number}   angle\n\t* @param  {L.LatLng} origin\n\t* @return {L.Handler.PathTransform}\n\t*/\n\trotate: function(angle, origin) {\n\t\treturn this.transform(angle, null, origin);\n\t},\n\n\n\t/**\n\t* @param  {L.Point|Number} scale\n\t* @param  {L.LatLng}       origin\n\t* @return {L.Handler.PathTransform}\n\t*/\n\tscale: function(scale, origin) {\n\t\tif (typeof scale === 'number') {\n\t\t\tscale = L.point(scale, scale);\n\t\t}\n\t\treturn this.transform(0, scale, null, origin);\n\t},\n\n\n\t/**\n\t* @param  {Number}    angle\n\t* @param  {L.Point}   scale\n\t* @param  {L.LatLng=} rotationOrigin\n\t* @param  {L.LatLng=} scaleOrigin\n\t* @return {L.Handler.PathTransform}\n\t*/\n\ttransform: function(angle, scale, rotationOrigin, scaleOrigin) {\n\t\tvar center     = this._path.getCenter();\n\t\trotationOrigin = rotationOrigin || center;\n\t\tscaleOrigin    = scaleOrigin    || center;\n\t\tthis._map = this._path._map;\n\t\tthis._transformPoints(this._path, angle, scale, rotationOrigin, scaleOrigin);\n\t\treturn this;\n\t},\n\n\t/**\n\t* @param  {L.Point}   point\n\t*/\n\tgetMarker: function(point) {\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\n\t\t\tvar handler = this._handlers[i];\n\t\t\tif (handler._containsPoint(point)) {\n\t\t\t\treturn handler;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t},\n\n\t/**\n\t* Update the polygon and handlers preview, no reprojection\n\t*/\n\t_update: function() {\n\t\tvar matrix = this._matrix;\n\n\t\t// update handlers\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\n\t\t\tvar handler = this._handlers[i];\n\t\t\tif (handler !== this._originMarker) {\n\t\t\t\thandler._point = matrix.transform(handler._initialPoint);\n\t\t\t\thandler._updatePath();\n\t\t\t}\n\t\t}\n\n\t\tmatrix = matrix.clone().flip();\n\n\t\tthis._applyTransform(matrix);\n\t\tthis._path.fire('transform', { layer: this._path });\n\t},\n\n\n\t/**\n\t* @param  {L.Matrix} matrix\n\t*/\n\t_applyTransform: function(matrix) {\n\t\tthis._path._transform(matrix._matrix);\n\t\tthis._rect._transform(matrix._matrix);\n\n\t\tif (this.options.rotation) {\n\t\t\tthis._handleLine._transform(matrix._matrix);\n\t\t}\n\t},\n\n\n\t/**\n\t* Apply final transformation\n\t*/\n\t_apply: function() {\n\t\t//window.app.console.group('apply transform');\n\t\tvar map = this._map;\n\t\tvar matrix = this._matrix.clone();\n\t\tvar angle = this._angle;\n\t\tvar scale = this._scale.clone();\n\t\tvar moved = this._handleDragged;\n\n\t\tthis._transformGeometries();\n\n\t\t// update handlers\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\n\t\t\tvar handler = this._handlers[i];\n\t\t\thandler._latlng = map.layerPointToLatLng(handler._point);\n\t\t\tdelete handler._initialPoint;\n\t\t\thandler.redraw();\n\t\t}\n\n\t\tthis._matrix = L.matrix(1, 0, 0, 1, 0, 0);\n\t\tthis._scale  = L.point(1, 1);\n\t\tthis._angle  = 0;\n\n\t\tthis._updateHandlers();\n\n\t\tif (this._mapDraggingWasEnabled) {\n\t\t\tif (moved) L.DomEvent._fakeStop({ type: 'click' });\n\t\t\tmap.dragging.enable();\n\t\t}\n\n\t\tthis._path.fire('transformed', {\n\t\t\tmatrix: matrix,\n\t\t\tscale: scale,\n\t\t\trotation: angle,\n\t\t\t// angle: angle * (180 / Math.PI),\n\t\t\tlayer: this._path\n\t\t});\n\t\t// window.app.console.groupEnd('apply transform');\n\t},\n\n\n\t/**\n\t* Use this method to completely reset handlers, if you have changed the\n\t* geometry of transformed layer\n\t*/\n\treset: function() {\n\t\tif (this._enabled) {\n\t\t\tif (this._rect) {\n\t\t\t\tthis._handlersGroup.removeLayer(this._rect);\n\t\t\t\tthis._rect = this._getBoundingPolygon().addTo(this._handlersGroup);\n\t\t\t}\n\t\t\tif (this._anchor) {\n\t\t\t\tthis._map.removeLayer(this._anchor);\n\t\t\t}\n\t\t\tthis._updateHandlers();\n\t\t}\n\t},\n\n\n\t/**\n\t* Recalculate rotation handlers position\n\t*/\n\t_updateHandlers: function() {\n\t\tvar handlersGroup = this._handlersGroup;\n\n\t\tif (this._handleLine) {\n\t\t\tthis._handlersGroup.removeLayer(this._handleLine);\n\t\t}\n\n\t\tif (this._rotationMarker) {\n\t\t\tthis._handlersGroup.removeLayer(this._rotationMarker);\n\t\t}\n\n\t\tif (this._polyLine) {\n\t\t\tthis._handlersGroup.removeLayer(this._polyLine);\n\t\t}\n\n\t\tif (this._anchor) {\n\t\t\tthis._map.removeLayer(this._anchor);\n\t\t}\n\n\t\tthis._handleLine = this._rotationMarker = this._polyLine = null;\n\n\t\tfor (var i = this._handlers.length - 1; i >= 0; i--) {\n\t\t\thandlersGroup.removeLayer(this._handlers[i]);\n\t\t}\n\n\t\tthis._createHandlers();\n\t},\n\n\n\t/**\n\t* Transform geometries separately\n\t*/\n\t_transformGeometries: function() {\n\t\tthis._path._transform(null);\n\t\tthis._rect._transform(null);\n\n\t\tthis._transformPoints(this._path);\n\t\tthis._transformPoints(this._rect);\n\n\t\tif (this.options.rotation) {\n\t\t\tthis._handleLine._transform(null);\n\t\t\tthis._transformPoints(this._handleLine, this._angle, null, this._origin);\n\t\t}\n\t},\n\n\n\t/**\n\t* @param {Number} angle\n\t* @param {Number} scale\n\t* @param {L.LatLng=} rotationOrigin\n\t* @param {L.LatLng=} scaleOrigin\n\t*/\n\t_getProjectedMatrix: function(angle, scale, rotationOrigin, scaleOrigin) {\n\t\tvar map    = this._map;\n\t\tvar zoom   = map.getMaxZoom() || this.options.maxZoom;\n\t\tvar matrix = L.matrix(1, 0, 0, 1, 0, 0);\n\t\tvar origin;\n\n\t\tangle = angle || this._angle || 0;\n\t\tscale = scale || this._scale || L.point(1, 1);\n\n\t\tif (!(scale.x === 1 && scale.y === 1)) {\n\t\t\tscaleOrigin = scaleOrigin || this._scaleOrigin;\n\t\t\torigin = map.project(scaleOrigin, zoom);\n\t\t\tmatrix = matrix\n\t\t\t\t._add(L.matrix(1, 0, 0, 1, origin.x, origin.y))\n\t\t\t\t._add(L.matrix(scale.x, 0, 0, scale.y, 0, 0))\n\t\t\t\t._add(L.matrix(1, 0, 0, 1, -origin.x, -origin.y));\n\t\t}\n\n\t\tif (angle) {\n\t\t\trotationOrigin = rotationOrigin || this._rotationOrigin;\n\t\t\torigin = map.project(rotationOrigin, zoom);\n\t\t\tmatrix = matrix.rotate(angle, origin).flip();\n\t\t}\n\n\t\treturn matrix;\n\t},\n\n\n\t/**\n\t* @param  {L.LatLng} latlng\n\t* @param  {L.Matrix} matrix\n\t* @param  {L.Map}    map\n\t* @param  {Number}   zoom\n\t* @return {L.LatLng}\n\t*/\n\t_transformPoint: function(latlng, matrix, map, zoom) {\n\t\treturn map.unproject(matrix.transform(\n\t\t\tmap.project(latlng, zoom)), zoom);\n\t},\n\n\n\t/**\n\t* Applies transformation, does it in one sweep for performance,\n\t* so don't be surprised about the code repetition.\n\t*\n\t* @param {L.Path}    path\n\t* @param {Number=}   angle\n\t* @param {L.Point=}  scale\n\t* @param {L.LatLng=} rotationOrigin\n\t* @param {L.LatLng=} scaleOrigin\n\t*/\n\t_transformPoints: function(path, angle, scale, rotationOrigin, scaleOrigin) {\n\t\tvar map = path._map;\n\t\tif (!map) {\n\t\t\tconsole.warn('Cannot get map from path in _transformPoints');\n\t\t\treturn;\n\t\t}\n\n\t\tvar zoom = map.getMaxZoom() || this.options.maxZoom;\n\t\tvar i, len;\n\n\t\tvar projectedMatrix = this._projectedMatrix =\n\t\t\tthis._getProjectedMatrix(angle, scale, rotationOrigin, scaleOrigin);\n\t\t// window.app.console.time('transform');\n\n\t\t// all shifts are in-place\n\t\tif (path._point) { // L.Circle\n\t\t\tpath._latlng = this._transformPoint(\n\t\t\t\tpath._latlng, projectedMatrix, map, zoom);\n\t\t} else if (path._rings || path._parts) { // everything else\n\t\t\tvar rings = path._rings;\n\t\t\tvar latlngs = path._latlngs;\n\t\t\tpath._bounds = new L.LatLngBounds();\n\n\t\t\tif (!L.Util.isArray(latlngs[0])) { // polyline\n\t\t\t\tlatlngs = [latlngs];\n\t\t\t}\n\t\t\tfor (i = 0, len = rings.length; i < len; i++) {\n\t\t\t\tfor (var j = 0, jj = rings[i].length; j < jj; j++) {\n\t\t\t\t\tlatlngs[i][j] = this._transformPoint(\n\t\t\t\t\t\tlatlngs[i][j], projectedMatrix, map, zoom);\n\t\t\t\t\tpath._bounds.extend(latlngs[i][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (path instanceof L.SVGGroup) {\n\t\t\tpath._bounds._southWest = this._transformPoint(path._bounds._southWest, projectedMatrix, map, zoom);\n\t\t\tpath._bounds._northEast = this._transformPoint(path._bounds._northEast, projectedMatrix, map, zoom);\n\t\t}\n\n\t\tpath._reset();\n\t},\n\n\t_getPoints: function () {\n\t\tvar rectangleHandles = this.options.handles['rectangle'];\n\t\tif (rectangleHandles && rectangleHandles !== '') {\n\t\t\tvar nw = rectangleHandles['1'][0],\n\t\t\tnorth = rectangleHandles['2'][0],\n\t\t\tne = rectangleHandles['3'][0],\n\t\t\twest = rectangleHandles['4'][0],\n\t\t\teast = rectangleHandles['5'][0],\n\t\t\tsw = rectangleHandles['6'][0],\n\t\t\tsouth = rectangleHandles['7'][0],\n\t\t\tse = rectangleHandles['8'][0];\n\t\t\treturn [sw, west, nw, north, ne, east, se, south];\n\t\t}\n\t\tthis.options.rotation = false;\n\t\treturn [];\n\t},\n\n\t_getMirroredIndex: function(type, index) {\n\t\tvar sw = 0, w = 1, nw = 2, n = 3, ne = 4, e = 5, se = 6, s = 7;\n\t\tif (type === 'h')\n\t\t\treturn [nw, w, sw, s, se, e, ne, n][index];\n\t\telse if (type === 'v')\n\t\t\treturn [se, e, ne, n, nw, w, sw, s][index];\n\t\telse if (type === 'c')\n\t\t\treturn [ne, e, se, s, sw, w, nw, n][index];\n\t},\n\n\t_createGluePoints: function() {\n\t\tvar map = this._map;\n\t\tvar GlueHandleClass = this.options.glueHandleClass;\n\t\tthis._glueHandlersGroup = this._glueHandlersGroup ||\n\t\tnew L.LayerGroup().addTo(map);\n\t\tfor (var i = 0; i < this.options.shapes.length; i++) {\n\t\t\tvar shape = this.options.shapes[i];\n\t\t\tvar gridoffset = this.options.shapes[i].gridoffset;\n\t\t\tfor (var j = 0; j < shape.gluepoints.length; j++) {\n\t\t\t\tvar point = shape.gluepoints[j].point;\n\t\t\t\tpoint = map._docLayer._convertCalcTileTwips(point, gridoffset);\n\t\t\t\tpoint = map._docLayer._twipsToLatLng(point, map.getZoom());\n\t\t\t\tthis._glueHandlers.push(new GlueHandleClass(point,\n\t\t\t\t\tL.Util.extend({}, this.options.gluePointOptions, { ordNum: shape.ordnum }))\n\t\t\t\t\t.addTo(this._glueHandlersGroup));\n\t\t\t}\n\t\t}\n\t},\n\n\t_gluePointMouseEnter: function(e) {\n\t\tif (e === this._activeGluePoint || this._activeGluePoint !== null)\n\t\t\treturn;\n\t\tvar marker = e;\n\t\t// Ugly way to clone the object.\n\t\t// Object.assign is not supported nor the spread syntax (...)\n\t\tvar options = JSON.parse(JSON.stringify(this.options.gluePointOptions));\n\t\toptions.radius *= 2;\n\t\tL.CircleMarker.prototype.setStyle.call(marker, options);\n\t\tthis._activeGluePoint = e;\n\t},\n\n\t_gluePointMouseLeave: function(e) {\n\t\tif (e !== this._activeGluePoint)\n\t\t\treturn;\n\t\tvar marker = e;\n\t\tL.CircleMarker.prototype.setStyle.call(marker, this.options.gluePointOptions);\n\t\tthis._activeGluePoint = null;\n\t},\n\n\t/**\n\t* Creates markers and handles\n\t*/\n\t_createHandlers: function() {\n\t\tvar map = this._map;\n\t\tthis._handlersGroup = this._handlersGroup ||\n\t\t\tnew L.LayerGroup().addTo(map);\n\t\tthis._rect = this._rect ||\n\t\t\tthis._getBoundingPolygon().addTo(this._handlersGroup);\n\t\tif (this.options.handles.length <= 0)\n\t\t\treturn;\n\t\tif (this.options.scaling) {\n\t\t\tthis._handlers = [];\n\t\t\tvar points = this._getPoints();\n\t\t\tfor (var i = 0; i < points.length; i++) {\n\t\t\t\tif (!this._handlerPointsConverted)\n\t\t\t\t\tpoints[i].point = map._docLayer._convertCalcTileTwips(points[i].point);\n\t\t\t\tthis._handlers.push(\n\t\t\t\t\tthis._createHandler(this._map._docLayer._twipsToLatLng(points[i].point, this._map.getZoom()), i * 2, i, this._onScaleStart)\n\t\t\t\t\t\t.addTo(this._handlersGroup));\n\t\t\t}\n\t\t\tthis._handlerPointsConverted = true;\n\t\t}\n\t\t// Glue Points\n\t\tif (this.options.shapes.length > 0) {\n\t\t\tthis._createGluePoints();\n\t\t}\n\n\t\tif (this.options.handles['custom'] !== '') {\n\t\t\tthis._createCustomHandlers();\n\t\t}\n\t\tif (this.options.handles['poly'] !== '') {\n\t\t\tthis._createPolyHandlers();\n\t\t\tthis.options.rotation = false;\n\t\t}\n\t\tif (this.options.handles['anchor'] !== '') {\n\t\t\tthis._createAnchor();\n\t\t}\n\t\t// add bounds\n\t\tif (this.options.rotation) {\n\t\t\t//add rotation handler\n\t\t\tthis._createRotationHandlers();\n\t\t}\n\t},\n\n\n\t/**\n\t* Rotation marker and small connecting handle\n\t*/\n\t_createRotationHandlers: function() {\n\t\tvar map     = this._map;\n\t\tvar bottom   = map._docLayer._twipsToLatLng(this._getPoints()[7].point, this._map.getZoom());\n\t\tvar topPoint   = map._docLayer._twipsToLatLng(this._getPoints()[3].point, this._map.getZoom());\n\n\t\tvar handlerPosition = map.layerPointToLatLng(\n\t\t\tL.PathTransform.pointOnLine(\n\t\t\t\tmap.latLngToLayerPoint(bottom),\n\t\t\t\tmap.latLngToLayerPoint(topPoint),\n\t\t\t\tthis.options.handleLength)\n\t\t);\n\n\t\tthis._handleLine = new L.Polyline([topPoint, handlerPosition],\n\t\t\tthis.options.rotateHandleOptions).addTo(this._handlersGroup);\n\t\tvar RotateHandleClass = this.options.rotateHandleClass;\n\t\tthis._rotationMarker = new RotateHandleClass(handlerPosition,\n\t\t\tthis.options.handlerOptions)\n\t\t\t.addTo(this._handlersGroup)\n\t\t\t.on('mousedown', this._onRotateStart, this);\n\n\t\tthis._rotationOrigin = new L.LatLng(\n\t\t\t(topPoint.lat + bottom.lat) / 2,\n\t\t\t(topPoint.lng + bottom.lng) / 2\n\t\t);\n\n\t\tthis._handlers.push(this._rotationMarker);\n\t},\n\n\t/**\n\t* Poly Handles(Lines, Connectors..), id = 9\n\t*/\n\t_createPolyHandlers: function() {\n\t\tvar map = this._map;\n\t\tvar handleList = this.options.handles['poly']['9'];\n\t\tthis._handlers = [];\n\t\tthis._polyEdges = [];\n\t\tfor (var i = 0; i < handleList.length; ++i) {\n\t\t\tvar point = new L.Point(handleList[i].point.x,handleList[i].point.y);\n\t\t\tpoint = map._docLayer._convertCalcTileTwips(point);\n\t\t\thandleList[i].convertedPoint = point;\n\t\t\tthis._handlers.push(\n\t\t\t\tthis._createPolyHandler(handleList[i], i)\n\t\t\t\t\t.addTo(this._handlersGroup));\n\t\t}\n\t},\n\n\t_onPolyHandleDragStart: function(evt) {\n\t\tvar marker = evt.target;\n\t\tvar map = this._map;\n\n\t\tthis._handleDragged = false;\n\t\tthis._mapDraggingWasEnabled = false;\n\t\tif (map.dragging.enabled()) {\n\t\t\tmap.dragging.disable();\n\t\t\tthis._mapDraggingWasEnabled = true;\n\t\t}\n\n\t\tthis._activeMarker = marker;\n\t\tvar bottom = new L.LatLng(0,0);\n\t\tvar topPoint = new L.LatLng(0,0);\n\t\tvar latlngs = this._rect._latlngs;\n\t\tvar isEdge = this._polyEdges.indexOf(this._activeMarker.options.index);\n\t\tif (isEdge < 0) {\n\t\t\tthis._originMarker = marker;\n\t\t\tvar middleHandlelatLngs = marker._latlng;\n\t\t\tif (marker.options.cursor == 10) {\n\t\t\t\tbottom  = new L.LatLng(\n\t\t\t\t\t(latlngs[0].lat + latlngs[3].lat) / 2,\n\t\t\t\t\tmiddleHandlelatLngs.lng);\n\t\t\t\ttopPoint = new L.LatLng(\n\t\t\t\t\t(latlngs[1].lat + latlngs[2].lat) / 2,\n\t\t\t\t\tmiddleHandlelatLngs.lng);\n\t\t\t} else {\n\t\t\t\tbottom  = new L.LatLng(\n\t\t\t\t\tmiddleHandlelatLngs.lat,\n\t\t\t\t\t(latlngs[2].lng + latlngs[3].lng) / 2);\n\t\t\t\ttopPoint = new L.LatLng(\n\t\t\t\t\tmiddleHandlelatLngs.lat,\n\t\t\t\t\t(latlngs[0].lng + latlngs[1].lng) / 2);\n\t\t\t}\n\t\t\tthis._polyLine = new L.Polyline([topPoint, bottom],\n\t\t\t\tthis.options.polyLineOptions).addTo(this._handlersGroup);\n\t\t}\n\t\telse {\n\t\t\tvar originIndex = (this._activeMarker.options.index + 1) % this._polyEdges.length;\n\t\t\tthis._originMarker = this._handlers[originIndex];\n\t\t\tif (this.options.shapeType == 2) { // flat line\n\t\t\t\tthis._polyLine = new L.Polyline([\n\t\t\t\t\toriginIndex === 0 ? this._originMarker.getLatLng() : this._activeMarker.getLatLng(),\n\t\t\t\t\toriginIndex === 0 ? this._activeMarker.getLatLng() : this._originMarker.getLatLng()],\n\t\t\t\tthis.options.polyLineOptions).addTo(this._handlersGroup);\n\t\t\t}\n\t\t}\n\t\tif (this._polyLine)\n\t\t\tthis._map.addLayer(this._polyLine);\n\n\t\tthis._scaleOrigin  = this._originMarker.getLatLng();\n\n\t\tthis._initialMatrix = this._matrix.clone();\n\t\tthis._cachePoints();\n\n\t\tthis._activeMarker.addEventParent(this._map);\n\t\tthis._map\n\t\t\t.on('mousemove', this._polyLine ? this._onPolyHandleDrag : this._onScale,    this)\n\t\t\t.on('mouseup',   this._polyLine ? this._onPolyHandleDragEnd: this._onScaleEnd, this);\n\t\tthis._initialDist  = this._originMarker._point.distanceTo(this._activeMarker._point);\n\t\tthis._initialDistX = this._originMarker._point.x - this._activeMarker._point.x;\n\t\tthis._initialDistY = this._originMarker._point.y - this._activeMarker._point.y;\n\n\t\tthis._path\n\t\t\t.fire('transformstart', { layer: this._path })\n\t\t\t.fire('scalestart', {\n\t\t\t\tlayer: this._path,\n\t\t\t\tscale: L.point(1, 1),\n\t\t\t\tpos: this._activeMarker._latlng,\n\t\t\t\thandleId: this._activeMarker.options.id\n\t\t\t});\n\t},\n\n\t_onPolyHandleDrag: function(evt) {\n\t\tif (!this._rect) {\n\t\t\treturn;\n\t\t}\n\t\tvar evtLatLng = this._getEventLatLng(evt);\n\t\tvar direction = new L.LatLng(0,0);\n\t\tvar middleHandleCursor = 0;\n\t\tif (this._activeMarker.options.cursor == 8) {\n\t\t\tdirection.lat = evtLatLng.lat;\n\t\t\tdirection.lng = this._activeMarker.getLatLng().lng;\n\t\t\tmiddleHandleCursor = 8;\n\t\t} else if (this._activeMarker.options.cursor == 10) {\n\t\t\tdirection.lat = this._activeMarker.getLatLng().lat;\n\t\t\tdirection.lng = evtLatLng.lng;\n\t\t\tmiddleHandleCursor = 10;\n\t\t} else {\n\t\t\tdirection = evtLatLng;\n\t\t}\n\t\tif (this._polyLine) {\n\t\t\tvar lineTop = this._polyLine.getLatLngs()[0];\n\t\t\tvar lineBottom = this._polyLine.getLatLngs()[1];\n\t\t\tif (middleHandleCursor == 10) {\n\t\t\t\tlineTop.lng = direction.lng;\n\t\t\t\tlineBottom.lng = direction.lng;\n\t\t\t} else if (middleHandleCursor == 8) {\n\t\t\t\tlineTop.lat = direction.lat;\n\t\t\t\tlineBottom.lat = direction.lat;\n\t\t\t} else if (this.options.shapeType == 2) { // flat line\n\t\t\t\tvar handleIndex = this._activeMarker.options.index;\n\t\t\t\tif (handleIndex == 0) {\n\t\t\t\t\tlineTop = direction;\n\t\t\t\t} else {\n\t\t\t\t\tlineBottom = direction;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._polyLine.setLatLngs([lineTop, lineBottom]);\n\t\t}\n\t\tthis._activeMarker.setLatLng(direction);\n\t\tthis._activeMarker._updatePath();\n\t},\n\n\t_onPolyHandleDragEnd: function() {\n\t\tif (!this._rect || !this._scaleOrigin) {\n\t\t\treturn;\n\t\t}\n\t\tthis._activeMarker.removeEventParent(this._map);\n\t\tthis._map\n\t\t\t.off('mousemove', this._onPolyHandleDrag,    this)\n\t\t\t.off('mouseup',   this._onPolyHandleDragEnd, this);\n\n\t\tif (this.options.rotation) {\n\t\t\tthis._map.addLayer(this._handleLine);\n\t\t\tthis._map.addLayer(this._rotationMarker);\n\t\t}\n\n\t\tthis._apply();\n\t\tthis._path.fire('scaleend', {\n\t\t\tlayer: this._path,\n\t\t\tscale: this._scale.clone(),\n\t\t\tpos: this._activeMarker._latlng,\n\t\t\thandleId: this._activeMarker.options.id\n\t\t});\n\n\t\tthis._scaleOrigin = undefined;\n\t\tthis._originMarker = undefined;\n\t\tif (this._polyLine) {\n\t\t\tthis._map.removeLayer(this._polyLine);\n\t\t}\n\t},\n\n\t_createAnchor: function() {\n\t\tvar map = this._map;\n\t\t// 'anchor' contains number defined by SdrHdlKind in the core\n\t\t// https://opengrok.libreoffice.org/xref/core/include/svx/svdhdl.hxx?r=e3077168&fi=BitmapMarkerKind#52\n\t\tvar anchor = this.options.handles['anchor'];\n\n\t\tvar anchorKind = '16'; // Anchor\n\t\tif (!anchor[anchorKind])\n\t\t\tanchorKind = '21'; // Anchor_TR - RTL\n\t\tif (!anchor[anchorKind])\n\t\t\treturn;\n\n\t\tvar handle = anchor[anchorKind][0];\n\t\tvar point = new L.Point(handle.point.x, handle.point.y);\n\t\tpoint = map._docLayer._convertCalcTileTwips(point);\n\t\tvar anchorPos = map._docLayer._twipsToLatLng(point, this._map.getZoom());\n\t\tvar options = {\n\t\t\thandleId: handle.id,\n\t\t\tinitialPosition: anchorPos,\n\t\t\ticon: L.divIcon({\n\t\t\t\tclassName: 'anchor-marker',\n\t\t\t\ticonSize: [18, 18],\n\t\t\t\ticonAnchor: [0, 0]\n\t\t\t}),\n\t\t\tdraggable: false\n\t\t};\n\t\tthis._anchor = L.marker(anchorPos, options)\n\t\t\t.on('mousedown', this._onCustomHandleDragStart, this);\n\t\tmap.addLayer(this._anchor);\n\t},\n\n\t_createCustomHandlers: function() {\n\t\tvar map = this._map;\n\t\tvar handles = this.options.handles['custom']['22'];\n\t\tthis._customMarkers = [];\n\t\tfor (var i = 0; i < handles.length; ++i) {\n\t\t\tvar point = new L.Point(handles[i].point.x, handles[i].point.y);\n\t\t\tpoint = map._docLayer._convertCalcTileTwips(point);\n\t\t\tvar customHandlePosition = map._docLayer._twipsToLatLng(point, this._map.getZoom());\n\t\t\tvar options = {\n\t\t\t\thandleId: handles[i].id,\n\t\t\t\tinitialPosition: customHandlePosition\n\t\t\t};\n\t\t\tvar marker = new this.options.customHandleClass(customHandlePosition,\n\t\t\t\tL.Util.extend({}, this.options.handlerOptions, options))\n\t\t\t\t.addTo(this._handlersGroup)\n\t\t\t\t.on('mousedown', this._onCustomHandleDragStart, this);\n\t\t\tthis._customMarkers.push(marker);\n\t\t\tthis._handlers.push(marker);\n\t\t}\n\t},\n\n\t_onCustomHandleDragStart: function(evt) {\n\t\tvar map = this._map;\n\t\tthis._activeMarker = evt.target;\n\n\t\tthis._handleDragged = false;\n\t\tmap._docLayer._graphicMarker.isDragged = true;\n\t\tthis._mapDraggingWasEnabled = false;\n\t\tif (map.dragging.enabled()) {\n\t\t\tmap.dragging.disable();\n\t\t\tthis._mapDraggingWasEnabled = true;\n\t\t}\n\n\t\tif (this._anchor === this._activeMarker) {\n\t\t\tL.DomUtil.addClass(this._activeMarker._icon, 'anchor-dragging');\n\t\t}\n\n\t\tthis._activeMarker.addEventParent(this._map);\n\t\tthis._path._map\n\t\t\t.on('mousemove', this._onCustomHandleDrag,     this)\n\t\t\t.on('mouseup',   this._onCustomHandleDragEnd,  this);\n\t},\n\n\t/**\n\t* @param  {Event} evt\n\t*/\n\t_onCustomHandleDrag: function(evt) {\n\t\tif (!this._rect) {\n\t\t\treturn;\n\t\t}\n\t\tvar evtLatLng = this._getEventLatLng(evt);\n\t\tthis._handleDragged = true;\n\t\tthis._activeMarker.setLatLng(evtLatLng);\n\t},\n\n\t_onCustomHandleDragEnd: function() {\n\t\tif (!this._rect) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._anchor === this._activeMarker) {\n\t\t\tL.DomUtil.removeClass(this._activeMarker._icon, 'anchor-dragging');\n\t\t}\n\t\tvar map = this._map;\n\t\tmap._docLayer._graphicMarker.isDragged = false;\n\t\tthis._activeMarker.removeEventParent(this._map);\n\t\tthis._path._map\n\t\t\t.off('mousemove', this._onCustomHandleDrag,     this)\n\t\t\t.off('mouseup',   this._onCustomHandleDragEnd,  this);\n\n\t\tthis._path.fire('scaleend', {\n\t\t\tpos: this._activeMarker._latlng,\n\t\t\thandleId: this._activeMarker.options.handleId\n\t\t});\n\n\t\t// Set the initial position;\n\t\t// If the final look of the shape does not change we dont get selection update\n\t\t// In that case, marker may stay where it is placed. This fixes that.\n\t\tthis._activeMarker.setLatLng(this._activeMarker.options.initialPosition);\n\t\tthis._activeMarker = null;\n\t},\n\n\t/**\n\t* @return {L.LatLng}\n\t*/\n\t_getRotationOrigin: function() {\n\t\tvar latlngs = this._rect._latlngs;\n\t\tvar lb = latlngs[0];\n\t\tvar rt = latlngs[2];\n\n\t\treturn new L.LatLng(\n\t\t\t(lb.lat + rt.lat) / 2,\n\t\t\t(lb.lng + rt.lng) / 2\n\t\t);\n\t},\n\n\t/**\n\t * Return true if Calc app is in use in RTL mode.\n\t * @return {boolean}\n\t */\n\t isCalcRTL: function () {\n\t\treturn this._map._docLayer.isCalcRTL();\n\t},\n\n\t/**\n\t * Returns the layer coordinates of the event position.\n\t * @return {L.Point}\n\t */\n\t_getEventLayerPoint: function (evt) {\n\t\tif (!this.isCalcRTL()) {\n\t\t\treturn evt.layerPoint;\n\t\t}\n\n\t\tvar evtLatLng = this._map.negateLatLng(evt.latlng);\n\t\treturn this._map.latLngToLayerPoint(evtLatLng);\n\t},\n\n\t/**\n\t * Returns the latlng coordinates of the event position.\n\t * @return {L.LatLng}\n\t */\n\t_getEventLatLng: function (evt) {\n\t\tif (!this.isCalcRTL()) {\n\t\t\treturn evt.latlng;\n\t\t}\n\n\t\treturn this._map.negateLatLng(evt.latlng);\n\t},\n\n\t/**\n\t* Secure the rotation origin\n\t* @param  {Event} evt\n\t*/\n\t_onRotateStart: function(evt) {\n\t\tvar map = this._map;\n\t\tvar evtLayerPoint = this._getEventLayerPoint(evt);\n\n\t\tthis._handleDragged = false;\n\t\tthis._mapDraggingWasEnabled = false;\n\t\tif (map.dragging.enabled()) {\n\t\t\tmap.dragging.disable();\n\t\t\tthis._mapDraggingWasEnabled = true;\n\t\t}\n\t\tthis._originMarker     = null;\n\t\tthis._rotationOriginPt = map.latLngToLayerPoint(this._getRotationOrigin());\n\t\tthis._rotationStart    = evtLayerPoint;\n\t\tthis._initialMatrix    = this._matrix.clone();\n\n\t\tthis._angle = 0;\n\t\tthis._rotationMarker.addEventParent(this._map);\n\t\tthis._path._map\n\t\t\t.on('mousemove', this._onRotate,     this)\n\t\t\t.on('mouseup',   this._onRotateEnd, this);\n\n\t\tthis._cachePoints();\n\t\tthis._path\n\t\t\t.fire('transformstart',   { layer: this._path })\n\t\t\t.fire('rotatestart', { layer: this._path, rotation: 0 });\n\t},\n\n\n\t/**\n\t* @param  {Event} evt\n\t*/\n\t_onRotate: function(evt) {\n\t\tif (!this._rect || !this._rotationStart) {\n\t\t\treturn;\n\t\t}\n\t\tvar pos = this._getEventLayerPoint(evt);\n\t\tvar previous = this._rotationStart;\n\t\tvar origin   = this._rotationOriginPt;\n\n\t\tthis._handleDragged = true;\n\n\t\t// rotation step angle\n\t\tthis._angle = Math.atan2(pos.y - origin.y, pos.x - origin.x) -\n\t\t\tMath.atan2(previous.y - origin.y, previous.x - origin.x);\n\n\t\tthis._matrix = this._initialMatrix\n\t\t\t.clone()\n\t\t\t.rotate(this._angle, origin)\n\t\t\t.flip();\n\n\t\tthis._update();\n\t\tthis._path.fire('rotate', { layer: this._path, rotation: this._angle });\n\t},\n\n\n\t/**\n\t* @param  {Event} evt\n\t*/\n\t_onRotateEnd: function(evt) {\n\t\tif (!this._rect || !this._rotationStart) {\n\t\t\treturn;\n\t\t}\n\t\tvar pos = this._getEventLayerPoint(evt);\n\t\tvar previous = this._rotationStart;\n\t\tvar origin = this._rotationOriginPt;\n\t\tvar angle = Math.atan2(-(pos.y - origin.y), pos.x - origin.x) -\n\t\t\tMath.atan2(-(previous.y - origin.y), previous.x - origin.x);\n\n\t\tif (angle < 0) {\n\t\t\tangle += (2 * Math.PI);\n\t\t}\n\n\t\tthis._rotationMarker.removeEventParent(this._map);\n\t\tthis._path._map\n\t\t\t.off('mousemove', this._onRotate, this)\n\t\t\t.off('mouseup',   this._onRotateEnd, this);\n\n\t\tthis._apply();\n\t\tthis._path.fire('rotateend', { layer: this._path, rotation: angle });\n\n\t\tthis._rotationStart = undefined;\n\t},\n\n\n\t/**\n\t* @param  {Event} evt\n\t*/\n\t_onScaleStart: function(evt) {\n\t\tvar marker = evt.target;\n\t\tvar map = this._map;\n\n\t\tthis._handleDragged = false;\n\t\tthis._mapDraggingWasEnabled = false;\n\t\tif (map.dragging.enabled()) {\n\t\t\tmap.dragging.disable();\n\t\t\tthis._mapDraggingWasEnabled = true;\n\t\t}\n\n\t\tthis._activeMarker = marker;\n\n\t\tthis._originMarker = this._handlers[(marker.options.index + 4) % 8];\n\t\tthis._scaleOrigin  = this._originMarker.getLatLng();\n\n\t\tthis._initialMatrix = this._matrix.clone();\n\t\tthis._cachePoints();\n\n\t\tthis._activeMarker.addEventParent(this._map);\n\t\tthis._map\n\t\t\t.on('mousemove', this._onScale,    this)\n\t\t\t.on('mouseup',   this._onScaleEnd, this);\n\t\tthis._initialDist  = this._originMarker._point.distanceTo(this._activeMarker._point);\n\t\tthis._initialDistX = this._originMarker._point.x - this._activeMarker._point.x;\n\t\tthis._initialDistY = this._originMarker._point.y - this._activeMarker._point.y;\n\n\t\tvar index = this._activeMarker.options.index;\n\t\tthis._path\n\t\t\t.fire('transformstart', { layer: this._path })\n\t\t\t.fire('scalestart', {\n\t\t\t\tlayer: this._path,\n\t\t\t\tscale: L.point(1, 1),\n\t\t\t\tpos: this._activeMarker._latlng,\n\t\t\t\thandleId: this._getPoints()[index].id\n\t\t\t});\n\n\t\tif (this.options.rotation) {\n\t\t\tthis._map.removeLayer(this._handleLine);\n\t\t\tthis._map.removeLayer(this._rotationMarker);\n\t\t}\n\n\t\tif (this.options.handles['custom'] !== '') {\n\t\t\tfor (var i = 0; i < this._customMarkers.length; ++i)\n\t\t\t\tthis._map.removeLayer(this._customMarkers[i]);\n\t\t}\n\n\t\tif (this._anchor) {\n\t\t\tthis._map.removeLayer(this._anchor);\n\t\t}\n\n\t\t//this._handleLine = this._rotationMarker = null;\n\t},\n\n\n\t/**\n\t* @param  {Event} evt\n\t*/\n\t_onScale: function(evt) {\n\t\tif (!this._rect || !this._scaleOrigin) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar evtLayerPoint = this._getEventLayerPoint(evt);\n\t\tif (this.options.shapes.length > 0) {\n\t\t\tvar glueList = this._glueHandlers;\n\t\t\tfor (var i = 0; i < glueList.length; i++) {\n\t\t\t\tvar gluePoint = glueList[i];\n\t\t\t\tif (gluePoint._pxBounds.intersects(new L.Bounds(evtLayerPoint, evtLayerPoint))) {\n\t\t\t\t\tgluePoint.options.enter = true;\n\t\t\t\t\tthis._gluePointMouseEnter(gluePoint);\n\t\t\t\t} else if (gluePoint.options.enter) {\n\t\t\t\t\tthis._gluePointMouseLeave(gluePoint);\n\t\t\t\t\tgluePoint.options.enter = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar originPoint = this._originMarker._point;\n\t\tvar ratioX, ratioY;\n\n\t\tthis._handleDragged = true;\n\n\t\tvar isCornerMarker = (this._activeMarker.options.index % 2) == 0;\n\t\tvar mobileScaling = window.ThisIsAMobileApp && !this._polyEdges.length;\n\t\tvar scaleUniform = this.options.isRotated || (mobileScaling && isCornerMarker);\n\t\t// toggle with shift key when it does not matter whether it is scaled or not\n\t\tif (!scaleUniform && isCornerMarker)\n\t\t\tscaleUniform = this.options.uniformScaling ^ this._map._docLayer.shiftKeyPressed;\n\n\t\tif (scaleUniform) {\n\t\t\tratioX = originPoint.distanceTo(evtLayerPoint) / this._initialDist;\n\t\t\tratioY = ratioX;\n\t\t} else {\n\t\t\tratioX = this._initialDistX !== 0 ?\n\t\t\t\t(originPoint.x - evtLayerPoint.x) / this._initialDistX : 1;\n\t\t\tratioY = this._initialDistY !== 0 ?\n\t\t\t\t(originPoint.y - evtLayerPoint.y) / this._initialDistY : 1;\n\t\t}\n\n\t\tthis._scale = new L.Point(ratioX, ratioY);\n\n\t\t// update matrix\n\t\tthis._matrix = this._initialMatrix\n\t\t\t.clone()\n\t\t\t.scale(this._scale, originPoint);\n\n\t\tthis._update();\n\t\tthis._path.fire('scale', {\n\t\t\tlayer: this._path, scale: this._scale.clone() });\n\t},\n\n\n\t/**\n\t* Scaling complete\n\t* @param  {Event} evt\n\t*/\n\t_onScaleEnd: function(/*evt*/) {\n\t\tif (!this._rect || !this._scaleOrigin) {\n\t\t\treturn;\n\t\t}\n\t\tthis._activeMarker.removeEventParent(this._map);\n\t\tthis._map\n\t\t\t.off('mousemove', this._onScale,    this)\n\t\t\t.off('mouseup',   this._onScaleEnd, this);\n\n\t\tif (this.options.rotation) {\n\t\t\tthis._map.addLayer(this._handleLine);\n\t\t\tthis._map.addLayer(this._rotationMarker);\n\t\t}\n\n\t\tif (this.options.handles['custom'] !== '') {\n\t\t\tfor (var i = 0; i < this._customMarkers.length; ++i)\n\t\t\t\tthis._map.addLayer(this._customMarkers[i]);\n\t\t}\n\n\t\tif (this._anchor) {\n\t\t\tthis._map.addLayer(this._anchor);\n\t\t}\n\n\t\tvar _ordNum = null;\n\t\tif (this._activeGluePoint) {\n\t\t\t_ordNum = this._activeGluePoint.options.ordNum;\n\t\t}\n\t\tvar index = this._activeMarker.options.index;\n\t\tthis._apply();\n\t\tthis._path.fire('scaleend', {\n\t\t\tlayer: this._path,\n\t\t\tscale: this._scale.clone(),\n\t\t\tpos: this._activeMarker._latlng,\n\t\t\thandleId: this._activeMarker.options.id || this._getPoints()[index].id,\n\t\t\tordNum: _ordNum\n\t\t});\n\n\t\tthis._scaleOrigin = undefined;\n\t\tthis._originMarker = undefined;\n\t},\n\n\n\t/**\n\t* Cache current handlers positions\n\t*/\n\t_cachePoints: function() {\n\t\tthis._handlersGroup.eachLayer(function(layer) {\n\t\t\tlayer.bringToFront();\n\t\t});\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\n\t\t\tvar handler = this._handlers[i];\n\t\t\thandler._initialPoint = handler._point.clone();\n\t\t}\n\t},\n\n\n\t/**\n\t* Bounding polygon\n\t* @return {L.Polygon}\n\t*/\n\t_getBoundingPolygon: function() {\n\t\treturn new L.Rectangle(\n\t\t\tthis._path.getBounds(), this.options.boundsOptions);\n\t},\n\n\n\t/**\n\t* Create corner marker\n\t* @param  {L.LatLng} latlng\n\t* @param  {Number}   type one of L.Handler.PathTransform.HandlerTypes\n\t* @param  {Number}   index\n\t* @param  {Function} event mousedown function\n\t* @return {L.Handler.PathTransform.Handle}\n\t*/\n\t_createHandler: function(latlng, type, index, event) {\n\t\tvar HandleClass = this.options.handleClass;\n\t\tvar options = {\n\t\t\tclassName: 'leaflet-drag-transform-marker drag-marker--' +\n\t\t\tindex + ' drag-marker--' + type,\n\t\t\tindex:     index,\n\t\t\ttype:      type,\n\t\t};\n\t\tif (this.options.scaleSouthAndEastOnly && index < 5) {\n\t\t\toptions.opacity = 0;\n\t\t\toptions.fill = false;\n\t\t\toptions.interactive = false;\n\t\t}\n\t\tvar marker = new HandleClass(latlng,\n\t\t\tL.Util.extend({}, this.options.handlerOptions, options)\n\t\t);\n\n\t\tmarker.on('mousedown', event, this);\n\t\treturn marker;\n\t},\n\n\t_createPolyHandler: function(handle, index) {\n\t\tvar HandleClass = this.options.polyHandleClass;\n\t\tvar options = {\n\t\t\tclassName: 'leaflet-drag-transform-marker',\n\t\t\tindex:     index,\n\t\t\tcursor:    handle.pointer,\n\t\t\tid:        handle.id,\n\t\t\tkind:      handle.kind\n\t\t};\n\t\tif (options.cursor != 10 && options.cursor != 8) {\n\t\t\tthis._polyEdges.push(index);\n\t\t}\n\t\tvar marker = new HandleClass(this._map._docLayer._twipsToLatLng(handle.convertedPoint, this._map.getZoom()),\n\t\t\tL.Util.extend({}, this.options.handlerOptions, options)\n\t\t);\n\n\t\tmarker.on('mousedown', this._onPolyHandleDragStart, this);\n\t\treturn marker;\n\t},\n\n\n\t/**\n\t* Hide(not remove) the handlers layer\n\t*/\n\t_hideHandlers: function() {\n\t\tif (this._handlersGroup)\n\t\t\tthis._map.removeLayer(this._handlersGroup);\n\t\tif (this._anchor) {\n\t\t\tthis._map.removeLayer(this._anchor);\n\t\t}\n\t\tthis._handlersVisible = false;\n\t},\n\n\t_showHandlers: function() {\n\t\tthis._map.addLayer(this._handlersGroup);\n\t\tthis._updateHandlers();\n\t\tthis._handlersVisible = true;\n\t},\n\n\t/**\n\t* Hide handlers and rectangle\n\t*/\n\t_onDragStart: function() {\n\t\tthis._hideHandlers();\n\t\tthis._rect.options.opacity = 1;\n\t\tthis._map.addLayer(this._rect);\n\t},\n\n\t_onDrag: function(evt) {\n\t\tvar rect = this._rect;\n\t\tvar matrix = (evt.layer ? evt.layer : this._path).dragging._matrix.slice();\n\n\t\tthis._rect._transform(matrix);\n\t\trect._updatePath();\n\t\trect._project();\n\t},\n\n\n\t/**\n\t* Drag rectangle, re-create handlers\n\t*/\n\t_onDragEnd: function(evt) {\n\t\tvar rect = this._rect;\n\t\tvar matrix = (evt.layer ? evt.layer : this._path).dragging._matrix.slice();\n\n\t\tif (!rect.dragging) {\n\t\t\trect.dragging = new L.Handler.PathDrag(rect);\n\t\t}\n\t\trect.dragging.enable();\n\t\tthis._map.addLayer(rect);\n\t\trect.dragging._transformPoints(matrix);\n\t\trect._updatePath();\n\t\trect._project();\n\t\trect.dragging.disable();\n\n\t\tthis._showHandlers();\n\n\t\tthis._path.fire('transformed', {\n\t\t\tscale: L.point(1, 1),\n\t\t\trotation: 0,\n\t\t\tmatrix: L.matrix.apply(undefined, matrix),\n\t\t\ttranslate: L.point(matrix[4], matrix[5]),\n\t\t\tlayer: this._path\n\t\t});\n\t}\n});\n\nL.SVGGroup.addInitHook(function() {\n\tif (this.options.transform) {\n\t\tthis.transform = new L.Handler.PathTransform(this, this.options.transform);\n\t}\n});\n"]}
{"version":3,"file":"DivOverlay.js","sourceRoot":"","sources":["../../../../../../../../../browser/src/layer/marker/DivOverlay.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.DivOverlay\n */\n\nL.DivOverlay = L.Layer.extend({\n\n\tinitialize: function (latLngBounds, options) {\n\t\tthis._latLngBounds = L.latLngBounds(latLngBounds);\n\t\tL.setOptions(this, options);\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\t\tif (!this._container) {\n\t\t\tthis._initLayout();\n\t\t}\n\t\tmap._panes.overlayPane.appendChild(this._container);\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.removeLayer(this._annotation);\n\t\tmap._panes.overlayPane.removeChild(this._container);\n\t},\n\n\tsetLatLngBounds: function (latLngBounds) {\n\t\tthis._latLngBounds = L.latLngBounds(latLngBounds);\n\t\tthis.update();\n\t},\n\n\tupdate: function () {\n\t\tif (this._container && this._map) {\n\t\t\tvar topLeft = this._map.latLngToLayerPoint(this._latLngBounds.getNorthWest());\n\t\t\tvar size = this._map.latLngToLayerPoint(this._latLngBounds.getSouthEast()).subtract(topLeft);\n\t\t\tL.DomUtil.setPosition(this._container, topLeft);\n\t\t\tthis._container.style.width = size.x + 'px';\n\t\t\tthis._container.style.height = size.y + 'px';\n\t\t}\n\t\tif (this._annotation) {\n\t\t\tthis._annotation.setLatLng(this._latLngBounds.getNorthEast());\n\t\t}\n\t},\n\n\topenAnnotation: function () {\n\t\tif (this._map && this._annotation && !this._map.hasLayer(this._annotation) &&\n\t\t    !this._annotation.isEdit()) {\n\t\t\tthis._annotation.setLatLng(this._latLngBounds.getNorthEast());\n\t\t\tthis._map.addLayer(this._annotation);\n\t\t\tthis._annotation.show();\n\t\t}\n\t},\n\n\teditAnnotation: function () {\n\t\tif (this._map && this._annotation) {\n\t\t\tthis._annotation.setLatLng(this._latLngBounds.getNorthEast());\n\t\t\tthis._map.addLayer(this._annotation);\n\t\t\tthis._annotation.edit();\n\t\t\tthis._annotation.focus();\n\t\t}\n\t},\n\n\tclosePopup: function () {\n\t\tif (this._map && this._annotation) {\n\t\t\tthis._annotation.show();\n\t\t\tthis._map.removeLayer(this._annotation);\n\t\t}\n\t},\n\n\tcloseAnnotation: function (e) {\n\t\tif (this._map && this._annotation && this._map.hasLayer(this._annotation) &&\n\t\t    !this._annotation.isEdit() &&\n\t\t    !this._annotation.getBounds().contains(e.layerPoint)) {\n\t\t\tthis._map.removeLayer(this._annotation);\n\t\t}\n\t},\n\n\t_onMouseLeave: function (e) {\n\t\tif (this._map && this._annotation && this._map.hasLayer(this._annotation) &&\n\t\t    !this._annotation.isEdit() &&\n\t\t    !this._latLngBounds.contains(e.latlng)) {\n\t\t\tthis._map.removeLayer(this._annotation);\n\t\t}\n\t},\n\n\tbindAnnotation: function (annotation) {\n\t\tthis._annotation = annotation;\n\t\tif (!this._handlersAdded) {\n\t\t\tthis.on('mouseover', this.openAnnotation, this);\n\t\t\tthis.on('mouseout', this.closeAnnotation, this);\n\t\t\tthis._annotation.on('AnnotationMouseLeave', this._onMouseLeave, this);\n\t\t\tthis._handlersAdded = true;\n\t\t}\n\t\treturn this;\n\t},\n\n\t_initLayout: function () {\n\t\tthis._container = L.DomUtil.create('div', 'cool-div-layer');\n\t\tL.DomEvent.on(this._container, 'mouseover', this._fireMouseEvents, this);\n\t\tL.DomEvent.on(this._container, 'mouseout', this._fireMouseEvents, this);\n\t\tL.DomUtil.setOpacity(this._container, this.options.opacity);\n\t\tthis.update();\n\t},\n\n\t_fireMouseEvents: function (e) {\n\t\tvar containerPoint = this._map.mouseEventToContainerPoint(e),\n\t\t    layerPoint = this._map.containerPointToLayerPoint(containerPoint),\n\t\t    latlng = this._map.layerPointToLatLng(layerPoint);\n\n\t\tthis.fire(e.type, {\n\t\t\tlatlng: latlng,\n\t\t\tlayerPoint: layerPoint,\n\t\t\tcontainerPoint: containerPoint,\n\t\t\toriginalEvent: e\n\t\t});\n\t}\n});\n\nL.divOverlay = function (latLngBounds, options) {\n\treturn new L.DivOverlay(latLngBounds, options);\n};\n\n"]}
{"version":3,"file":"AutoFillMarkerSection.js","sourceRoot":"","sources":["../../../../../../../../../browser/src/layer/tile/AutoFillMarkerSection.ts"],"names":[],"mappings":"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","sourcesContent":["/* See CanvasSectionContainer.ts for explanations. */\n\ndeclare var L: any;\ndeclare var app: any;\n\napp.definitions.AutoFillMarkerSection =\nclass AutoFillMarkerSection {\n\tcontext: CanvasRenderingContext2D = null;\n\tmyTopLeft: Array<number> = null;\n\tdocumentTopLeft: Array<number> = null;\n\tcontainerObject: any = null;\n\tdpiScale: number = null;\n\tname: string = L.CSections.AutoFillMarker.name;\n\tbackgroundColor: string = 'black';\n\tborderColor: string = null;\n\tboundToSection: string = null;\n\tanchor: Array<any> = new Array(0);\n\tdocumentObject: boolean = true;\n\tposition: Array<number> = new Array(0);\n\tsize: Array<number> = new Array(0);\n\texpand: Array<string> = new Array(0);\n\tisLocated: boolean = false;\n\tshowSection: boolean = true;\n\tprocessingOrder: number = L.CSections.AutoFillMarker.processingOrder;\n\tdrawingOrder: number = L.CSections.AutoFillMarker.drawingOrder;\n\tzIndex: number = L.CSections.AutoFillMarker.zIndex;\n\tinteractable: boolean = true;\n\tsectionProperties: any = {};\n\tstopPropagating: () => void; // Implemented by section container.\n\tsetPosition: (x: number, y: number) => void; // Implemented by section container. Document objects only.\n\tmap: any;\n\tcursorBorderWidth: number = 2;\n\tselectionBorderWidth: number = 1;\n\n\tisCalcRTL: () => boolean;\n\n\tconstructor () {\n\t\tthis.map = L.Map.THIS;\n\n\t\tthis.sectionProperties.docLayer = this.map._docLayer;\n\t\tthis.sectionProperties.selectedAreaPoint = null;\n\t\tthis.sectionProperties.cellCursorPoint = null;\n\n\t\tthis.sectionProperties.draggingStarted = false;\n\t\tthis.sectionProperties.dragStartPosition = null;\n\n\t\tthis.sectionProperties.mapPane = (<HTMLElement>(document.querySelectorAll('.leaflet-map-pane')[0]));\n\n\t\tvar cursorStyle = getComputedStyle(this.sectionProperties.docLayer._cursorDataDiv);\n\t\tvar selectionStyle = getComputedStyle(this.sectionProperties.docLayer._selectionsDataDiv);\n\t\tvar cursorColor = cursorStyle.getPropertyValue('border-top-color');\n\t\tthis.backgroundColor = cursorColor ? cursorColor : this.backgroundColor;\n\t\tthis.cursorBorderWidth = Math.round(window.devicePixelRatio * parseInt(cursorStyle.getPropertyValue('border-top-width')));\n\t\tthis.selectionBorderWidth = Math.round(window.devicePixelRatio * parseInt(selectionStyle.getPropertyValue('border-top-width')));\n\t}\n\n\tpublic onInitialize () {\n\t\tif ((<any>window).mode.isDesktop()) {\n\t\t\tthis.size = [Math.round(8 * app.dpiScale), Math.round(8 * app.dpiScale)];\n\t\t}\n\t\telse {\n\t\t\tthis.size = [Math.round(16 * app.dpiScale), Math.round(16 * app.dpiScale)];\n\t\t}\n\t}\n\n\tpublic onResize () {\n\t\treturn;\n\t}\n\n\tprivate setMarkerPosition () {\n\t\tvar center: number = 0;\n\t\tif (!(<any>window).mode.isDesktop() && this.map._docLayer._cellCursorPixels) {\n\t\t\tcenter = this.map._docLayer._cellCursorPixels.getWidth() * 0.5;\n\t\t}\n\n\t\tvar position: Array<number> = [0, 0];\n\t\tthis.showSection = true;\n\n\t\tif (this.sectionProperties.selectedAreaPoint !== null)\n\t\t\tposition = [this.sectionProperties.selectedAreaPoint[0] - center, this.sectionProperties.selectedAreaPoint[1]];\n\t\telse if (this.sectionProperties.cellCursorPoint !== null)\n\t\t\tposition = [this.sectionProperties.cellCursorPoint[0] - center, this.sectionProperties.cellCursorPoint[1]];\n\t\telse\n\t\t\tthis.showSection = false;\n\n\t\t// At this point, position is calculated without taking splitter into account.\n\t\tvar splitPosCore = {x: 0, y: 0};\n\t\tif (this.map._docLayer.getSplitPanesContext())\n\t\t\tsplitPosCore = this.map._docLayer.getSplitPanesContext().getSplitPos();\n\n\t\tsplitPosCore.x *= app.dpiScale;\n\t\tsplitPosCore.y *= app.dpiScale;\n\n\t\tif (position[0] <= splitPosCore.x)\n\t\t\tposition[0] += this.documentTopLeft[0];\n\t\telse if (position[0] - this.documentTopLeft[0] <= splitPosCore.x)\n\t\t\tthis.showSection = false;\n\n\t\tif (position[1] <= splitPosCore.y)\n\t\t\tposition[1] += this.documentTopLeft[1];\n\t\telse if (position[1] - this.documentTopLeft[1] <= splitPosCore.y)\n\t\t\tthis.showSection = false;\n\n\t\tthis.setPosition(position[0], position[1]);\n\t}\n\n\t// Give bottom right position of selected area, in core pixels. Call with null parameter when auto fill marker is not visible.\n\tpublic calculatePositionViaCellSelection (point: Array<number>) {\n\t\tif (point === null) {\n\t\t\tthis.sectionProperties.selectedAreaPoint = null;\n\t\t}\n\t\telse {\n\t\t\tvar translation = (<any>window).mode.isDesktop() ?\n\t\t\t\t[this.size[0], this.size[1]] :\n\t\t\t\t[Math.floor(this.size[0] * 0.5), Math.floor(this.size[1] * 0.5)];\n\t\t\tthis.sectionProperties.selectedAreaPoint = [point[0] - translation[0], point[1] - translation[1]];\n\t\t}\n\t\tthis.setMarkerPosition();\n\t}\n\n\t// Give bottom right position of cell cursor, in core pixels. Call with null parameter when auto fill marker is not visible.\n\tpublic calculatePositionViaCellCursor (point: Array<number>) {\n\t\tif (point === null) {\n\t\t\tthis.sectionProperties.cellCursorPoint = null;\n\t\t}\n\t\telse {\n\t\t\tvar translation = (<any>window).mode.isDesktop() ?\n\t\t\t\t[this.size[0], this.size[1]] :\n\t\t\t\t[Math.floor(this.size[0] * 0.5), Math.floor(this.size[1] * 0.5)];\n\t\t\tthis.sectionProperties.cellCursorPoint = [point[0] - translation[0], point[1] - translation[1]];\n\t\t}\n\t\tthis.setMarkerPosition();\n\t}\n\n\t// This is for enhancing contrast of the marker with the background\n\t// similar to what we have for cell cursors.\n\tprivate drawWhiteOuterBorders () {\n\t\tthis.context.strokeStyle = 'white';\n\t\tthis.context.lineCap = 'square';\n\t\tthis.context.lineWidth = 1;\n\n\t\tvar desktop: boolean = (<any>window).mode.isDesktop();\n\t\tvar translation = desktop ?\n\t\t\t[this.size[0], this.size[1]] :\n\t\t\t[Math.floor(this.size[0] * 0.5), Math.floor(this.size[1] * 0.5)];\n\t\tconst adjustForRTL = this.isCalcRTL();\n\t\tconst transformX = (xcoord: number) => {\n\t\t\treturn adjustForRTL ? this.size[0] - xcoord : xcoord;\n\t\t};\n\n\t\tthis.context.beginPath();\n\t\tthis.context.moveTo(transformX(-0.5), -0.5);\n\t\tvar borderWidth = this.sectionProperties.selectedAreaPoint ? this.selectionBorderWidth : this.cursorBorderWidth;\n\t\tthis.context.lineTo(transformX(this.size[0] - 0.5 - (desktop ? borderWidth : 0)), -0.5);\n\t\tthis.context.stroke();\n\n\t\tif (!desktop) {\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.moveTo(transformX(this.size[0] - 0.5 - (desktop ? borderWidth : 0)), -0.5);\n\t\t\tthis.context.lineTo(transformX(this.size[0] - 0.5 - (desktop ? borderWidth : 0)), translation[1] - 0.5 - borderWidth);\n\t\t\tthis.context.stroke();\n\t\t}\n\n\t\tthis.context.beginPath();\n\t\tthis.context.moveTo(transformX(-0.5), -0.5);\n\t\tthis.context.lineTo(transformX(-0.5), translation[1] - 0.5 - borderWidth);\n\t\tthis.context.stroke();\n\t}\n\n\tpublic onDraw () {\n\t\tthis.drawWhiteOuterBorders();\n\t}\n\n\tpublic onMouseMove (point: Array<number>, dragDistance: Array<number>, e: MouseEvent) {\n\t\tif (dragDistance === null || !this.sectionProperties.docLayer._cellAutoFillAreaPixels)\n\t\t\treturn; // No dragging or no event handling or auto fill marker is not visible.\n\n\t\tvar pos: any;\n\n\t\tif (!this.sectionProperties.draggingStarted) { // Is it first move?\n\t\t\tthis.sectionProperties.draggingStarted = true;\n\t\t\tthis.sectionProperties.dragStartPosition = this.sectionProperties.docLayer._cellAutoFillAreaPixels.getCenter();\n\t\t\tpos = new L.Point(this.sectionProperties.dragStartPosition[0], this.sectionProperties.dragStartPosition[1]);\n\t\t\tpos = this.sectionProperties.docLayer._corePixelsToTwips(pos);\n\t\t\tthis.sectionProperties.docLayer._postMouseEvent('buttondown', pos.x, pos.y, 1, 1, 0);\n\t\t}\n\n\t\tpoint[0] = this.sectionProperties.dragStartPosition[0] + dragDistance[0];\n\t\tpoint[1] = this.sectionProperties.dragStartPosition[1] + dragDistance[1];\n\t\tpos = this.sectionProperties.docLayer._corePixelsToTwips(new L.Point(point[0], point[1]));\n\n\t\tthis.sectionProperties.docLayer._postMouseEvent('move', pos.x, pos.y, 1, 1, 0);\n\n\t\tthis.map.scrollingIsHandled = true;\n\t\tthis.stopPropagating(); // Stop propagating to sections.\n\t\te.stopPropagation(); // Stop native event.\n\t}\n\n\tpublic onMouseUp (point: Array<number>, e: MouseEvent) {\n\t\tif (this.sectionProperties.draggingStarted) {\n\t\t\tthis.sectionProperties.draggingStarted = false;\n\t\t\tpoint[0] += this.myTopLeft[0] + this.size[0] * 0.5;\n\t\t\tpoint[1] += this.myTopLeft[1] + this.size[1] * 0.5;\n\t\t\tvar pos = this.sectionProperties.docLayer._corePixelsToTwips(new L.Point(point[0], point[1]));\n\t\t\tthis.sectionProperties.docLayer._postMouseEvent('buttonup', pos.x, pos.y, 1, 1, 0);\n\t\t}\n\n\t\tthis.map.scrollingIsHandled = false;\n\t\tthis.stopPropagating();\n\t\te.stopPropagation();\n\t\t(<any>window).IgnorePanning = false;\n\t}\n\n\tpublic onMouseDown (point: Array<number>, e: MouseEvent) {\n\t\t// Just to be safe. We don't need this, but it makes no harm.\n\t\tthis.stopPropagating();\n\t\te.stopPropagation();\n\t\t(<any>window).IgnorePanning = true; // We'll keep this until we have consistent sections and remove map element.\n\t}\n\n\tpublic onMouseEnter () {\n\t\tthis.sectionProperties.mapPane.style.cursor = 'crosshair';\n\t}\n\n\tpublic onMouseLeave () {\n\t\tthis.sectionProperties.mapPane.style.cursor = 'default';\n\t}\n\n\tpublic onNewDocumentTopLeft () {\n\t\tthis.setMarkerPosition();\n\t}\n\n\tpublic onMouseWheel () { return; }\n\tpublic onClick () { return; }\n\tpublic onDoubleClick () { return; }\n\tpublic onContextMenu () { return; }\n\tpublic onLongPress () { return; }\n\tpublic onMultiTouchStart () { return; }\n\tpublic onMultiTouchMove () { return; }\n\tpublic onMultiTouchEnd () { return; }\n};\n"]}
{"version":3,"file":"Control.Tabs.js","sourceRoot":"","sources":["../../../../../../../../browser/src/control/Control.Tabs.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Control.Tabs is used to switch sheets in Calc\n */\n\n/* global $ vex _ _UNO Hammer */\nL.Control.Tabs = L.Control.extend({\n\tonAdd: function(map) {\n\t\tmap.on('updatepermission', this._onUpdatePermission, this);\n\t\tthis._initialized = false;\n\t},\n\n\t_onUpdatePermission: function(e) {\n\t\tif (this._map.getDocType() !== 'spreadsheet') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._initialized) {\n\t\t\tthis._initialize();\n\t\t}\n\t\tsetTimeout(function() {\n\t\t\t$('.spreadsheet-tab').contextMenu(e.perm === 'edit');\n\t\t}, 100);\n\n\t\tif (window.mode.isMobile()) {\n\t\t\tif (e.perm === 'edit') {\n\t\t\t\tdocument.getElementById('spreadsheet-toolbar').style.display = 'block';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocument.getElementById('spreadsheet-toolbar').style.display = 'none';\n\t\t\t}\n\t\t}\n\t},\n\n\t_initialize: function () {\n\t\tthis._initialized = true;\n\t\tthis._tabsInitialized = false;\n\t\tthis._spreadsheetTabs = {};\n\t\tthis._tabForContextMenu = 0;\n\t\tvar map = this._map;\n\t\tvar tableCell = document.getElementById('tb_spreadsheet-toolbar_right');\n\t\ttableCell.style.verticalAlign = 'middle';\n\t\tthis._tabsCont = L.DomUtil.create('div', 'spreadsheet-tabs-container', tableCell);\n\t\tvar that = this;\n\t\tfunction areTabsMultiple() {\n\t\t\tvar numItems = $('.spreadsheet-tab').length;\n\t\t\tif (numItems === 1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tthis._menuItem = {\n\t\t\t'insertsheetbefore': {name: _('Insert sheet before this'),\n\t\t\t\tcallback: (this._insertSheetBefore).bind(this)\n\t\t\t},\n\t\t\t'insertsheetafter': {name: _('Insert sheet after this'),\n\t\t\t\tcallback: (this._insertSheetAfter).bind(this)\n\t\t\t},\n\t\t\t'.uno:Remove': {\n\t\t\t\tname: _UNO('.uno:Remove', 'spreadsheet', true),\n\t\t\t\tcallback: (this._deleteSheet).bind(this),\n\t\t\t\tvisible: areTabsMultiple\n\t\t\t},\n\t\t\t'.uno:Name': {name: _UNO('.uno:RenameTable', 'spreadsheet', true),\n\t\t\t\tcallback: (this._renameSheet).bind(this)\n\t\t\t},\n\t\t\t'.uno:Show': {\n\t\t\t\tname: _UNO('.uno:Show', 'spreadsheet', true),\n\t\t\t\tcallback: (this._showSheet).bind(this),\n\t\t\t\tvisible: function() {\n\t\t\t\t\treturn that._map.hasAnyHiddenPart();\n\t\t\t\t}\n\t\t\t},\n\t\t\t'.uno:Hide': {\n\t\t\t\tname: _UNO('.uno:Hide', 'spreadsheet', true),\n\t\t\t\tcallback: (this._hideSheet).bind(this),\n\t\t\t\tvisible: areTabsMultiple\n\t\t\t},\n\t\t\t'movesheetleft': {\n\t\t\t\tname: _('Move Sheet Left'),\n\t\t\t\tcallback: (this._moveSheetLeft).bind(this),\n\t\t\t\tvisible: areTabsMultiple\n\t\t\t},\n\t\t\t'movesheetright': {\n\t\t\t\tname: _('Move Sheet Right'),\n\t\t\t\tcallback: (this._moveSheetRight).bind(this),\n\t\t\t\tvisible: areTabsMultiple\n\t\t\t},\n\t\t};\n\n\t\tif (!window.mode.isMobile()) {\n\n\t\t\t// no blacklisting available for this context menu so only add when needed\n\t\t\tthis._menuItem['.uno:Move'] = {\n\t\t\t\tname: _UNO('.uno:Move', 'spreadsheet', true),\n\t\t\t\tcallback: function() {this._map.sendUnoCommand('.uno:Move');}.bind(this),\n\t\t\t\tvisible: areTabsMultiple\n\t\t\t};\n\n\t\t\tthis._menuItem['.uno:CopyTab'] = {\n\t\t\t\tname: _('Copy Sheet...'),\n\t\t\t\tcallback: function() {this._map.sendUnoCommand('.uno:Move');}.bind(this),\n\t\t\t\tvisible: function() {\n\t\t\t\t\treturn !areTabsMultiple();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tL.installContextMenu({\n\t\t\t\tselector: '.spreadsheet-tab',\n\t\t\t\tclassName: 'cool-font',\n\t\t\t\titems: this._menuItem,\n\t\t\t\tzIndex: 1000\n\t\t\t});\n\t\t}\n\n\t\tmap.on('updateparts', this._updateDisabled, this);\n\t},\n\n\t_updateDisabled: function (e) {\n\t\tvar parts = e.parts;\n\t\tvar selectedPart = e.selectedPart;\n\t\tvar docType = e.docType;\n\n\t\tif (docType === 'text') {\n\t\t\treturn;\n\t\t}\n\t\tif (docType === 'spreadsheet') {\n\t\t\tif (!this._tabsInitialized) {\n\t\t\t\t// make room for the preview\n\t\t\t\tvar docContainer = this._map.options.documentContainer;\n\t\t\t\tL.DomUtil.addClass(docContainer, 'spreadsheet-document');\n\t\t\t\tthis._tabsInitialized = true;\n\t\t\t}\n\n\t\t\t// Save scroll position\n\t\t\tvar horizScrollPos = 0;\n\t\t\tvar scrollDiv = L.DomUtil.get('spreadsheet-tab-scroll');\n\t\t\tif (scrollDiv) {\n\t\t\t\thorizScrollPos = scrollDiv.scrollLeft;\n\t\t\t}\n\n\t\t\tif ('partNames' in e) {\n\t\t\t\twhile (this._tabsCont.firstChild) {\n\t\t\t\t\tthis._tabsCont.removeChild(this._tabsCont.firstChild);\n\t\t\t\t}\n\t\t\t\tvar ssTabScroll = L.DomUtil.create('div', 'spreadsheet-tab-scroll', this._tabsCont);\n\t\t\t\tssTabScroll.id = 'spreadsheet-tab-scroll';\n\t\t\t\tif (!window.mode.isMobile())\n\t\t\t\t\tssTabScroll.style.overflow = 'hidden';\n\n\t\t\t\tthis._tabsCont.style.display = 'grid';\n\n\t\t\t\tvar menuItemMobile = {};\n\t\t\t\tObject.assign(menuItemMobile,\n\t\t\t\t\t{\n\t\t\t\t\t\t'insertsheetbefore' : this._menuItem['insertsheetbefore'],\n\t\t\t\t\t\t'insertsheetafter'  :   this._menuItem['insertsheetafter'],\n\t\t\t\t\t\t'.uno:Name' : this._menuItem['.uno:Name'],\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tif (this._map.hasAnyHiddenPart()) {\n\t\t\t\t\tObject.assign(menuItemMobile, {\n\t\t\t\t\t\t'.uno:Show' : this._menuItem['.uno:Show'],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (this._map.getNumberOfVisibleParts() !== 1) {\n\t\t\t\t\tObject.assign(menuItemMobile,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'.uno:Remove': this._menuItem['.uno:Remove'],\n\t\t\t\t\t\t\t'.uno:Hide': this._menuItem['.uno:Hide'],\n\t\t\t\t\t\t\t'movesheetleft': this._menuItem['movesheetleft'],\n\t\t\t\t\t\t\t'movesheetright': this._menuItem['movesheetright'],\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (window.mode.isMobile()) {\n\t\t\t\t\tvar menuData = L.Control.JSDialogBuilder.getMenuStructureForMobileWizard(menuItemMobile, true, '');\n\t\t\t\t}\n\n\t\t\t\tvar frame = L.DomUtil.create('div', '', ssTabScroll);\n\t\t\t\tframe.setAttribute('draggable', false);\n\t\t\t\tframe.setAttribute('id', 'first-tab-drop-site');\n\t\t\t\tthis._addDnDHandlers(frame);\n\n\t\t\t\tfor (var i = 0; i < parts; i++) {\n\t\t\t\t\tif (e.hiddenParts.indexOf(i) !== -1)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tvar id = 'spreadsheet-tab' + i;\n\t\t\t\t\tvar tab = L.DomUtil.create('button', 'spreadsheet-tab', ssTabScroll);\n\n\t\t\t\t\tif (window.mode.isMobile()) {\n\t\t\t\t\t\t(new Hammer(tab, {recognizers: [[Hammer.Press]]}))\n\t\t\t\t\t\t\t.on('press', function (j) {\n\t\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\t\tthis._tabForContextMenu = j;\n\t\t\t\t\t\t\t\t\tthis._setPart(e);\n\t\t\t\t\t\t\t\t\twindow.contextMenuWizard = true;\n\t\t\t\t\t\t\t\t\tif (!this._map.isPermissionReadOnly()) this._map.fire('mobilewizard', {data: menuData});\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}(i).bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tL.DomEvent.on(tab, 'dblclick', function(j) {\n\t\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\t\t// window.app.console.err('Double clicked ' + j);\n\t\t\t\t\t\t\t\tthis._tabForContextMenu = j;\n\t\t\t\t\t\t\t\tthis._renameSheet();\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}(i).bind(this));\n\t\t\t\t\t\tL.DomEvent.on(tab, 'contextmenu', function(j) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\tthis._tabForContextMenu = j;\n\t\t\t\t\t\t\t\tthis._setPart(e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}(i).bind(this));\n\t\t\t\t\t}\n\n\t\t\t\t\ttab.textContent = e.partNames[i];\n\t\t\t\t\ttab.id = id;\n\n\t\t\t\t\tL.DomEvent\n\t\t\t\t\t\t.on(tab, 'click', L.DomEvent.stopPropagation)\n\t\t\t\t\t\t.on(tab, 'click', L.DomEvent.stop)\n\t\t\t\t\t\t.on(tab, 'click', this._setPart, this)\n\t\t\t\t\t\t.on(tab, 'click', this._map.focus, this._map);\n\t\t\t\t\tthis._addDnDHandlers(tab);\n\t\t\t\t\tthis._spreadsheetTabs[id] = tab;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var key in this._spreadsheetTabs) {\n\t\t\t\tvar part =  parseInt(key.match(/\\d+/g)[0]);\n\t\t\t\tL.DomUtil.removeClass(this._spreadsheetTabs[key], 'spreadsheet-tab-selected');\n\t\t\t\tif (part === selectedPart) {\n\t\t\t\t\tL.DomUtil.addClass(this._spreadsheetTabs[key], 'spreadsheet-tab-selected');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Restore horizontal scroll position\n\t\t\tscrollDiv = L.DomUtil.get('spreadsheet-tab-scroll');\n\t\t\tif (scrollDiv) {\n\t\t\t\tif (this._map.insertPage && this._map.insertPage.scrollToEnd) {\n\t\t\t\t\tthis._map.insertPage.scrollToEnd = false;\n\t\t\t\t\tscrollDiv.scrollLeft = scrollDiv.scrollWidth;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tscrollDiv.scrollLeft = horizScrollPos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_addDnDHandlers: function(element) {\n\t\tif (!this._map.isPermissionReadOnly()) {\n\t\t\telement.setAttribute('draggable', true);\n\t\t\telement.addEventListener('dragstart', this._handleDragStart.bind(this), false);\n\t\t\telement.addEventListener('dragenter', this._handleDragEnter, false);\n\t\t\telement.addEventListener('dragover', this._handleDragOver, false);\n\t\t\telement.addEventListener('dragleave', this._handleDragLeave, false);\n\t\t\telement.addEventListener('drop', this._handleDrop.bind(this), false);\n\t\t\telement.addEventListener('dragend', this._handleDragEnd, false);\n\t\t}\n\t},\n\n\t_setPart: function (e) {\n\t\tvar part =  e.target.id.match(/\\d+/g)[0];\n\t\tif (part !== null) {\n\t\t\tthis._map._docLayer._clearReferences();\n\t\t\tthis._map.setPart(parseInt(part), /*external:*/ false, /*calledFromSetPartHandler:*/ true);\n\t\t}\n\t},\n\n\t//selected sheet is moved to new index\n\t_moveSheet: function (newIndex) {\n\t\tthis._map.sendUnoCommand('.uno:Move?Copy:bool=false&UseCurrentDocument:bool=true&Index=' + newIndex);\n\t},\n\n\t_moveSheetLeft: function () {\n\t\tvar targetIndex = this._map._docLayer._partNames.indexOf(this._map._docLayer._partNames[this._map._docLayer._selectedPart]);\n\t\t//core handles sheet with 1 base indexing\n\t\t// 0 index means last sheet\n\t\tif (targetIndex <= 0) return;\n\t\tthis._moveSheet(targetIndex);\n\t},\n\n\t_moveSheetRight: function () {\n\t\tvar targetIndex = this._map._docLayer._partNames.indexOf(this._map._docLayer._partNames[this._map._docLayer._selectedPart]) + 3;\n\t\tthis._moveSheet(targetIndex);\n\t},\n\n\t_insertSheetBefore: function() {\n\t\tthis._map.insertPage(this._tabForContextMenu);\n\t},\n\n\t_insertSheetAfter: function() {\n\t\tthis._map.insertPage(this._tabForContextMenu + 1);\n\t},\n\n\t_deleteSheet: function() {\n\t\tvar map = this._map;\n\t\tvar nPos = this._tabForContextMenu;\n\t\tvex.dialog.confirm({\n\t\t\tmessage: _('Are you sure you want to delete sheet, %sheet%?').replace('%sheet%', $('#spreadsheet-tab' + this._tabForContextMenu).text()),\n\t\t\tbuttons: [\n\t\t\t\t$.extend({}, vex.dialog.buttons.YES, { text: _('OK') }),\n\t\t\t\t$.extend({}, vex.dialog.buttons.NO, { text: _('Cancel') })\n\t\t\t],\n\t\t\tcallback: function(data) {\n\t\t\t\tif (data) {\n\t\t\t\t\tmap.deletePage(nPos);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t_renameSheet: function() {\n\t\tvar map = this._map;\n\t\tvar nPos = this._tabForContextMenu;\n\t\tvex.dialog.open({\n\t\t\tcontentClassName: 'vex-has-inputs',\n\t\t\tmessage: _('Enter new sheet name'),\n\t\t\tbuttons: [\n\t\t\t\t$.extend({}, vex.dialog.buttons.YES, { text: _('OK') }),\n\t\t\t\t$.extend({}, vex.dialog.buttons.NO, { text: _('Cancel') })\n\t\t\t],\n\t\t\tinput: '<input name=\"sheetname\" id=\"rename-calc-sheet-modal\" type=\"text\" value=\"' + $('#spreadsheet-tab' + this._tabForContextMenu).text() + '\" required />',\n\t\t\tafterOpen: function() { document.getElementById('rename-calc-sheet-modal').select(); },\n\t\t\tcallback: function(data) {\n\t\t\t\tmap.renamePage(data.sheetname, nPos);\n\t\t\t}\n\t\t});\n\t},\n\n\t_showSheet: function() {\n\t\tthis._map.showPage();\n\t},\n\n\t_hideSheet: function() {\n\t\tthis._map.hidePage(this._tabForContextMenu);\n\t},\n\n\t_handleDragStart: function(e) {\n\t\tthis._setPart(e);\n\t\te.dataTransfer.effectAllowed = 'move';\n\t},\n\n\t_handleDragEnter: function() {\n\n\t},\n\n\t_handleDragOver: function(e) {\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\t// By default we move when dragging, but can\n\t\t// support duplication with ctrl in the future.\n\t\te.dataTransfer.dropEffect = 'move';\n\n\t\tthis.classList.add('tab-dropsite');\n\t\treturn false;\n\t},\n\n\t_handleDragLeave: function() {\n\t\tthis.classList.remove('tab-dropsite');\n\t},\n\n\t_handleDrop: function(e) {\n\t\tif (e.stopPropagation) {\n\t\t\te.stopPropagation();\n\t\t}\n\t\te.target.classList.remove('tab-dropsite');\n\t\tvar targetIndex = this._map._docLayer._partNames.indexOf(e.target.innerText);\n\n\t\tthis._moveSheet(targetIndex+2);\n\t},\n\n\t_handleDragEnd: function() {\n\t\tthis.classList.remove('tab-dropsite');\n\t}\n});\n\nL.control.tabs = function (options) {\n\treturn new L.Control.Tabs(options);\n};\n"]}
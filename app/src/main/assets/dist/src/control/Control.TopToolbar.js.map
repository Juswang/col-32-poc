{"version":3,"file":"Control.TopToolbar.js","sourceRoot":"","sources":["../../../../../../../../browser/src/control/Control.TopToolbar.js"],"names":[],"mappings":"AAAA,gCAAgC;AAChC;;GAEG;AAEH,kCAAkC;AAClC,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC;IACvC,OAAO,EAAE;QACR,iBAAiB,EAAE,IAAI;QACvB,gBAAgB,EAAE,IAAI;KACtB;IAED,KAAK,EAAE,UAAU,GAAG;QACnB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,MAAM,EAAE,CAAC;QAEd,GAAG,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAClD,GAAG,CAAC,EAAE,CAAC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAC1D,GAAG,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC5C,GAAG,CAAC,EAAE,CAAC,qBAAqB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;QAChE,GAAG,CAAC,EAAE,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAEpD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;YAC5B,GAAG,CAAC,EAAE,CAAC,4BAA4B,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;SACrE;QAED,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;YAChB,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;gBAC1C,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC9B,IAAI,OAAO;oBACV,OAAO,CAAC,MAAM,EAAE,CAAC;aAClB;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,QAAQ,EAAE;QACT,CAAC,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACzB,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,CAAC;QAErC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QACxD,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAClD,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;QAEtE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;YAC5B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,4BAA4B,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;SAC3E;IACF,CAAC;IAED,gBAAgB,EAAE,UAAS,CAAC;QAC3B,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;IAClB,CAAC;IAED,YAAY,EAAE,UAAS,CAAC;QACvB,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;QAC1B,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;IAClB,CAAC;IAED,aAAa,EAAE,UAAS,CAAC;QACxB,IAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;YAC9B,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;SAC/B;aACI,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,MAAM,EAAE;YAC1C,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,EAAE,iBAAiB,CAAC,CAAC;SAC9C;aACI,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,aAAa,EAAE;YACjD,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;SACzC;aACI,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,cAAc,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,SAAS,EAAE;YACzF,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SAC5B;QACD,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;IAClB,CAAC;IAED,eAAe,EAAE,UAAS,KAAK;QAC9B,MAAM,CAAC,0BAA0B,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;IACnE,CAAC;IAED,4HAA4H;IAC5H,oHAAoH;IACpH,oGAAoG;IACpG,0GAA0G;IAE1G,4BAA4B;IAC5B,oCAAoC;IAEpC,YAAY,EAAE;QACb,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,OAAO;YACN,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,aAAa,EAAG,GAAG,EAAE,aAAa,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAC;YACpH,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,WAAW,EAAC;YACrF,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,YAAY,EAAC;YACnI,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,KAAK,EAAC;YAC/C,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAG,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAC;YACrH,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAG,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAC;YACrH,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,GAAE;YAC/D,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,kBAAkB,EAAG,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,uBAAuB,CAAC,EAAE,GAAG,EAAE,uBAAuB,EAAE,MAAM,EAAE,KAAK,EAAC;YAC/I,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,OAAO,EAAG,GAAG,EAAE,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,sBAAsB,EAAE,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,sBAAsB,EAAE,MAAM,EAAE,KAAK,EAAC;YAC1J,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,cAAc,EAAG,GAAG,EAAE,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,EAAE,cAAc,EAAE,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,iBAAiB,EAAE,MAAM,EAAE,KAAK,EAAC;YACvK,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,YAAY,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,GAAE;YACjF,EAAC,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,QAAQ;gBAC1B,IAAI,EAAE,2DAA2D,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,oBAAoB;gBAC7G,SAAS,EAAE,UAAU,KAAK;oBACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE;wBACrB,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;qBACzB;yBAAM;wBACN,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,UAAU,CAAC;gCACxC,CAAC,CAAC,gBAAgB,CAAC,CAAC,OAAO,EAAE,CAAC;gCAC9B,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;4BACzB,CAAC,EAAC,CAAC,CAAC;qBACJ;gBACF,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAC;YAC9D,EAAC,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,OAAO;gBACzB,IAAI,EAAE,kFAAkF;gBACxF,SAAS,EAAE,UAAU,KAAK;oBACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE;wBACrB,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;qBACzB;yBAAM;wBACN,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,UAAU,CAAC;gCACxC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;4BACzB,CAAC,EAAC,CAAC,CAAC;qBACJ;gBACF,CAAC,EAAE,MAAM,EAAE,KAAK,EAAC;YAClB,EAAC,IAAI,EAAE,MAAM,EAAI,EAAE,EAAE,WAAW;gBAC/B,IAAI,EAAE,yDAAyD;gBAC/D,SAAS,EAAE,UAAU,KAAK;oBACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE;wBACrB,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;qBACzB;yBAAM;wBACN,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,UAAU,CAAC;gCACxC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;4BACzB,CAAC,EAAC,CAAC,CAAC;qBACJ;gBACF,CAAC,EAAE,MAAM,EAAE,KAAK,EAAC;YAClB,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,gBAAgB,EAAE,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,GAAE;YACrF,EAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAC;YACjF,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAG,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,EAAE,WAAW,EAAC;YACtF,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,GAAG,EAAE,aAAa,EAAC;YAC7F,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,WAAW,EAAG,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,EAAE,GAAG,EAAE,gBAAgB,EAAC;YAC1G,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,EAAE,GAAG,EAAE,gBAAgB,EAAC;YACzG,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,iBAAiB,EAAC;YACtC,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,EAAE,OAAO,EAAE,EAAE,MAAM,EAAG,cAAa,MAAM,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAC,EAAG,IAAI,EAAE,MAAM,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAC;YACpO,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,EAAG,OAAO,EAAE,EAAE,MAAM,EAAG,cAAa,MAAM,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAC,EAAG,IAAI,EAAE,MAAM,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAC;YAC3P,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,iBAAiB,EAAE,GAAG,EAAE,iBAAiB,EAAE,IAAI,EAAE,IAAI,CAAC,sBAAsB,CAAC,EAAE,MAAM,EAAE,IAAI,EAAG,OAAO,EAAE,EAAE,MAAM,EAAG,cAAa,MAAM,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAC,EAAG,IAAI,EAAE,MAAM,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAAE,OAAO,EAAE,sBAAsB,EAAC;YACjR,EAAC,IAAI,EAAE,OAAO,EAAG,EAAE,EAAE,YAAY,EAAE,MAAM,EAAC,KAAK,EAAC;YAChD,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,UAAU,EAAG,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,EAAE,EAAE,EAAE,IAAI,CAAC;gBACzF,GAAG,EAAE,EAAC,WAAW,EAAE,eAAe,EAAE,aAAa,EAAE,sBAAsB,EAAC;gBAC1E,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,gBAAgB,EAAE,QAAQ,EAAE,IAAI,EAAC;YAC1D,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,YAAY,EAAG,GAAG,EAAE,iBAAiB,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,EAAE,EAAE,EAAE,IAAI,CAAC;gBACnG,GAAG,EAAE,EAAC,WAAW,EAAE,iBAAiB,EAAE,aAAa,EAAE,kBAAkB,EAAC;gBACxE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,4BAA4B,EAAE,QAAQ,EAAE,IAAI,EAAC;YACtE,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,WAAW,EAAG,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,EAAE,IAAI,CAAC;gBAC5F,GAAG,EAAE,EAAC,WAAW,EAAE,gBAAgB,EAAE,aAAa,EAAE,uBAAuB,EAAC;gBAC5E,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,iBAAiB,EAAE,QAAQ,EAAE,IAAI,EAAC;YAC3D,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,aAAa,EAAG,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,kBAAkB,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAC;YACvK,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,EAAE,IAAI,EAAC;YAC9C,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,gBAAgB,EAAG,GAAG,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,sBAAsB,EAAE,EAAC;YACtI,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,kBAAkB,EAAG,GAAG,EAAE,kBAAkB,EAAE,IAAI,EAAE,IAAI,CAAC,uBAAuB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,uBAAuB,EAAE,QAAQ,EAAE,IAAI,EAAC;YACzL,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,iBAAiB,EAAE,MAAM,EAAE,IAAI,EAAC;YACpD,EAAC,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,gBAAgB;gBACvH,KAAK,EAAE;oBACN,EAAC,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,gBAAgB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,gBAAgB,EAAC;oBAC9G,EAAC,EAAE,EAAE,uBAAuB,EAAE,IAAI,EAAE,IAAI,CAAC,4BAA4B,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,iBAAiB,EAAE,GAAG,EAAE,4BAA4B,EAAC;oBACxJ,EAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,EAAE,iBAAiB,EAAC;oBAClH,EAAC,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,EAAE,iBAAiB,EAAC;oBAClH,EAAC,IAAI,EAAE,OAAO,EAAC;oBACf,EAAC,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,eAAe,EAAC;oBAC1G,EAAC,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,mBAAmB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,cAAc,EAAE,GAAG,EAAE,mBAAmB,EAAC;oBAC1H,EAAC,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,kBAAkB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,EAAE,kBAAkB,EAAC;iBACtH,EAAC;YACH,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,aAAa,EAAG,GAAG,EAAE,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,wBAAwB,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,wBAAwB;gBAC5I,KAAK,EAAE;oBACN,EAAC,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE,iBAAiB,EAAC;oBAC5F,EAAC,EAAE,EAAE,aAAa,EAAE,GAAG,EAAE,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,kBAAkB,CAAC,EAAE,GAAG,EAAE,kBAAkB,EAAC;oBAChG,EAAC,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE,iBAAiB,EAAC;oBAC5F,EAAC,IAAI,EAAE,OAAO,EAAC;oBACf,EAAC,EAAE,EAAE,mBAAmB,EAAE,GAAG,EAAE,mBAAmB,EAAE,IAAI,EAAE,IAAI,CAAC,wBAAwB,CAAC,EAAE,GAAG,EAAE,wBAAwB,EAAC;oBACxH,EAAC,EAAE,EAAE,mBAAmB,EAAE,GAAG,EAAE,mBAAmB,EAAE,IAAI,EAAE,IAAI,CAAC,wBAAwB,CAAC,EAAE,GAAG,EAAE,wBAAwB,EAAC;iBACxH;gBACD,SAAS,EAAE,UAAU,KAAK;oBACzB,IAAI,SAAS,GAAG,UAAS,OAAO;wBAC/B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;wBAC3C,IAAI,GAAG,GAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;wBACtC,IAAI,GAAG,IAAI,CAAC,GAAG,KAAK,MAAM,IAAI,GAAG,KAAK,IAAI,CAAC;4BAC1C,OAAO,IAAI,CAAC;;4BAEZ,OAAO,KAAK,CAAC;oBACf,CAAC,CAAC;oBAEF,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBAE3B,KAAK,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE;wBAC/B,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBAC/B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;wBAErB,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE;4BACnD,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;4BACnC,IAAI,IAAI,CAAC,OAAO;gCACf,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC;yBAC/B;qBACD;gBACF,CAAC,EAAC;YACH,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,UAAU,EAAG,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,eAAe,EAAE,QAAQ,EAAE,IAAI,EAAC;YACzJ,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAC;YACjD,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,kBAAkB,EAAG,GAAG,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,uBAAuB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,uBAAuB,EAAE,QAAQ,EAAE,IAAI,EAAC;YACvK,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,eAAe,EAAG,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,oBAAoB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,oBAAoB,EAAE,QAAQ,EAAE,IAAI,EAAC;YAC3J,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,IAAI,EAAC;YAChD,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,iBAAiB,EAAG,GAAG,EAAE,iBAAiB,EAAE,IAAI,EAAE,IAAI,CAAC,sBAAsB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,sBAAsB,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC;YAC1K,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,iBAAiB,EAAG,GAAG,EAAE,iBAAiB,EAAE,IAAI,EAAE,IAAI,CAAC,sBAAsB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,sBAAsB,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAC;YAC1K,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,IAAI,EAAC;YAChD,EAAC,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,0BAA0B,EAAG,GAAG,EAAE,yBAAyB,EAAE,IAAI,EAAE,IAAI,CAAC,4BAA4B,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,4BAA4B,EAAE,EAAE,GAAG,EAAE,4BAA4B,EAAC;YAC5O,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,eAAe,EAAG,GAAG,EAAE,eAAe,EAAE,IAAI,EAAE,IAAI,CAAC,oBAAoB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,oBAAoB,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAC;YAC7K,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,gBAAgB,EAAG,GAAG,EAAE,gBAAgB,EAAE,IAAI,EAAE,IAAI,CAAC,qBAAqB,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,qBAAqB,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAC;YACjL,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAC;YACjD,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,sBAAsB,EAAG,GAAG,EAAE,sBAAsB,EAAE,IAAI,EAAE,IAAI,CAAC,2BAA2B,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,2BAA2B,EAAE,QAAQ,EAAE,IAAI,EAAC;YACzM,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,qBAAqB,EAAG,GAAG,EAAE,qBAAqB,EAAE,IAAI,EAAE,IAAI,CAAC,0BAA0B,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,0BAA0B,EAAE,QAAQ,EAAE,IAAI,EAAC;YACrM,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,yBAAyB,EAAG,GAAG,EAAE,yBAAyB,EAAE,IAAI,EAAE,IAAI,CAAC,8BAA8B,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,8BAA8B,EAAE,QAAQ,EAAE,IAAI,EAAC;YACrN,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,yBAAyB,EAAG,GAAG,EAAE,yBAAyB,EAAE,IAAI,EAAE,IAAI,CAAC,8BAA8B,EAAE,aAAa,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,8BAA8B,EAAE,QAAQ,EAAE,IAAI,EAAC;YACrN,EAAC,IAAI,EAAE,OAAO,EAAI,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAC;YACnD,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,aAAa,EAAG,GAAG,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC,cAAc,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,EAAC,MAAM,EAAE,MAAM,CAAC,WAAW,EAAC,EAAE,IAAI,EAAE,MAAM,CAAC,uBAAuB,EAAE,EAAE,OAAO,EAAE,kBAAkB,EAAC;YAC1M,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,eAAe,EAAG,GAAG,EAAE,eAAe,EAAE,IAAI,EAAE,IAAI,CAAC,oBAAoB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,OAAO,EAAE,oBAAoB,EAAC;YACxI,EAAC,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,aAAa,EAAE,GAAG,EAAE,eAAe,EAAE,IAAI,EAAE,IAAI,CAAC,oBAAoB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,oBAAoB;gBAC9I,KAAK,EAAE;oBACN,EAAC,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,oBAAoB,CAAC,EAAC;oBACnD,EAAC,EAAE,EAAE,eAAe,EAAE,IAAI,EAAE,IAAI,CAAC,oBAAoB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAC;iBACjE,EAAC;YACH,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,mBAAmB,EAAG,GAAG,EAAE,mBAAmB,EAAE,IAAI,EAAE,IAAI,CAAC,wBAAwB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,wBAAwB,EAAC;YACpJ,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,cAAc,EAAG,GAAG,EAAE,qBAAqB,EAAE,IAAI,EAAE,CAAC,CAAC,eAAe,CAAC,EAAE,OAAO,EAAE,EAAC,MAAM,EAAE,cAAY,MAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,EAAC,EAAE,IAAI,EAAE,MAAM,CAAC,kBAAkB,EAAE,EAAC;YACpM,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,WAAW,EAAC;YACrG,EAAC,IAAI,EAAE,MAAM,EAAG,EAAE,EAAE,kBAAkB,EAAG,GAAG,EAAE,sBAAsB,EAAE,IAAI,EAAE,CAAC,CAAC,mBAAmB,CAAC,EAAE,OAAO,EAAE,EAAC,MAAM,EAAE,cAAY,MAAM,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,EAAC,EAAE,IAAI,EAAE,MAAM,CAAC,kBAAkB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAC;YAC/N,EAAC,IAAI,EAAE,OAAO,EAAI,EAAE,EAAE,aAAa,EAAE,OAAO,EAAE,IAAI,EAAC;YACnD,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,eAAe,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,oCAAoC,EAAE,MAAM,EAAE,IAAI,EAAC;YAC/I,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,kBAAkB,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,uBAAuB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,uBAAuB,EAAC;YAC3J,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAG,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,sBAAsB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,sBAAsB,EAAC;YAC1I,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,cAAc,EAAE,GAAG,EAAE,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,mBAAmB,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,mBAAmB,EAAC;YAC/H,EAAC,IAAI,EAAE,QAAQ,EAAC;YAChB,EAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAC;YACjD,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAG,GAAG,EAAE,MAAM,EAAC;YAC3C,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,SAAS,EAAE,GAAG,EAAE,qBAAqB,EAAE,IAAI,EAAE,IAAI,CAAC,cAAc,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,cAAc,EAAE,MAAM,EAAE,IAAI,EAAC;YACrI,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,qBAAqB,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,iBAAiB,EAAE,MAAM,EAAE,IAAI,EAAC;YAC1J,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,mBAAmB,EAAE,GAAG,EAAE,sBAAsB,EAAE,IAAI,EAAE,IAAI,CAAC,wBAAwB,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,wBAAwB,EAAE,MAAM,EAAE,IAAI,EAAC;YAChL,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,iBAAiB,EAAE,GAAG,EAAE,0BAA0B,EAAE,IAAI,EAAE,IAAI,CAAC,sBAAsB,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,sBAAsB,EAAE,MAAM,EAAE,IAAI,EAAC;YAC9K,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,mBAAmB,EAAE,GAAG,EAAE,uBAAuB,EAAE,IAAI,EAAE,IAAI,CAAC,wBAAwB,EAAE,cAAc,EAAE,IAAI,CAAC,EAAE,GAAG,EAAE,wBAAwB,EAAE,MAAM,EAAE,IAAI,EAAC;YACjL,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,MAAM,EAAG,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC;YACvF,EAAC,IAAI,EAAE,QAAQ,EAAG,EAAE,EAAE,kBAAkB,EAAG,GAAG,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC;YAC5I,EAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAC;SACjF,CAAC;IACH,CAAC;IAED,mBAAmB,EAAE;QACpB,IAAI,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAE;YACnC,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,QAAQ,EAAE,CAAC;YACtD,IAAI,KAAK,EAAE;gBACV,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;oBACvB,IAAI,CAAC,0BAA0B,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;iBACnD;aACD;SACD;IACF,CAAC;IAED,MAAM,EAAE;QACP,CAAC,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACzB,IAAI,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC1C,8BAA8B;QAC9B,IAAI,OAAO;YACV,OAAO,CAAC,MAAM,EAAE,CAAC;QAClB,8CAA8C;QAC9C,CAAC,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QACrE,OAAO,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC;QAC3B,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,OAAO,CAAC,SAAS,CAAC;YACjB,IAAI,EAAE,SAAS;YACf,KAAK,EAAE,IAAI,CAAC,YAAY,EAAE;YAC1B,OAAO,EAAE,UAAU,CAAC;gBACnB,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;gBAC5B,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;YACpC,CAAC;YACD,SAAS,EAAE,UAAS,KAAK;gBACxB,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,QAAQ,IAAI,KAAK,CAAC,MAAM,KAAK,OAAO,IAAI,KAAK,CAAC,MAAM,KAAK,WAAW;uBACpG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;oBAC1B,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,GAAE,IAAI,CAAC,IAAI,GAAE,QAAQ,GAAE,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;oBAE9F,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;wBAClC,QAAQ,CAAC,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;qBACrC;yBACI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,IAAI,KAAK,CAAC;2BAC5D,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,KAAK,CAAC,EAAE;wBAC5D,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;qBAChC;yBAAM;wBACN,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;qBAC5B;iBACD;gBAED,IAAI,KAAK,CAAC,MAAM,KAAK,aAAa;oBACjC,MAAM,CAAC,WAAW,EAAE,CAAC;gBAEtB,IAAI,KAAK,CAAC,MAAM,KAAK,cAAc,IAAI,KAAK,CAAC,MAAM,KAAK,kBAAkB;oBACzE,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBAEnC,IAAI,IAAI,CAAC,GAAG,CAAC,gBAAgB,EAAE,EAAE;oBAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC3C,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvB,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,EAAE,EAAE,CAAC,CAAC,mBAAmB,GAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,mBAAmB,GAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACrG;iBACD;gBAED,IAAI,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,EAAE;oBAC5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC3C,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;wBACvB,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,EAAE,CAAC,CAAC,mBAAmB,GAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,mBAAmB,GAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBACnG;iBACD;YACF,CAAC;SACD,CAAC,CAAC;QACH,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAE1C,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE;YAC1B,IAAI,CAAC,SAAS,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,eAAe,CAAC,CAAC;QAC7C,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;IAC1B,CAAC;IAED,cAAc,EAAE;QACf,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;QAChC,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;QACpC,IAAI,IAAI,CAAC;QAET,QAAQ,OAAO,EAAE;YACjB,KAAK,aAAa;gBACjB,IAAI,SAAS,EAAE;oBACd,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,cAAc,EAAE,kBAAkB,EAAE,0BAA0B,EAC9G,sBAAsB,EAAE,qBAAqB,EAC7C,yBAAyB,EAAE,yBAAyB,EAAE,cAAc,EAAE,kBAAkB,EAAE,iBAAiB,EAC3G,gBAAgB,EAAE,eAAe,EAAE,gBAAgB,EAAE,cAAc,EAAE,iBAAiB,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;oBACpH,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;iBAC3B;gBAED,CAAC,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gBAC9C,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;oBAC3B,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;oBACzD,CAAC,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;iBACzC;gBAED,MAAM;YACP,KAAK,MAAM;gBACV,IAAI,SAAS;oBACZ,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAE,WAAW,EAAE,aAAa,EACvG,cAAc,EAAE,eAAe,EAAE,kBAAkB,EAAE,aAAa,EAAE,iBAAiB,EAAE,iBAAiB,EACxG,aAAa,EAAE,aAAa,EAAE,kBAAkB,EAAE,WAAW,EAAE,cAAc,EAAE,SAAS,CAAC,CAAC;gBAE5F,MAAM;YACP,KAAK,cAAc;gBAClB,8CAA8C;gBAC9C,IAAI,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;oBAClE,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC;oBACZ,8BAA8B;oBAC9B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,sCAAsC,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;oBAEnF,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,UAAS,MAAM;wBAC7C,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC,CAAC,CAAC;oBAC3D,CAAC,EAAE,IAAI,CAAC,CAAC;oBAET,CAAC,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC;wBAC3B,IAAI,EAAE,IAAI;wBACV,WAAW,EAAE,IAAI,CAAC,mBAAmB,EAAE,cAAc,CAAC;qBACtD,CAAC,CAAC;oBACH,CAAC,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;iBACxE;gBAED,IAAI,SAAS,EAAE;oBACd,SAAS,CAAC,IAAI,CAAC,cAAc,EAAE,cAAc,EAAE,YAAY,EAC1D,UAAU,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAE,WAAW,EAAE,aAAa,EAChF,cAAc,EAAE,eAAe,EAAE,kBAAkB,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAG,kBAAkB,EAAE,WAAW,EACpI,cAAc,EAAE,YAAY,EAAE,mBAAmB,EAAE,iBAAiB,EAAE,mBAAmB,CAAC,CAAC;iBAC5F;gBACD,MAAM;YACP,KAAK,SAAS;gBACb,IAAI,SAAS,EAAE;oBACd,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAE,WAAW,EAAE,aAAa,EAC9F,cAAc,EAAE,eAAe,EAAE,kBAAkB,EAAE,aAAa,EAAE,eAAe,EAAE,aAAa,EAAE,WAAW,EAC/G,cAAc,EAAE,YAAY,EAAE,kBAAkB,CAAC,CAAC;iBACnD;gBACD,MAAM;SACN;QAED,MAAM,CAAC,0BAA0B,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAEnD,IAAI,SAAS;YACZ,SAAS,CAAC,OAAO,EAAE,CAAC;QAErB,IAAI,CAAC,GAAG,CAAC,sBAAsB,CAAC,mBAAmB,CAAC,CAAC;IACtD,CAAC;IAED,kBAAkB,EAAE,UAAS,CAAC;QAC7B,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;YACtB,oBAAoB;YACpB,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAC5C,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAC3C,CAAC,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;SAC/C;aAAM;YACN,qBAAqB;YACrB,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAC3C,CAAC,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YAC1C,CAAC,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;SAC9C;IACF,CAAC;IAED,WAAW,EAAE,UAAS,CAAC;QACtB,IAAI,CAAC,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SAC7B;QACD,IAAI,CAAC,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC9B;QAED,kEAAkE;QAClE,mEAAmE;QACnE,kFAAkF;QAClF,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,cAAc,IAAI,CAAC,CAAC,eAAe,EAAE;YACrE,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAClC;QAED,IAAI,CAAC,CAAC,uBAAuB,KAAK,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,EAAE;YAC1D,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YACtC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACpC;IACF,CAAC;IAED,mBAAmB,EAAE,UAAS,CAAC;QAC9B,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,IAAI,aAAa,CAAC;QAClB,yBAAyB;QACzB,uDAAuD;QACvD,IAAI,CAAC,CAAC,WAAW,KAAK,iBAAiB,EAAE;YACxC,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YAChE,IAAI,OAAO,aAAa,KAAK,WAAW;gBACvC,OAAO;YACR,IAAI,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC;YACtC,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBAEpC,QAAQ,CAAC,OAAO,CAAC,UAAU,OAAO;oBACjC,IAAI,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC;oBAC9B,IAAI,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;wBACzC,mCAAmC;wBACnC,UAAU,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,CAAC;qBACnE;oBACD,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC;gBACzD,CAAC,EAAE,IAAI,CAAC,CAAC;aACT;YAED,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,MAAM,EAAE;gBACrC,MAAM,GAAG,aAAa,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAChD,SAAS,GAAG,aAAa,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACtD;iBACI,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,aAAa,EAAE;gBACjD,MAAM,GAAG,aAAa,CAAC,UAAU,CAAC;aAClC;iBACI,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,cAAc,EAAE;gBAClD,0CAA0C;gBAC1C,OAAO;aACP;YAED,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;gBACzB,8BAA8B;gBAC9B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,sCAAsC,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;gBAEnF,SAAS,CAAC,OAAO,CAAC,UAAU,KAAK;oBAChC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,cAAc,EAAE,EAAC,CAAC,CAAC;gBACvF,CAAC,EAAE,IAAI,CAAC,CAAC;aACT;YAED,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC9C,8BAA8B;gBAC9B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,IAAI,EAAE,sCAAsC,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC;gBAEnF,MAAM,CAAC,OAAO,CAAC,UAAU,KAAK;oBAC7B,IAAI,WAAW,CAAC;oBAChB,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,EAAE;wBAChC,IAAI,YAAY,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC7C,WAAW,GAAG,SAAS,CAAC,cAAc,EAAE,GAAG,GAAG,GAAG,YAAY,CAAC;qBAC9D;yBAAM;wBACN,WAAW,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;wBAC5C,WAAW,GAAG,WAAW,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;qBAC/E;oBAED,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAC,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAC,CAAC,CAAC;gBACpD,CAAC,EAAE,IAAI,CAAC,CAAC;aACT;YAED,CAAC,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC;gBAC3B,IAAI,EAAE,IAAI;gBACV,WAAW,EAAE,CAAC,CAAC,OAAO,CAAC;aACvB,CAAC,CAAC;YACH,CAAC,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YAC1E,CAAC,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACxE;QAED,IAAI,IAAI,CAAC,SAAS,CAAC;YAClB,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;IAC3B,CAAC;IAED,0BAA0B,EAAE,UAAS,WAAW,EAAE,KAAK;QACtD,IAAI,KAAK,GAAG,KAAK,CAAC;QAElB,IAAI,WAAW,KAAK,iBAAiB,EAAE;YACtC,IAAI,CAAC,KAAK,EAAE;gBACX,OAAO;aACP;YAED,iDAAiD;YACjD,IAAI,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,cAAc,EAAE;gBAC7C,OAAO;aACP;YAED,CAAC,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC;gBAC/B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBACvB,kFAAkF;gBAClF,qCAAqC;gBACrC,8DAA8D;gBAC9D,IAAI,KAAK,IAAI,KAAK,CAAC,WAAW,EAAE,KAAK,KAAK,CAAC,WAAW,EAAE,EAAE;oBACzD,KAAK,GAAG,KAAK,CAAC;oBACd,KAAK,GAAG,IAAI,CAAC;oBACb,OAAO;iBACP;YACF,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,KAAK,EAAE;gBACX,0BAA0B;gBAC1B,CAAC,CAAC,gBAAgB,CAAC;qBACjB,MAAM,CAAC,CAAC,CAAC,mBAAmB,CAAC;qBAC5B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAChB;YAED,IAAI,CAAC,OAAO,CAAC,iBAAiB,GAAG,KAAK,CAAC;YACvC,CAAC,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACjD;aACI,IAAI,WAAW,KAAK,mBAAmB,EAAE;YAC7C,IAAI,CAAC,OAAO,CAAC,gBAAgB,GAAG,KAAK,CAAC;SACtC;QAED,MAAM,CAAC,0BAA0B,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;IACvD,CAAC;IAED,qBAAqB,EAAE,UAAS,CAAC;QAChC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;IACzD,CAAC;CACD,CAAC,CAAC;AAEH,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG;IACtB,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;AACnC,CAAC,CAAC","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Control.TopToolbar\n */\n\n/* global $ w2ui _ _UNO w2utils */\nL.Control.TopToolbar = L.Control.extend({\n\toptions: {\n\t\tstylesSelectValue: null,\n\t\tfontsSelectValue: null\n\t},\n\n\tonAdd: function (map) {\n\t\tthis.map = map;\n\t\tthis.create();\n\n\t\tmap.on('doclayerinit', this.onDocLayerInit, this);\n\t\tmap.on('updatepermission', this.onUpdatePermission, this);\n\t\tmap.on('wopiprops', this.onWopiProps, this);\n\t\tmap.on('commandstatechanged', this.onCommandStateChanged, this);\n\t\tmap.on('contextchange', this.onContextChange, this);\n\n\t\tif (!window.mode.isMobile()) {\n\t\t\tmap.on('updatetoolbarcommandvalues', this.updateCommandValues, this);\n\t\t}\n\n\t\t$(window).resize(function() {\n\t\t\tif ($(window).width() !== map.getSize().x) {\n\t\t\t\tvar toolbar = w2ui['editbar'];\n\t\t\t\tif (toolbar)\n\t\t\t\t\ttoolbar.resize();\n\t\t\t}\n\t\t});\n\t},\n\n\tonRemove: function() {\n\t\t$().w2destroy('editbar');\n\t\tL.DomUtil.get('toolbar-up').remove();\n\n\t\tthis.map.off('doclayerinit', this.onDocLayerInit, this);\n\t\tthis.map.off('updatepermission', this.onUpdatePermission, this);\n\t\tthis.map.off('wopiprops', this.onWopiProps, this);\n\t\tthis.map.off('commandstatechanged', this.onCommandStateChanged, this);\n\n\t\tif (!window.mode.isMobile()) {\n\t\t\tthis.map.off('updatetoolbarcommandvalues', this.updateCommandValues, this);\n\t\t}\n\t},\n\n\tonFontSizeSelect: function(e) {\n\t\tthis.map.applyFontSize(e.target.value);\n\t\tthis.map.focus();\n\t},\n\n\tonFontSelect: function(e) {\n\t\tvar font = e.target.value;\n\t\tthis.map.applyFont(font);\n\t\tthis.map.focus();\n\t},\n\n\tonStyleSelect: function(e) {\n\t\tvar style = e.target.value;\n\t\tif (style.startsWith('.uno:')) {\n\t\t\tthis.map.sendUnoCommand(style);\n\t\t}\n\t\telse if (this.map.getDocType() === 'text') {\n\t\t\tthis.map.applyStyle(style, 'ParagraphStyles');\n\t\t}\n\t\telse if (this.map.getDocType() === 'spreadsheet') {\n\t\t\tthis.map.applyStyle(style, 'CellStyles');\n\t\t}\n\t\telse if (this.map.getDocType() === 'presentation' || this.map.getDocType() === 'drawing') {\n\t\t\tthis.map.applyLayout(style);\n\t\t}\n\t\tthis.map.focus();\n\t},\n\n\tonContextChange: function(event) {\n\t\twindow.updateVisibilityForToolbar(w2ui['editbar'], event.context);\n\t},\n\n\t// mobile:false means hide it both for normal Online used from a mobile phone browser, and in a mobile app on a mobile phone\n\t// mobilebrowser:false means hide it for normal Online used from a mobile browser, but don't hide it in a mobile app\n\t// tablet:true means show it in normal Online from a tablet browser, and in a mobile app on a tablet\n\t// tablet:false means hide it in normal Online used from a tablet browser, and in a mobile app on a tablet\n\n\t// hidden means display:none\n\t// invisible means visibility:hidden\n\n\tgetToolItems: function() {\n\t\tvar that = this;\n\t\treturn [\n\t\t\t{type: 'button',  id: 'closemobile',  img: 'closemobile', desktop: false, mobile: false, tablet: true, hidden: true},\n\t\t\t{type: 'button',  id: 'save', img: 'save', hint: _UNO('.uno:Save'), uno: '.uno:Save'},\n\t\t\t{type: 'button',  id: 'print', img: 'print', hint: _UNO('.uno:Print', 'text'), mobile: false, tablet: false, lockUno: '.uno:Print'},\n\t\t\t{type: 'break', id: 'savebreak', mobile: false},\n\t\t\t{type: 'button',  id: 'undo',  img: 'undo', hint: _UNO('.uno:Undo'), uno: '.uno:Undo', disabled: true, mobile: false},\n\t\t\t{type: 'button',  id: 'redo',  img: 'redo', hint: _UNO('.uno:Redo'), uno: '.uno:Redo', disabled: true, mobile: false},\n\t\t\t{type: 'break', id: 'redobreak', mobile: false, tablet: false,},\n\t\t\t{type: 'button',  id: 'formatpaintbrush',  img: 'copyformat', hint: _UNO('.uno:FormatPaintbrush'), uno: '.uno:FormatPaintbrush', mobile: false},\n\t\t\t{type: 'button',  id: 'reset',  img: 'deleteformat', hint: _UNO('.uno:ResetAttributes', 'text'), hidden: true, uno: '.uno:ResetAttributes', mobile: false},\n\t\t\t{type: 'button',  id: 'resetimpress',  img: 'deleteformat', hint: _UNO('.uno:SetDefault', 'presentation', 'true'), hidden: true, uno: '.uno:SetDefault', mobile: false},\n\t\t\t{type: 'break', id: 'breakreset', invisible: true, mobile: false, tablet: false,},\n\t\t\t{type: 'html', id: 'styles',\n\t\t\t\thtml: '<select id=\"styles-select\" class=\"styles-select\"><option>' + _('Default Style') + '</option></select>',\n\t\t\t\tonRefresh: function (edata) {\n\t\t\t\t\tif (!edata.item.html) {\n\t\t\t\t\t\tedata.isCancelled = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.extend(edata, { onComplete: function (e) {\n\t\t\t\t\t\t\t$('#styles-select').select2();\n\t\t\t\t\t\t\te.item.html = undefined;\n\t\t\t\t\t\t}});\n\t\t\t\t\t}\n\t\t\t\t}, hidden: true, desktop: true, mobile: false, tablet: false},\n\t\t\t{type: 'html', id: 'fonts',\n\t\t\t\thtml: '<select id=\"fonts-select\" class=\"fonts-select\"><option>Carlito</option></select>',\n\t\t\t\tonRefresh: function (edata) {\n\t\t\t\t\tif (!edata.item.html) {\n\t\t\t\t\t\tedata.isCancelled = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.extend(edata, { onComplete: function (e) {\n\t\t\t\t\t\t\te.item.html = undefined;\n\t\t\t\t\t\t}});\n\t\t\t\t\t}\n\t\t\t\t}, mobile: false},\n\t\t\t{type: 'html',   id: 'fontsizes',\n\t\t\t\thtml: '<select id=\"fontsizes-select\" class=\"fontsizes-select\">',\n\t\t\t\tonRefresh: function (edata) {\n\t\t\t\t\tif (!edata.item.html) {\n\t\t\t\t\t\tedata.isCancelled = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.extend(edata, { onComplete: function (e) {\n\t\t\t\t\t\t\te.item.html = undefined;\n\t\t\t\t\t\t}});\n\t\t\t\t\t}\n\t\t\t\t}, mobile: false},\n\t\t\t{type: 'break', id: 'breakfontsizes', invisible: true, mobile: false, tablet: false,},\n\t\t\t{type: 'button', id: 'languagecode', desktop: false, mobile: true, tablet: false},\n\t\t\t{type: 'button',  id: 'bold',  img: 'bold', hint: _UNO('.uno:Bold'), uno: '.uno:Bold'},\n\t\t\t{type: 'button',  id: 'italic', img: 'italic', hint: _UNO('.uno:Italic'), uno: '.uno:Italic'},\n\t\t\t{type: 'button',  id: 'underline',  img: 'underline', hint: _UNO('.uno:Underline'), uno: '.uno:Underline'},\n\t\t\t{type: 'button',  id: 'strikeout', img: 'strikeout', hint: _UNO('.uno:Strikeout'), uno: '.uno:Strikeout'},\n\t\t\t{type: 'break', id: 'breakformatting'},\n\t\t\t{type: 'drop',  id: 'fontcolor', img: 'textcolor', hint: _UNO('.uno:FontColor'), overlay: { onShow : function() { window.showColorPicker('fontcolor'); }} , html: window.getColorPickerHTML('fontcolor'), lockUno: '.uno:FontColor'},\n\t\t\t{type: 'drop',  id: 'backcolor', img: 'backcolor', hint: _UNO('.uno:BackColor', 'text'), hidden: true,  overlay: { onShow : function() { window.showColorPicker('backcolor'); }} , html: window.getColorPickerHTML('backcolor'), lockUno: '.uno:BackColor'},\n\t\t\t{type: 'drop',  id: 'backgroundcolor', img: 'backgroundcolor', hint: _UNO('.uno:BackgroundColor'), hidden: true,  overlay: { onShow : function() { window.showColorPicker('backgroundcolor'); }} , html: window.getColorPickerHTML('backcolor'), lockUno: '.uno:BackgroundColor'},\n\t\t\t{type: 'break' , id: 'breakcolor', mobile:false},\n\t\t\t{type: 'button',  id: 'leftpara',  img: 'alignleft', hint: _UNO('.uno:LeftPara', '', true),\n\t\t\t\tuno: {textCommand: '.uno:LeftPara', objectCommand: '.uno:ObjectAlignLeft'},\n\t\t\t\thidden: true, unosheet: '.uno:AlignLeft', disabled: true},\n\t\t\t{type: 'button',  id: 'centerpara',  img: 'alignhorizontal', hint: _UNO('.uno:CenterPara', '', true),\n\t\t\t\tuno: {textCommand: '.uno:CenterPara', objectCommand: '.uno:AlignCenter'},\n\t\t\t\thidden: true, unosheet: '.uno:AlignHorizontalCenter', disabled: true},\n\t\t\t{type: 'button',  id: 'rightpara',  img: 'alignright', hint: _UNO('.uno:RightPara', '', true),\n\t\t\t\tuno: {textCommand: '.uno:RightPara', objectCommand: '.uno:ObjectAlignRight'},\n\t\t\t\thidden: true, unosheet: '.uno:AlignRight', disabled: true},\n\t\t\t{type: 'button',  id: 'justifypara',  img: 'alignblock', hint: _UNO('.uno:JustifyPara', '', true), uno: '.uno:JustifyPara', hidden: true, unosheet: '', disabled: true},\n\t\t\t{type: 'break', id: 'breakpara', hidden: true},\n\t\t\t{type: 'drop',  id: 'setborderstyle',  img: 'setborderstyle', hint: _('Borders'), hidden: true, html: window.getBorderStyleMenuHtml()},\n\t\t\t{type: 'button',  id: 'togglemergecells',  img: 'togglemergecells', hint: _UNO('.uno:ToggleMergeCells', 'spreadsheet', true), hidden: true, uno: '.uno:ToggleMergeCells', disabled: true},\n\t\t\t{type: 'break', id: 'breakmergecells', hidden: true},\n\t\t\t{type: 'menu', id: 'textalign', img: 'alignblock', hint: _UNO('.uno:TextAlign'), hidden: true, lockUno: '.uno:TextAlign',\n\t\t\t\titems: [\n\t\t\t\t\t{id: 'alignleft', text: _UNO('.uno:AlignLeft', 'spreadsheet', true), icon: 'alignleft', uno: '.uno:AlignLeft'},\n\t\t\t\t\t{id: 'alignhorizontalcenter', text: _UNO('.uno:AlignHorizontalCenter', 'spreadsheet', true), icon: 'alignhorizontal', uno: '.uno:AlignHorizontalCenter'},\n\t\t\t\t\t{id: 'alignright', text: _UNO('.uno:AlignRight', 'spreadsheet', true), icon: 'alignright', uno: '.uno:AlignRight'},\n\t\t\t\t\t{id: 'alignblock', text: _UNO('.uno:AlignBlock', 'spreadsheet', true), icon: 'alignblock', uno: '.uno:AlignBlock'},\n\t\t\t\t\t{type: 'break'},\n\t\t\t\t\t{id: 'aligntop', text: _UNO('.uno:AlignTop', 'spreadsheet', true), icon: 'aligntop', uno: '.uno:AlignTop'},\n\t\t\t\t\t{id: 'alignvcenter', text: _UNO('.uno:AlignVCenter', 'spreadsheet', true), icon: 'alignvcenter', uno: '.uno:AlignVCenter'},\n\t\t\t\t\t{id: 'alignbottom', text: _UNO('.uno:AlignBottom', 'spreadsheet', true), icon: 'alignbottom', uno: '.uno:AlignBottom'},\n\t\t\t\t]},\n\t\t\t{type: 'menu',  id: 'linespacing',  img: 'linespacing', hint: _UNO('.uno:FormatSpacingMenu'), hidden: true, lockUno: '.uno:FormatSpacingMenu',\n\t\t\t\titems: [\n\t\t\t\t\t{id: 'spacepara1', img: 'spacepara1', text: _UNO('.uno:SpacePara1'), uno: '.uno:SpacePara1'},\n\t\t\t\t\t{id: 'spacepara15', img: 'spacepara15', text: _UNO('.uno:SpacePara15'), uno: '.uno:SpacePara15'},\n\t\t\t\t\t{id: 'spacepara2', img: 'spacepara2', text: _UNO('.uno:SpacePara2'), uno: '.uno:SpacePara2'},\n\t\t\t\t\t{type: 'break'},\n\t\t\t\t\t{id: 'paraspaceincrease', img: 'paraspaceincrease', text: _UNO('.uno:ParaspaceIncrease'), uno: '.uno:ParaspaceIncrease'},\n\t\t\t\t\t{id: 'paraspacedecrease', img: 'paraspacedecrease', text: _UNO('.uno:ParaspaceDecrease'), uno: '.uno:ParaspaceDecrease'}\n\t\t\t\t],\n\t\t\t\tonRefresh: function (event) {\n\t\t\t\t\tvar isChecked = function(command) {\n\t\t\t\t\t\tvar items = that.map['stateChangeHandler'];\n\t\t\t\t\t\tvar val = items.getItemValue(command);\n\t\t\t\t\t\tif (val && (val === 'true' || val === true))\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\n\t\t\t\t\tevent.item.selected = null;\n\n\t\t\t\t\tfor (var i in event.item.items) {\n\t\t\t\t\t\tvar item = event.item.items[i];\n\t\t\t\t\t\titem.checked = false;\n\n\t\t\t\t\t\tif (item.id && item.id.indexOf('spacepara') !== -1) {\n\t\t\t\t\t\t\titem.checked = isChecked(item.uno);\n\t\t\t\t\t\t\tif (item.checked)\n\t\t\t\t\t\t\t\tevent.item.selected = item.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}},\n\t\t\t{type: 'button',  id: 'wraptext',  img: 'wraptext', hint: _UNO('.uno:WrapText', 'spreadsheet', true), hidden: true, uno: '.uno:WrapText', disabled: true},\n\t\t\t{type: 'break', id: 'breakspacing', hidden: true},\n\t\t\t{type: 'button',  id: 'defaultnumbering',  img: 'numbering', hint: _UNO('.uno:DefaultNumbering', '', true), hidden: true, uno: '.uno:DefaultNumbering', disabled: true},\n\t\t\t{type: 'button',  id: 'defaultbullet',  img: 'bullet', hint: _UNO('.uno:DefaultBullet', '', true), hidden: true, uno: '.uno:DefaultBullet', disabled: true},\n\t\t\t{type: 'break', id: 'breakbullet', hidden: true},\n\t\t\t{type: 'button',  id: 'incrementindent',  img: 'incrementindent', hint: _UNO('.uno:IncrementIndent', '', true), uno: '.uno:IncrementIndent', hidden: true, disabled: true},\n\t\t\t{type: 'button',  id: 'decrementindent',  img: 'decrementindent', hint: _UNO('.uno:DecrementIndent', '', true), uno: '.uno:DecrementIndent', hidden: true, disabled: true},\n\t\t\t{type: 'break', id: 'breakindent', hidden: true},\n\t\t\t{type: 'drop', id: 'conditionalformaticonset',  img: 'conditionalformatdialog', hint: _UNO('.uno:ConditionalFormatMenu', 'spreadsheet', true), hidden: true, html: window.getConditionalFormatMenuHtml(), uno: '.uno:ConditionalFormatMenu'},\n\t\t\t{type: 'button',  id: 'sortascending',  img: 'sortascending', hint: _UNO('.uno:SortAscending', 'spreadsheet', true), uno: '.uno:SortAscending', disabled: true, hidden: true},\n\t\t\t{type: 'button',  id: 'sortdescending',  img: 'sortdescending', hint: _UNO('.uno:SortDescending', 'spreadsheet', true), uno: '.uno:SortDescending', disabled: true, hidden: true},\n\t\t\t{type: 'break', id: 'breaksorting', hidden: true},\n\t\t\t{type: 'button',  id: 'numberformatcurrency',  img: 'numberformatcurrency', hint: _UNO('.uno:NumberFormatCurrency', 'spreadsheet', true), hidden: true, uno: '.uno:NumberFormatCurrency', disabled: true},\n\t\t\t{type: 'button',  id: 'numberformatpercent',  img: 'numberformatpercent', hint: _UNO('.uno:NumberFormatPercent', 'spreadsheet', true), hidden: true, uno: '.uno:NumberFormatPercent', disabled: true},\n\t\t\t{type: 'button',  id: 'numberformatdecdecimals',  img: 'numberformatdecdecimals', hint: _UNO('.uno:NumberFormatDecDecimals', 'spreadsheet', true), hidden: true, uno: '.uno:NumberFormatDecDecimals', disabled: true},\n\t\t\t{type: 'button',  id: 'numberformatincdecimals',  img: 'numberformatincdecimals', hint: _UNO('.uno:NumberFormatIncDecimals', 'spreadsheet', true), hidden: true, uno: '.uno:NumberFormatIncDecimals', disabled: true},\n\t\t\t{type: 'break',   id: 'break-number', hidden: true},\n\t\t\t{type: 'drop',  id: 'inserttable',  img: 'inserttable', hint: _('Insert table'), hidden: true, overlay: {onShow: window.insertTable}, html: window.getInsertTablePopupHtml(), lockUno: '.uno:InsertTable'},\n\t\t\t{type: 'button',  id: 'insertgraphic',  img: 'insertgraphic', hint: _UNO('.uno:InsertGraphic', '', true), lockUno: '.uno:InsertGraphic'},\n\t\t\t{type: 'menu', id: 'menugraphic', img: 'insertgraphic', hint: _UNO('.uno:InsertGraphic', '', true), hidden: true, lockUno: '.uno:InsertGraphic',\n\t\t\t\titems: [\n\t\t\t\t\t{id: 'localgraphic', text: _('Insert Local Image')},\n\t\t\t\t\t{id: 'remotegraphic', text: _UNO('.uno:InsertGraphic', '', true)},\n\t\t\t\t]},\n\t\t\t{type: 'button',  id: 'insertobjectchart',  img: 'insertobjectchart', hint: _UNO('.uno:InsertObjectChart', '', true), uno: '.uno:InsertObjectChart'},\n\t\t\t{type: 'drop',  id: 'insertshapes',  img: 'basicshapes_ellipse', hint: _('Insert shapes'), overlay: {onShow: function() {window.insertShapes('insertshapes'); }}, html: window.getShapesPopupHtml()},\n\t\t\t{type: 'button',  id: 'insertline', img: 'line', hint: _UNO('.uno:Line', '', true), uno: '.uno:Line'},\n\t\t\t{type: 'drop',  id: 'insertconnectors',  img: 'connectors_connector', hint: _('Insert connectors'), overlay: {onShow: function() {window.insertShapes('insertconnectors'); }}, html: window.getShapesPopupHtml(), hidden: true},\n\t\t\t{type: 'break',   id: 'breakinsert', desktop: true},\n\t\t\t{type: 'button',  id: 'inserttextbox', img: 'text', hint: _UNO('.uno:Text', '', true), uno: '.uno:Text?CreateDirectly:bool=true', hidden: true},\n\t\t\t{type: 'button',  id: 'insertannotation', img: 'annotation', hint: _UNO('.uno:InsertAnnotation', '', true), hidden: true, lockUno: '.uno:InsertAnnotation'},\n\t\t\t{type: 'button',  id: 'link',  img: 'link', hint: _UNO('.uno:HyperlinkDialog', '', true), disabled: true, lockUno: '.uno:HyperlinkDialog'},\n\t\t\t{type: 'button',  id: 'insertsymbol', img: 'insertsymbol', hint: _UNO('.uno:InsertSymbol', '', true), uno: '.uno:InsertSymbol'},\n\t\t\t{type: 'spacer'},\n\t\t\t{type: 'break', id: 'breaksidebar', hidden: true},\n\t\t\t{type: 'button',  id: 'edit',  img: 'edit'},\n\t\t\t{type: 'button',  id: 'sidebar', img: 'sidebar_modify_page', hint: _UNO('.uno:Sidebar', '', true), uno: '.uno:Sidebar', hidden: true},\n\t\t\t{type: 'button',  id: 'modifypage', img: 'sidebar_modify_page', hint: _UNO('.uno:ModifyPage', 'presentation', true), uno: '.uno:ModifyPage', hidden: true},\n\t\t\t{type: 'button',  id: 'slidechangewindow', img: 'sidebar_slide_change', hint: _UNO('.uno:SlideChangeWindow', 'presentation', true), uno: '.uno:SlideChangeWindow', hidden: true},\n\t\t\t{type: 'button',  id: 'customanimation', img: 'sidebar_custom_animation', hint: _UNO('.uno:CustomAnimation', 'presentation', true), uno: '.uno:CustomAnimation', hidden: true},\n\t\t\t{type: 'button',  id: 'masterslidespanel', img: 'sidebar_master_slides', hint: _UNO('.uno:MasterSlidesPanel', 'presentation', true), uno: '.uno:MasterSlidesPanel', hidden: true},\n\t\t\t{type: 'button',  id: 'fold',  img: 'fold', desktop: true, mobile: false, hidden: true},\n\t\t\t{type: 'button',  id: 'hamburger-tablet',  img: 'hamburger', desktop: false, mobile: false, tablet: true, iosapptablet: false, hidden: true},\n\t\t\t{type: 'button', id: 'languagecode', desktop: false, mobile: true, tablet: false}\n\t\t];\n\t},\n\n\tupdateControlsState: function() {\n\t\tif (this.map['stateChangeHandler']) {\n\t\t\tvar items = this.map['stateChangeHandler'].getItems();\n\t\t\tif (items) {\n\t\t\t\tfor (var item in items) {\n\t\t\t\t\tthis.processStateChangedCommand(item, items[item]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tcreate: function() {\n\t\t$().w2destroy('editbar');\n\t\tvar toolbar = L.DomUtil.get('toolbar-up');\n\t\t// In case it contains garbage\n\t\tif (toolbar)\n\t\t\ttoolbar.remove();\n\t\t// Use original template as provided by server\n\t\t$('#toolbar-logo').after(this.map.toolbarUpTemplate.cloneNode(true));\n\t\ttoolbar = $('#toolbar-up');\n\t\tvar that = this;\n\t\ttoolbar.w2toolbar({\n\t\t\tname: 'editbar',\n\t\t\titems: this.getToolItems(),\n\t\t\tonClick: function (e) {\n\t\t\t\twindow.onClick(e, e.target);\n\t\t\t\twindow.hideTooltip(this, e.target);\n\t\t\t},\n\t\t\tonRefresh: function(event) {\n\t\t\t\tif (event.item && (event.target === 'styles' || event.target === 'fonts' || event.target === 'fontsizes'\n\t\t\t\t\t|| event.item.invisible)) {\n\t\t\t\t\tvar toolItem = $(this.box).find('#tb_'+ this.name +'_item_'+ w2utils.escapeId(event.item.id));\n\n\t\t\t\t\tif (event.item.invisible === true) {\n\t\t\t\t\t\ttoolItem.css('visibility', 'hidden');\n\t\t\t\t\t}\n\t\t\t\t\telse if ((window.mode.isDesktop() && event.item.desktop == false)\n\t\t\t\t\t\t\t|| (window.mode.isTablet() && event.item.tablet == false)) {\n\t\t\t\t\t\ttoolItem.css('display', 'none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoolItem.css('display', '');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (event.target === 'inserttable')\n\t\t\t\t\twindow.insertTable();\n\n\t\t\t\tif (event.target === 'insertshapes' || event.target === 'insertconnectors')\n\t\t\t\t\twindow.insertShapes(event.target);\n\n\t\t\t\tif (that.map.isRestrictedUser()) {\n\t\t\t\t\tfor (var i = 0; i < this.items.length; i++) {\n\t\t\t\t\t\tvar it = this.items[i];\n\t\t\t\t\t\tthat.map.hideRestrictedItems(it, $('#tb_editbar_item_'+ it.id)[0], $('#tb_editbar_item_'+ it.id)[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (that.map.isLockedUser()) {\n\t\t\t\t\tfor (var i = 0; i < this.items.length; i++) {\n\t\t\t\t\t\tvar it = this.items[i];\n\t\t\t\t\t\tthat.map.disableLockedItem(it, $('#tb_editbar_item_'+ it.id)[0], $('#tb_editbar_item_'+ it.id)[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.map.uiManager.enableTooltip(toolbar);\n\n\t\ttoolbar.bind('touchstart', function() {\n\t\t\tw2ui['editbar'].touchStarted = true;\n\t\t});\n\n\t\tthis.map.createFontSelector('#fonts-select');\n\t\tw2ui['editbar'].resize();\n\t},\n\n\tonDocLayerInit: function() {\n\t\tvar toolbarUp = w2ui['editbar'];\n\t\tvar docType = this.map.getDocType();\n\t\tvar data;\n\n\t\tswitch (docType) {\n\t\tcase 'spreadsheet':\n\t\t\tif (toolbarUp) {\n\t\t\t\ttoolbarUp.show('reset', 'textalign', 'wraptext', 'breakspacing', 'insertannotation', 'conditionalformaticonset',\n\t\t\t\t\t'numberformatcurrency', 'numberformatpercent',\n\t\t\t\t\t'numberformatincdecimals', 'numberformatdecdecimals', 'break-number', 'togglemergecells', 'breakmergecells',\n\t\t\t\t\t'setborderstyle', 'sortascending', 'sortdescending', 'breaksorting', 'backgroundcolor', 'breaksidebar', 'sidebar');\n\t\t\t\ttoolbarUp.remove('styles');\n\t\t\t}\n\n\t\t\t$('#toolbar-wrapper').addClass('spreadsheet');\n\t\t\tif (window.mode.isTablet()) {\n\t\t\t\t$(this.map.options.documentContainer).addClass('tablet');\n\t\t\t\t$('#toolbar-wrapper').addClass('tablet');\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'text':\n\t\t\tif (toolbarUp)\n\t\t\t\ttoolbarUp.show('reset', 'leftpara', 'centerpara', 'rightpara', 'justifypara', 'breakpara', 'linespacing',\n\t\t\t\t\t'breakspacing', 'defaultbullet', 'defaultnumbering', 'breakbullet', 'incrementindent', 'decrementindent',\n\t\t\t\t\t'breakindent', 'inserttable', 'insertannotation', 'backcolor', 'breaksidebar', 'sidebar');\n\n\t\t\tbreak;\n\t\tcase 'presentation':\n\t\t\t// Fill the style select box if not yet filled\n\t\t\tif ($('#styles-select')[0] && $('#styles-select')[0].length === 1) {\n\t\t\t\tdata = [''];\n\t\t\t\t// Inserts a separator element\n\t\t\t\tdata = data.concat({text: '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500', disabled: true});\n\n\t\t\t\tL.Styles.impressLayout.forEach(function(layout) {\n\t\t\t\t\tdata = data.concat({id: layout.id, text: _(layout.text)});\n\t\t\t\t}, this);\n\n\t\t\t\t$('#styles-select').select2({\n\t\t\t\t\tdata: data,\n\t\t\t\t\tplaceholder: _UNO('.uno:LayoutStatus', 'presentation')\n\t\t\t\t});\n\t\t\t\t$('#styles-select').on('select2:select', this.onStyleSelect.bind(this));\n\t\t\t}\n\n\t\t\tif (toolbarUp) {\n\t\t\t\ttoolbarUp.show('resetimpress', 'breaksidebar', 'modifypage',\n\t\t\t\t\t'leftpara', 'centerpara', 'rightpara', 'justifypara', 'breakpara', 'linespacing',\n\t\t\t\t\t'breakspacing', 'defaultbullet', 'defaultnumbering', 'breakbullet', 'inserttextbox', 'inserttable',  'insertannotation', 'backcolor',\n\t\t\t\t\t'breaksidebar', 'modifypage', 'slidechangewindow', 'customanimation', 'masterslidespanel');\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'drawing':\n\t\t\tif (toolbarUp) {\n\t\t\t\ttoolbarUp.show('leftpara', 'centerpara', 'rightpara', 'justifypara', 'breakpara', 'linespacing',\n\t\t\t\t\t'breakspacing', 'defaultbullet', 'defaultnumbering', 'breakbullet', 'inserttextbox', 'inserttable', 'backcolor',\n\t\t\t\t\t'breaksidebar', 'modifypage', 'insertconnectors');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\twindow.updateVisibilityForToolbar(w2ui['editbar']);\n\n\t\tif (toolbarUp)\n\t\t\ttoolbarUp.refresh();\n\n\t\tthis.map.createFontSizeSelector('#fontsizes-select');\n\t},\n\n\tonUpdatePermission: function(e) {\n\t\tif (e.perm === 'edit') {\n\t\t\t// Enable list boxes\n\t\t\t$('#styles-select').prop('disabled', false);\n\t\t\t$('#fonts-select').prop('disabled', false);\n\t\t\t$('#fontsizes-select').prop('disabled', false);\n\t\t} else {\n\t\t\t// Disable list boxes\n\t\t\t$('#styles-select').prop('disabled', true);\n\t\t\t$('#fonts-select').prop('disabled', true);\n\t\t\t$('#fontsizes-select').prop('disabled', true);\n\t\t}\n\t},\n\n\tonWopiProps: function(e) {\n\t\tif (e.HideSaveOption) {\n\t\t\tw2ui['editbar'].hide('save');\n\t\t}\n\t\tif (e.HidePrintOption) {\n\t\t\tw2ui['editbar'].hide('print');\n\t\t}\n\n\t\t// On desktop we only have Save and Print buttons before the first\n\t\t// splitter/break. Hide the splitter if we hid both save and print.\n\t\t// TODO: Apply the same logic to mobile/tablet to avoid beginning with a splitter.\n\t\tif (window.mode.isDesktop() && e.HideSaveOption && e.HidePrintOption) {\n\t\t\tw2ui['editbar'].hide('savebreak');\n\t\t}\n\n\t\tif (e.EnableInsertRemoteImage === true && w2ui['editbar']) {\n\t\t\tw2ui['editbar'].hide('insertgraphic');\n\t\t\tw2ui['editbar'].show('menugraphic');\n\t\t}\n\t},\n\n\tupdateCommandValues: function(e) {\n\t\tvar data = [];\n\t\tvar commandValues;\n\t\t// 1) For .uno:StyleApply\n\t\t// we need an empty option for the place holder to work\n\t\tif (e.commandName === '.uno:StyleApply') {\n\t\t\tvar styles = [];\n\t\t\tvar topStyles = [];\n\t\t\tcommandValues = this.map.getToolbarCommandValues(e.commandName);\n\t\t\tif (typeof commandValues === 'undefined')\n\t\t\t\treturn;\n\t\t\tvar commands = commandValues.Commands;\n\t\t\tif (commands && commands.length > 0) {\n\n\t\t\t\tcommands.forEach(function (command) {\n\t\t\t\t\tvar translated = command.text;\n\t\t\t\t\tif (L.Styles.styleMappings[command.text]) {\n\t\t\t\t\t\t// if it's in English, translate it\n\t\t\t\t\t\ttranslated = L.Styles.styleMappings[command.text].toLocaleString();\n\t\t\t\t\t}\n\t\t\t\t\tdata = data.concat({id: command.id, text: translated });\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tif (this.map.getDocType() === 'text') {\n\t\t\t\tstyles = commandValues.ParagraphStyles.slice(7);\n\t\t\t\ttopStyles = commandValues.ParagraphStyles.slice(0, 7);\n\t\t\t}\n\t\t\telse if (this.map.getDocType() === 'spreadsheet') {\n\t\t\t\tstyles = commandValues.CellStyles;\n\t\t\t}\n\t\t\telse if (this.map.getDocType() === 'presentation') {\n\t\t\t\t// styles are not applied for presentation\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (topStyles.length > 0) {\n\t\t\t\t// Inserts a separator element\n\t\t\t\tdata = data.concat({text: '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500', disabled: true});\n\n\t\t\t\ttopStyles.forEach(function (style) {\n\t\t\t\t\tdata = data.concat({id: style, text: L.Styles.styleMappings[style].toLocaleString()});\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tif (styles !== undefined && styles.length > 0) {\n\t\t\t\t// Inserts a separator element\n\t\t\t\tdata = data.concat({text: '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500', disabled: true});\n\n\t\t\t\tstyles.forEach(function (style) {\n\t\t\t\t\tvar localeStyle;\n\t\t\t\t\tif (style.startsWith('outline')) {\n\t\t\t\t\t\tvar outlineLevel = style.split('outline')[1];\n\t\t\t\t\t\tlocaleStyle = 'Outline'.toLocaleString() + ' ' + outlineLevel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocaleStyle = L.Styles.styleMappings[style];\n\t\t\t\t\t\tlocaleStyle = localeStyle === undefined ? style : localeStyle.toLocaleString();\n\t\t\t\t\t}\n\n\t\t\t\t\tdata = data.concat({id: style, text: localeStyle});\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\t$('#styles-select').select2({\n\t\t\t\tdata: data,\n\t\t\t\tplaceholder: _('Style')\n\t\t\t});\n\t\t\t$('#styles-select').val(this.options.stylesSelectValue).trigger('change');\n\t\t\t$('#styles-select').on('select2:select', this.onStyleSelect.bind(this));\n\t\t}\n\n\t\tif (w2ui['editbar'])\n\t\t\tw2ui['editbar'].resize();\n\t},\n\n\tprocessStateChangedCommand: function(commandName, state) {\n\t\tvar found = false;\n\n\t\tif (commandName === '.uno:StyleApply') {\n\t\t\tif (!state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For impress documents, no styles is supported.\n\t\t\tif (this.map.getDocType() === 'presentation') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$('#styles-select option').each(function () {\n\t\t\t\tvar value = this.value;\n\t\t\t\t// For writer we get UI names; ideally we should be getting only programmatic ones\n\t\t\t\t// For eg: 'Text body' vs 'Text Body'\n\t\t\t\t// (likely to be fixed in core to make the pattern consistent)\n\t\t\t\tif (state && value.toLowerCase() === state.toLowerCase()) {\n\t\t\t\t\tstate = value;\n\t\t\t\t\tfound = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!found) {\n\t\t\t\t// we need to add the size\n\t\t\t\t$('#styles-select')\n\t\t\t\t\t.append($('<option></option>')\n\t\t\t\t\t\t.text(state));\n\t\t\t}\n\n\t\t\tthis.options.stylesSelectValue = state;\n\t\t\t$('#styles-select').val(state).trigger('change');\n\t\t}\n\t\telse if (commandName === '.uno:CharFontName') {\n\t\t\tthis.options.fontsSelectValue = state;\n\t\t}\n\n\t\twindow.processStateChangedCommand(commandName, state);\n\t},\n\n\tonCommandStateChanged: function(e) {\n\t\tthis.processStateChangedCommand(e.commandName, e.state);\n\t}\n});\n\nL.control.topToolbar = function () {\n\treturn new L.Control.TopToolbar();\n};\n"]}
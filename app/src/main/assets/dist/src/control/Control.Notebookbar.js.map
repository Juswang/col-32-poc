{"version":3,"file":"Control.Notebookbar.js","sourceRoot":"","sources":["../../../../../../../../browser/src/control/Control.Notebookbar.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Control.Notebookbar\n */\n\n/* global $ _ _UNO */\nL.Control.Notebookbar = L.Control.extend({\n\n\t_currentScrollPosition: 0,\n\t_showNotebookbar: false,\n\t_RTL: false,\n\n\tcontainer: null,\n\tbuilder: null,\n\n\tlastContext: 'Text',\n\n\tHOME_TAB_ID: '-10',\n\n\tadditionalShortcutButtons: [],\n\thiddenShortcutButtons: [],\n\n\tonAdd: function (map) {\n\t\t// log and test window.ThisIsTheiOSApp = true;\n\t\tthis.map = map;\n\t\tthis._currentScrollPosition = 0;\n\n\t\tif (document.documentElement.dir === 'rtl')\n\t\t\tthis._RTL = true;\n\n\t\tthis.builder = new L.control.notebookbarBuilder({mobileWizard: this, map: map, cssClass: 'notebookbar'});\n\t\tvar toolbar = L.DomUtil.get('toolbar-up');\n\t\t// In case it contains garbage\n\t\tif (toolbar)\n\t\t\ttoolbar.remove();\n\t\t$('#toolbar-logo').after(this.map.toolbarUpTemplate.cloneNode(true));\n\t\ttoolbar = $('#toolbar-up');\n\n\t\tthis.loadTab(this.getFullJSON(this.HOME_TAB_ID));\n\n\t\tthis.createScrollButtons();\n\t\tthis.setupResizeHandler();\n\n\t\tthis.map.on('contextchange', this.onContextChange, this);\n\t\tthis.map.on('notebookbar', this.onNotebookbar, this);\n\t\tthis.map.on('updatepermission', this.onUpdatePermission, this);\n\t\tthis.map.on('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.on('jsdialogaction', this.onJSAction, this);\n\t\tthis.map.on('statusbarchanged', this.onStatusbarChange, this);\n\t\tthis.map.on('rulerchanged', this.onRulerChange, this);\n\n\t\tthis.map.sendUnoCommand('.uno:ToolbarMode?Mode:string=notebookbar_online.ui');\n\n\t\t$('#toolbar-wrapper').addClass('hasnotebookbar');\n\t\t$('.main-nav').addClass('hasnotebookbar');\n\t\t$('.main-nav').addClass(this._map.getDocType() + '-color-indicator');\n\t\tdocument.getElementById('document-container').classList.add('notebookbar-active');\n\n\t\tvar docLogoHeader = L.DomUtil.create('div', '');\n\t\tdocLogoHeader.id = 'document-header';\n\n\t\tvar iconClass = 'document-logo';\n\t\tif (this.map._docLayer._docType === 'text') {\n\t\t\ticonClass += ' writer-icon-img';\n\t\t} else if (this.map._docLayer._docType === 'spreadsheet') {\n\t\t\ticonClass += ' calc-icon-img';\n\t\t} else if (this.map._docLayer._docType === 'presentation') {\n\t\t\ticonClass += ' impress-icon-img';\n\t\t} else if (this.map._docLayer._docType === 'drawing') {\n\t\t\ticonClass += ' draw-icon-img';\n\t\t}\n\t\tvar docLogo = L.DomUtil.create('div', iconClass, docLogoHeader);\n\t\t$(docLogo).data('id', 'document-logo');\n\t\t$(docLogo).data('type', 'action');\n\t\t$('.main-nav').prepend(docLogoHeader);\n\n\t\tvar that = this;\n\t\tvar retryNotebookbarInit = function() {\n\t\t\tif (!that.map._isNotebookbarLoadedOnCore) {\n\t\t\t\t// if notebookbar doesn't have any welded controls it can trigger false alarm here\n\t\t\t\twindow.app.console.warn('notebookbar might be not initialized, retrying');\n\t\t\t\tthat.map.sendUnoCommand('.uno:ToolbarMode?Mode:string=notebookbar_online.ui');\n\t\t\t\tthat.retry = setTimeout(retryNotebookbarInit, 3000);\n\t\t\t}\n\t\t};\n\n\t\tthis.retry = setTimeout(retryNotebookbarInit, 3000);\n\t},\n\n\tonRemove: function() {\n\t\tclearTimeout(this.retry);\n\t\tthis.map._isNotebookbarLoadedOnCore = false;\n\t\tthis.map.sendUnoCommand('.uno:ToolbarMode?Mode:string=Default');\n\t\tthis.map.off('contextchange', this.onContextChange, this);\n\t\tthis.map.off('updatepermission', this.onUpdatePermission, this);\n\t\tthis.map.off('notebookbar');\n\t\tthis.map.off('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.off('jsdialogaction', this.onJSAction, this);\n\t\t$('.main-nav #document-header').remove();\n\t\t$('.main-nav.hasnotebookbar').css('overflow', 'visible');\n\t\t$('.main-nav').removeClass('hasnotebookbar');\n\t\t$('#toolbar-wrapper').removeClass('hasnotebookbar');\n\t\t$('.main-nav').removeClass(this._map.getDocType() + '-color-indicator');\n\t\t$('.main-nav #document-header').remove();\n\t\tthis.clearNotebookbar();\n\t},\n\n\tonJSUpdate: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype !== 'notebookbar')\n\t\t\treturn;\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tthis.map._isNotebookbarLoadedOnCore = true;\n\n\t\tvar control = this.container.querySelector('[id=\\'' + data.control.id + '\\']');\n\t\tif (!control) {\n\t\t\twindow.app.console.warn('jsdialogupdate: not found control with id: \"' + data.control.id + '\"');\n\t\t\treturn;\n\t\t}\n\n\t\tvar parent = control.parentNode;\n\t\tif (!parent)\n\t\t\treturn;\n\n\t\tif (!this.builder)\n\t\t\treturn;\n\n\t\tvar scrollTop = control.scrollTop;\n\t\tcontrol.style.visibility = 'hidden';\n\n\t\tvar temporaryParent = L.DomUtil.create('div');\n\t\tthis.builder.buildControl(temporaryParent, data.control);\n\t\tparent.insertBefore(temporaryParent.firstChild, control.nextSibling);\n\t\tL.DomUtil.remove(control);\n\n\t\tvar newControl = this.container.querySelector('[id=\\'' + data.control.id + '\\']');\n\t\tif (newControl)\n\t\t\tnewControl.scrollTop = scrollTop;\n\t},\n\n\tonJSAction: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype !== 'notebookbar')\n\t\t\treturn;\n\n\t\tif (!this.builder)\n\t\t\treturn;\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tthis.map._isNotebookbarLoadedOnCore = true;\n\n\t\tthis.builder.executeAction(this.container, data.data);\n\t},\n\n\tonUpdatePermission: function(e) {\n\t\tif (e.perm === 'edit') {\n\t\t\tthis._showNotebookbar = true;\n\t\t\tthis.showTabs();\n\t\t\t$('.main-nav').removeClass('readonly');\n\t\t} else {\n\t\t\tthis.hideTabs();\n\t\t}\n\t},\n\n\tonNotebookbar: function(data) {\n\t\tthis.map._isNotebookbarLoadedOnCore = true;\n\t\t// setup id for events\n\t\tthis.builder.setWindowId(data.id);\n\t},\n\n\tshowTabs: function() {\n\t\t$('.ui-tabs.notebookbar').show();\n\t\t$('.notebookbar-shortcuts-bar').show();\n\t\tthis.extend();\n\t\t$(window).resize();\n\t},\n\n\thideTabs: function() {\n\t\t$('.ui-tabs.notebookbar').hide();\n\t\t$('.notebookbar-shortcuts-bar').hide();\n\t\t$('.main-nav').addClass('readonly');\n\t\tthis.collapse();\n\t},\n\n\tcollapse: function() {\n\t\tif (this._showNotebookbar !== false) this.map.uiManager.collapseNotebookbar();\n\t},\n\n\textend: function() {\n\t\tif (this._showNotebookbar !== false) this.map.uiManager.extendNotebookbar();\n\t},\n\n\tisCollapsed: function() {\n\t\treturn this.map.uiManager.isNotebookbarCollapsed();\n\t},\n\n\tclearNotebookbar: function() {\n\t\t$('.root-container.notebookbar').remove();\n\t\t$('.notebookbar-tabs-container').remove();\n\t\t$('.notebookbar-scroll-wrapper').remove();\n\t\t$('.notebookbar-shortcuts-bar').remove();\n\t},\n\n\tloadTab: function(tabJSON) {\n\t\tthis.clearNotebookbar();\n\n\t\tvar parent = $('#toolbar-up').get(0);\n\t\tthis.container = L.DomUtil.create('div', 'notebookbar-scroll-wrapper', parent);\n\n\t\tthis.builder.build(this.container, [tabJSON]);\n\n\t\tif (this._showNotebookbar === false)\n\t\t\tthis.hideTabs();\n\n\t\tif (window.mode.isDesktop() || (window.ThisIsAMobileApp && window.mode.isTablet()))\n\t\t\tthis.createOptionsSection();\n\n\t\tthis.scrollToLastPositionIfNeeded();\n\t},\n\n\tsetTabs: function(tabs) {\n\t\tvar container = L.DomUtil.create('div', 'notebookbar-tabs-container');\n\t\tcontainer.appendChild(tabs);\n\t\t$('#document-titlebar').before(container);\n\t\tthis.createShortcutsBar();\n\t},\n\n\tselectedTab: function() {\n\t\t// implement in child classes\n\t},\n\n\tgetTabs: function() {\n\t\t// implement in child classes\n\t\treturn [];\n\t},\n\n\tgetShortcutsBarData: function() {\n\t\treturn [\n\t\t\t{\n\t\t\t\t'id': 'shortcutstoolbox',\n\t\t\t\t'type': 'toolbox',\n\t\t\t\t'children': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'id': 'save',\n\t\t\t\t\t\t'type': 'toolitem',\n\t\t\t\t\t\t'text': _('Save'),\n\t\t\t\t\t\t'command': '.uno:Save'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t},\n\n\tcreateShortcutsBar: function() {\n\t\tvar shortcutsBar = L.DomUtil.create('div', 'notebookbar-shortcuts-bar');\n\t\t$('#main-menu-state').after(shortcutsBar);\n\n\t\tvar shortcutsBarData = this.getShortcutsBarData();\n\t\tvar toolitems = shortcutsBarData[0].children;\n\n\t\tfor (var i in this.additionalShortcutButtons) {\n\t\t\tvar item = this.additionalShortcutButtons[i];\n\t\t\ttoolitems.push(item);\n\t\t}\n\n\t\tfor (i in this.hiddenShortcutButtons) {\n\t\t\tvar toHide = this.hiddenShortcutButtons[i];\n\t\t\tfor (var j in toolitems) {\n\t\t\t\titem = toolitems[j];\n\t\t\t\tif (item.id == toHide) {\n\t\t\t\t\ttoolitems.splice(j, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.builder.build(shortcutsBar, shortcutsBarData);\n\t},\n\n\treloadShortcutsBar: function() {\n\t\t$('.notebookbar-shortcuts-bar').remove();\n\t\tthis.createShortcutsBar();\n\t},\n\n\tinsertButtonToShortcuts: function(button) {\n\t\tfor (var i in this.additionalShortcutButtons) {\n\t\t\tvar item = this.additionalShortcutButtons[i];\n\t\t\tif (item.id === button.id)\n\t\t\t\treturn;\n\t\t}\n\n\t\tvar isUnoCommand = button.unoCommand && button.unoCommand.indexOf('.uno:') >= 0;\n\t\tif (button.unoCommand && !isUnoCommand)\n\t\t\tbutton.unoCommand = '.uno:' + button.unoCommand;\n\n\t\tthis.additionalShortcutButtons.push(\n\t\t\t{\n\t\t\t\tid: button.id,\n\t\t\t\ttype: 'toolitem',\n\t\t\t\ttext: button.label ? button.label : (button.hint ? _(button.hint) : ' '),\n\t\t\t\ticon: button.imgurl,\n\t\t\t\tcommand: button.unoCommand,\n\t\t\t\tpostmessage: button.unoCommand ? undefined : true,\n\t\t\t\tcssClass: 'integrator-shortcut'\n\t\t\t}\n\t\t);\n\n\t\tthis.reloadShortcutsBar();\n\t},\n\n\tshowShortcutsButton: function(buttonId, show) {\n\t\tvar i = this.hiddenShortcutButtons.indexOf(buttonId);\n\t\tif (i > -1) {\n\t\t\tif (show === true)\n\t\t\t\tthis.hiddenShortcutButtons.splice(i, 1);\n\n\t\t\tthis.reloadShortcutsBar();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hiddenShortcutButtons.push(buttonId);\n\t\tthis.reloadShortcutsBar();\n\t},\n\n\tsetCurrentScrollPosition: function() {\n\t\tthis._currentScrollPosition = $('.notebookbar-scroll-wrapper').scrollLeft();\n\t},\n\n\tscrollToLastPositionIfNeeded: function() {\n\t\tvar rootContainer = $('.notebookbar-scroll-wrapper div').get(0);\n\n\t\tif (this._currentScrollPosition && $(rootContainer).outerWidth() > $(window).width()) {\n\t\t\t$('.notebookbar-scroll-wrapper').animate({ scrollLeft: this._currentScrollPosition }, 0);\n\t\t} else {\n\t\t\t$(window).resize();\n\t\t}\n\t},\n\n\tcreateScrollButtons: function() {\n\t\tvar parent = $('#toolbar-up').get(0);\n\n\t\tvar left = L.DomUtil.create('div', 'w2ui-scroll-left', parent);\n\t\tvar right = L.DomUtil.create('div', 'w2ui-scroll-right', parent);\n\n\t\t$(left).css({'height': '72px'});\n\t\t$(right).css({'height': '72px'});\n\n\t\t$(left).click(function () {\n\t\t\tvar scroll = $('.notebookbar-scroll-wrapper').scrollLeft() - 300;\n\t\t\t$('.notebookbar-scroll-wrapper').animate({ scrollLeft: scroll }, 300);\n\t\t\tsetTimeout(function () { $(window).resize(); }, 350);\n\t\t});\n\n\t\t$(right).click(function () {\n\t\t\tvar scroll = $('.notebookbar-scroll-wrapper').scrollLeft() + 300;\n\t\t\t$('.notebookbar-scroll-wrapper').animate({ scrollLeft: scroll }, 300);\n\t\t\tsetTimeout(function () { $(window).resize(); }, 350);\n\t\t});\n\t},\n\n\tsetupResizeHandler: function() {\n\t\tvar handler = function() {\n\t\t\tvar container = $('#toolbar-up').get(0);\n\t\t\tvar rootContainer = $('.notebookbar-scroll-wrapper div').get(0);\n\n\t\t\tif ($(rootContainer).outerWidth() > $(window).width()) {\n\t\t\t\t// we have overflowed content\n\t\t\t\tvar direction = this._RTL ? -1 : 1;\n\t\t\t\tif (direction * $('.notebookbar-scroll-wrapper').scrollLeft() > 0) {\n\t\t\t\t\tif (this._RTL)\n\t\t\t\t\t\t$(container).find('.w2ui-scroll-right').show();\n\t\t\t\t\telse\n\t\t\t\t\t\t$(container).find('.w2ui-scroll-left').show();\n\t\t\t\t} else if (this._RTL)\n\t\t\t\t\t$(container).find('.w2ui-scroll-right').hide();\n\t\t\t\telse\n\t\t\t\t\t$(container).find('.w2ui-scroll-left').hide();\n\n\t\t\t\tif (direction * $('.notebookbar-scroll-wrapper').scrollLeft() < $(rootContainer).outerWidth() - $(window).width() - 1) {\n\t\t\t\t\tif (this._RTL)\n\t\t\t\t\t\t$(container).find('.w2ui-scroll-left').show();\n\t\t\t\t\telse\n\t\t\t\t\t\t$(container).find('.w2ui-scroll-right').show();\n\t\t\t\t} else if (this._RTL)\n\t\t\t\t\t$(container).find('.w2ui-scroll-left').hide();\n\t\t\t\telse\n\t\t\t\t\t$(container).find('.w2ui-scroll-right').hide();\n\t\t\t} else {\n\t\t\t\t$(container).find('.w2ui-scroll-left').hide();\n\t\t\t\t$(container).find('.w2ui-scroll-right').hide();\n\t\t\t}\n\t\t}.bind(this);\n\n\t\t$(window).resize(handler);\n\t\t$('.notebookbar-scroll-wrapper').scroll(handler);\n\t},\n\n\tonContextChange: function(event) {\n\t\tif (event.context === this.lastContext)\n\t\t\treturn;\n\n\t\tvar tabs = this.getTabs();\n\t\tvar contextTab = null;\n\t\tvar defaultTab = null;\n\t\tfor (var tab in tabs) {\n\t\t\tif (tabs[tab].context) {\n\t\t\t\tvar tabElement = $('#' + tabs[tab].name + '-tab-label');\n\t\t\t\ttabElement.hide();\n\t\t\t\tvar contexts = tabs[tab].context.split('|');\n\t\t\t\tfor (var context in contexts) {\n\t\t\t\t\tif (contexts[context] === event.context) {\n\t\t\t\t\t\ttabElement.show();\n\t\t\t\t\t\tif (!tabElement.hasClass('selected'))\n\t\t\t\t\t\t\tcontextTab = tabElement;\n\t\t\t\t\t} else if (contexts[context] === 'default') {\n\t\t\t\t\t\ttabElement.show();\n\t\t\t\t\t\tif (!tabElement.hasClass('selected'))\n\t\t\t\t\t\t\tdefaultTab = tabElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (contextTab)\n\t\t\tcontextTab.click();\n\t\telse if (defaultTab)\n\t\t\tdefaultTab.click();\n\n\t\tthis.lastContext = event.context;\n\t},\n\n\tonStatusbarChange: function() {\n\t\tif (this.map.uiManager.isStatusBarVisible()) {\n\t\t\t$('#showstatusbar').addClass('selected');\n\t\t}\n\t\telse {\n\t\t\t$('#showstatusbar').removeClass('selected');\n\t\t}\n\t},\n\n\tonRulerChange: function() {\n\t\tif (this.map.uiManager.isRulerVisible()) {\n\t\t\t$('#showruler').addClass('selected');\n\t\t}\n\t\telse {\n\t\t\t$('#showruler').removeClass('selected');\n\t\t}\n\t},\n\n\tgetOptionsSectionData: function() {\n\t\treturn [\n\t\t\t{\n\t\t\t\t'id': 'optionscontainer',\n\t\t\t\t'type': 'container',\n\t\t\t\t'vertical': 'true',\n\t\t\t\t'children': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'id': 'optionstoolboxdown',\n\t\t\t\t\t\t'type': 'toolbox',\n\t\t\t\t\t\t'children': [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'type': 'toolitem',\n\t\t\t\t\t\t\t\t'text': _UNO('.uno:Sidebar', '', true),\n\t\t\t\t\t\t\t\t'command': '.uno:Sidebar'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'type': 'toolitem',\n\t\t\t\t\t\t\t\t// dummy node to avoid creating labels\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t},\n\n\tcreateOptionsSection: function() {\n\t\t$('.notebookbar-options-section').remove();\n\n\t\tvar optionsSection = L.DomUtil.create('div', 'notebookbar-options-section');\n\t\t$(optionsSection).insertBefore('#closebuttonwrapper');\n\n\t\tvar builderOptions = {\n\t\t\tmobileWizard: this,\n\t\t\tmap: this.map,\n\t\t\tcssClass: 'notebookbar',\n\t\t};\n\n\t\tvar builder = new L.control.notebookbarBuilder(builderOptions);\n\t\tbuilder.build(optionsSection, this.getOptionsSectionData());\n\t},\n});\n"]}
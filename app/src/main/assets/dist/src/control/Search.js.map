{"version":3,"file":"Search.js","sourceRoot":"","sources":["../../../../../../../../browser/src/control/Search.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/* global app */\n\nL.Map.include({\n\tsearch: function (text, backward, replaceString,  command, expand) {\n\t\tif (backward === undefined) {\n\t\t\tbackward = false;\n\t\t}\n\t\tif (command === undefined) {\n\t\t\tcommand = 0;\n\t\t}\n\t\tif (replaceString === undefined) {\n\t\t\treplaceString = '';\n\t\t}\n\t\tif (this._docLayer._searchResults && text !== this._docLayer._searchTerm)\n\t\t{\n\t\t\tthis._docLayer._clearSearchResults();\n\t\t}\n\n\t\tvar searchCmd = {\n\t\t\t'SearchItem.SearchString': {\n\t\t\t\t'type': 'string'\n\t\t\t},\n\t\t\t'SearchItem.ReplaceString': {\n\t\t\t\t'type': 'string'\n\t\t\t},\n\t\t\t'SearchItem.Backward': {\n\t\t\t\t'type': 'boolean'\n\t\t\t},\n\t\t\t'SearchItem.SearchStartPointX': {\n\t\t\t\t'type': 'long'\n\t\t\t},\n\t\t\t'SearchItem.SearchStartPointY': {\n\t\t\t\t'type': 'long'\n\t\t\t},\n\t\t\t'SearchItem.Command': {\n\t\t\t\t'type': 'long'\n\t\t\t}\n\t\t};\n\n\t\tthis.fire('clearselection');\n\t\tvar viewTopLeftpx = this.project(this.getBounds().getNorthWest());\n\t\tvar docBoundsTopLeft = this.project(this.options.maxBounds.getNorthWest());\n\t\tvar topLeft = this.unproject(new L.Point(\n\t\t\tMath.max(viewTopLeftpx.x, docBoundsTopLeft.x),\n\t\t\tMath.max(viewTopLeftpx.y, docBoundsTopLeft.y)));\n\t\tvar topLeftTwips = this._docLayer._latLngToTwips(topLeft);\n\n\t\tvar searchStartPointX = topLeftTwips.x;\n\t\tvar searchStartPointY = topLeftTwips.y;\n\t\tif (this._docLayer && this._docLayer._lastSearchResult && expand) {\n\t\t\tvar strTwips = this._docLayer._lastSearchResult.twipsRectangles.match(/\\d+/g);\n\t\t\tif (strTwips != null) {\n\t\t\t\tsearchStartPointX = strTwips[0];\n\t\t\t\tsearchStartPointY = strTwips[1];\n\t\t\t}\n\t\t\tthis.resetSelection();\n\t\t}\n\n\t\tsearchCmd['SearchItem.SearchString'].value = text;\n\t\tsearchCmd['SearchItem.Backward'].value = backward;\n\t\tsearchCmd['SearchItem.ReplaceString'].value = replaceString;\n\t\tsearchCmd['SearchItem.SearchStartPointX'].value = searchStartPointX;\n\t\tsearchCmd['SearchItem.SearchStartPointY'].value = searchStartPointY;\n\t\tsearchCmd['SearchItem.Command'].value = command;\n\t\tthis._searchRequested = true;\n\t\tapp.socket.sendMessage('uno .uno:ExecuteSearch ' + JSON.stringify(searchCmd));\n\t},\n\n\thighlightAll: function (text) {\n\t\tif (this._docLayer._searchResults && text === this._docLayer._searchTerm) {\n\t\t\treturn;\n\t\t}\n\t\tthis.search(text, false, 1);\n\t},\n\n\tresetSelection: function () {\n\t\tthis._docLayer._clearSearchResults();\n\t\tapp.socket.sendMessage('resetselection');\n\t}\n});\n"]}
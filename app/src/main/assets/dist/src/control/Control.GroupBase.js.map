{"version":3,"file":"Control.GroupBase.js","sourceRoot":"","sources":["../../../../../../../../browser/src/control/Control.GroupBase.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Control.GroupBase\n*/\n\n/* global $ app */\n\n/*\n\tThis file is Calc only. This is the base class for Control.RowGroup and Control.ColumnGroup files.\n\n\tThis class is an extended version of \"CanvasSectionObject\".\n*/\n\nL.Control.GroupBase = L.Class.extend({\n\tinteractable: true,\n\tsectionProperties: {},\n\n\t// Create font for the group headers. Group headers are on the left side of corner header.\n\t_createFont: function () {\n\t\tvar baseElem = document.getElementsByTagName('body')[0];\n\t\tvar elem = L.DomUtil.create('div', 'spreadsheet-header-row', baseElem);\n\t\tthis.backgroundColor = L.DomUtil.getStyle(elem, 'background-color'); // This is a section property.\n\t\tthis.borderColor = this.backgroundColor;\n\t\tthis._textColor = L.DomUtil.getStyle(elem, 'color');\n\t\tvar fontFamily = L.DomUtil.getStyle(elem, 'font-family');\n\t\tvar fontSize = parseInt(L.DomUtil.getStyle(elem, 'font-size'));\n\t\tthis._getFont = function() {\n\t\t\treturn Math.round(fontSize * app.dpiScale) + 'px ' + fontFamily;\n\t\t};\n\t\tL.DomUtil.remove(elem);\n\t},\n\n\t// This returns the required width for the section.\n\t_computeSectionWidth: function () {\n\t\treturn this._levelSpacing + (this._groupHeadSize + this._levelSpacing) * (this._groups.length + 1);\n\t},\n\n\t// This function puts data into a good shape for use of this class.\n\t_collectGroupsData: function(groups) {\n\t\tvar level, groupEntry;\n\n\t\tvar lastGroupIndex = new Array(groups.length);\n\t\tvar firstChildGroupIndex = new Array(groups.length);\n\t\tvar lastLevel = -1;\n\t\tfor (var i = 0; i < groups.length; ++i) {\n\t\t\t// a new group start\n\t\t\tvar groupData = groups[i];\n\t\t\tlevel = parseInt(groupData.level) - 1;\n\t\t\tif (!this._groups[level]) {\n\t\t\t\tthis._groups[level] = {};\n\t\t\t}\n\t\t\tvar startPos = parseInt(groupData.startPos);\n\t\t\tvar endPos = parseInt(groupData.endPos);\n\t\t\tvar isHidden = !!parseInt(groupData.hidden);\n\t\t\tif (isHidden || startPos === endPos) {\n\t\t\t\tstartPos -= this._groupHeadSize / 2;\n\t\t\t\tendPos = startPos + this._groupHeadSize;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar moved = false;\n\t\t\t\t// if the first child is collapsed the parent head has to be top-aligned with the child\n\t\t\t\tif (level < lastLevel && firstChildGroupIndex[lastLevel] !== undefined) {\n\t\t\t\t\tvar childGroupEntry = this._groups[lastLevel][firstChildGroupIndex[lastLevel]];\n\t\t\t\t\tif (childGroupEntry.hidden) {\n\t\t\t\t\t\tif (startPos > childGroupEntry.startPos && startPos < childGroupEntry.endPos) {\n\t\t\t\t\t\t\tstartPos = childGroupEntry.startPos;\n\t\t\t\t\t\t\tmoved = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// if 2 groups belonging to the same level are contiguous and the first group is collapsed,\n\t\t\t\t// the second one has to be shifted as much as possible in order to avoid overlapping.\n\t\t\t\tif (!moved && lastGroupIndex[level] !== undefined) {\n\t\t\t\t\tvar prevGroupEntry = this._groups[level][lastGroupIndex[level]];\n\t\t\t\t\tif (prevGroupEntry.hidden) {\n\t\t\t\t\t\tif (startPos > prevGroupEntry.startPos && startPos < prevGroupEntry.endPos) {\n\t\t\t\t\t\t\tstartPos = prevGroupEntry.endPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tgroupEntry = {\n\t\t\t\tlevel: level,\n\t\t\t\tindex: groupData.index,\n\t\t\t\tstartPos: startPos,\n\t\t\t\tendPos: endPos,\n\t\t\t\thidden: isHidden\n\t\t\t};\n\t\t\tthis._groups[level][groupData.index] = groupEntry;\n\t\t\tlastGroupIndex[level] = groupData.index;\n\t\t\tif (level > lastLevel) {\n\t\t\t\tfirstChildGroupIndex[level] = groupData.index;\n\t\t\t\tlastLevel = level;\n\t\t\t}\n\t\t\telse if (level === lastLevel) {\n\t\t\t\tfirstChildGroupIndex[level + 1] = undefined;\n\t\t\t}\n\t\t}\n\t},\n\n\t// If previous group is visible (expanded), current group's plus sign etc. will be drawn. If previous group is not expanded, current group's plus sign etc. won't be drawn.\n\t_isPreviousGroupVisible: function (index, level) {\n\t\tif (level === 0) // First group's drawings are always drawn.\n\t\t\treturn true;\n\n\t\tfor (var i = 0; i < this._groups.length; i++) {\n\t\t\tfor (var group in this._groups[i]) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(this._groups[i], group)) {\n\t\t\t\t\tvar group_ = this._groups[i][group];\n\t\t\t\t\tif (group_.level === level - 1 && group_.index === index) {\n\t\t\t\t\t\tif (group_.hidden === false) {\n\t\t\t\t\t\t\tif (group_.level > 0) {\n\t\t\t\t\t\t\t\t// This recursive call is needed.\n\t\t\t\t\t\t\t\t// Because first upper group may have been expanded and second upper group may have been collapsed.\n\t\t\t\t\t\t\t\t// If one of the upper groups is not expanded, this function should return false.\n\t\t\t\t\t\t\t\tif (this._isPreviousGroupVisible(group_.index, group_.level)) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// This calls drawing functions related to tails and plus & minus signs etc.\n\tdrawOutline: function() {\n\t\tif (this._groups) {\n\t\t\tfor (var i = 0; i < this._groups.length; i++) {\n\t\t\t\tif (this._groups[i]) {\n\t\t\t\t\tfor (var group in this._groups[i]) {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(this._groups[i], group)) {\n\t\t\t\t\t\t\tif (this._isPreviousGroupVisible(this._groups[i][group].index, this._groups[i][group].level))\n\t\t\t\t\t\t\t\tthis.drawGroupControl(this._groups[i][group]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// This function calls drawing function for related to headers of groups. Headers are drawn on the left of corner header.\n\tdrawLevelHeaders: function () {\n\t\tfor (var i = 0; i < this._groups.length + 1; ++i) {\n\t\t\tthis.drawLevelHeader(i);\n\t\t}\n\t},\n\n\t/// In Calc RTL mode, x-coordinate of a given rectangle of given width is horizontally mirrored\n\ttransformRectX: function (xcoord, rectWidth) {\n\t\treturn this.isCalcRTL() ? this.size[0] - xcoord - rectWidth : xcoord;\n\t},\n\n\t/// In Calc RTL mode, x-coordinate of a given point is horizontally mirrored\n\ttransformX: function (xcoord) {\n\t\treturn this.isCalcRTL() ? this.size[0] - xcoord : xcoord;\n\t},\n\n\t/**\n\t * Checks if the given point is within the bounds of the rectangle defined by\n\t * startX, startY, endX, endY. If mirrorX is true then point is horizontally\n\t * mirrored before checking.\n\t */\n\tisPointInRect: function (point, startX, startY, endX, endY, mirrorX) {\n\t\tvar x = mirrorX ? this.size[0] - point[0] : point[0];\n\t\tvar y = point[1];\n\n\t\treturn (x > startX && x < endX && y > startY && y < endY);\n\t},\n\n\tonDraw: function () {\n\t\tthis.drawOutline();\n\t\tthis.drawLevelHeaders();\n\t},\n\n\tonMouseMove: function (point) {\n\t\t// If mouse is above a group header or a group control, we change the cursor.\n\t\tif (this.findClickedGroup(point) !== null || this.findClickedLevel(point) !== -1)\n\t\t\tthis.context.canvas.style.cursor = 'pointer';\n\t\telse\n\t\t\tthis.context.canvas.style.cursor = 'default';\n\t},\n\n\tonMouseLeave: function () {\n\t\tthis.context.canvas.style.cursor = 'default';\n\t},\n\n\tonClick: function (point) {\n\t\t// User may have clicked on one of the level headers.\n\t\tvar level = this.findClickedLevel(point);\n\t\tif (level !== -1) {\n\t\t\tthis._updateOutlineState({level: level, index: -1}); // index: -1 targets all groups (there may be multiple separate row groups.).\n\t\t}\n\t\telse {\n\t\t\t// User may have clicked on one of the group control boxes (boxes with plus / minus symbols).\n\t\t\tvar group = this.findClickedGroup(point);\n\n\t\t\tif (group) {\n\t\t\t\tthis._updateOutlineState(group);\n\t\t\t}\n\t\t}\n\t},\n\n\t/* Double clicking on a group's tail closes it. */\n\tonDoubleClick: function (point) {\n\t\tvar group = this.findTailsGroup(point);\n\t\tif (group)\n\t\t\tthis._updateOutlineState(group);\n\t},\n\n\tonMouseEnter: function () {\n\t\t$.contextMenu('destroy', '#document-canvas');\n\t},\n\n\tonRemove: function () {\n\t\tthis.isRemoved = true;\n\t\tthis.containerObject.getSectionWithName(L.CSections.RowHeader.name).position[0] = 0;\n\t\tthis.containerObject.getSectionWithName(L.CSections.CornerHeader.name).position[0] = 0;\n\t},\n\n\tonNewDocumentTopLeft: function () {},\n\tonLongPress: function () {},\n\tonMouseDown: function () {},\n\tonMouseUp: function () {},\n\tonMouseWheel: function () {},\n\tonContextMenu: function () {},\n\tonResize: function () {},\n});"]}
{"version":3,"file":"Control.JSDialog.js","sourceRoot":"","sources":["../../../../../../../../browser/src/control/Control.JSDialog.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Control.JSDialog\n */\n\n/* global Hammer app */\nL.Control.JSDialog = L.Control.extend({\n\toptions: {\n\t\tsnackbarTimeout: 6000\n\t},\n\tdialogs: {},\n\tdraggingObject: null,\n\n\tonAdd: function (map) {\n\t\tthis.map = map;\n\n\t\tthis.map.on('jsdialog', this.onJSDialog, this);\n\t\tthis.map.on('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.on('jsdialogaction', this.onJSAction, this);\n\t},\n\n\tonRemove: function() {\n\t\tthis.map.off('jsdialog', this.onJSDialog, this);\n\t\tthis.map.off('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.off('jsdialogaction', this.onJSAction, this);\n\t},\n\n\thasDialogOpened: function() {\n\t\treturn Object.keys(this.dialogs).length > 0;\n\t},\n\n\tclearDialog: function(id) {\n\t\tvar builder = this.dialogs[id].builder;\n\n\t\tL.DomUtil.remove(this.dialogs[id].container);\n\t\tdelete this.dialogs[id];\n\n\t\treturn builder;\n\t},\n\n\tclose: function(id, sendCloseEvent) {\n\t\tif (id && this.dialogs[id]) {\n\t\t\tif (this.dialogs[id].isPopup)\n\t\t\t\tthis.closePopover(id, sendCloseEvent);\n\t\t\telse\n\t\t\t\tthis.closeDialog(id, sendCloseEvent);\n\t\t}\n\t},\n\n\tcloseDialog: function(id, sendCloseEvent) {\n\t\tif (!id || !this.dialogs[id]) {\n\t\t\tconsole.warn('missing dialog data');\n\t\t\treturn;\n\t\t}\n\n\t\tvar builder = this.clearDialog(id);\n\t\tif (sendCloseEvent !== false)\n\t\t\tbuilder.callback('dialog', 'close', {id: '__DIALOG__'}, null, builder);\n\t},\n\n\t// sendCloseEvent means that we only send a command to the server\n\t// we want to kill HTML popup when we receive feedback from the server\n\tclosePopover: function(id, sendCloseEvent) {\n\t\tif (!id || !this.dialogs[id]) {\n\t\t\tconsole.warn('missing popover data');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!sendCloseEvent)\n\t\t\tL.DomUtil.remove(this.dialogs[id].overlay);\n\n\t\tvar clickToClose = this.dialogs[id].clickToClose;\n\t\tvar builder = this.dialogs[id].builder;\n\n\t\tif (sendCloseEvent) {\n\t\t\tif (clickToClose && L.DomUtil.hasClass(clickToClose, 'menubutton'))\n\t\t\t\tclickToClose.click();\n\t\t\telse\n\t\t\t\tbuilder.callback('popover', 'close', {id: '__POPOVER__'}, null, builder);\n\t\t}\n\t\telse\n\t\t\tthis.clearDialog(id);\n\t},\n\n\tsetTabs: function(tabs, builder) {\n\t\tvar dialog = this.dialogs[builder.windowId.toString()];\n\t\tif (dialog) {\n\t\t\tvar tabsContainer = dialog.tabs;\n\n\t\t\twhile (tabsContainer.firstChild)\n\t\t\t\ttabsContainer.removeChild(tabsContainer.firstChild);\n\n\t\t\ttabsContainer.appendChild(tabs);\n\t\t}\n\t},\n\n\tselectedTab: function() {\n\t\t// nothing to do here\n\t},\n\n\t_getDefaultButtonId: function(widgets) {\n\t\tfor (var i in widgets) {\n\t\t\tif (widgets[i].type === 'pushbutton' || widgets[i].type === 'okbutton') {\n\t\t\t\tif (widgets[i].has_default === true)\n\t\t\t\t\treturn widgets[i].id;\n\t\t\t}\n\n\t\t\tif (widgets[i].children) {\n\t\t\t\tvar found = this._getDefaultButtonId(widgets[i].children);\n\t\t\t\tif (found)\n\t\t\t\t\treturn found;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tonJSDialog: function(e) {\n\t\tvar that = this;\n\t\tvar posX = 0;\n\t\tvar posY = 0;\n\t\tvar data = e.data;\n\t\tvar callback = e.callback;\n\t\tvar isSnackbar = data.type === 'snackbar';\n\t\tvar isModalPopup = data.type === 'modalpopup' || isSnackbar;\n\t\tvar focusWidgetId = data.init_focus_id;\n\n\t\tif (data.action === 'fadeout')\n\t\t{\n\t\t\tif (data.id && this.dialogs[data.id]) {\n\t\t\t\tvar container = this.dialogs[data.id].container;\n\t\t\t\tL.DomUtil.addClass(container, 'fadeout');\n\t\t\t\tcontainer.onanimationend = function() { that.close(data.id); };\n\t\t\t\t// be sure it will be removed\n\t\t\t\tsetTimeout(function() { that.close(data.id); }, 700);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse if (data.action === 'close')\n\t\t{\n\t\t\tthis.close(data.id, false);\n\t\t\treturn;\n\t\t}\n\n\t\tvar toRemove = null;\n\t\tif (this.dialogs[data.id]) {\n\t\t\tposX = this.dialogs[data.id].startX;\n\t\t\tposY = this.dialogs[data.id].startY;\n\t\t\ttoRemove = this.dialogs[data.id].container;\n\t\t}\n\n\t\tvar isDocumentAreaPopup = data.popupParent === '_POPOVER_'\n\t\t\t&& data.posx !== undefined && data.posy !== undefined;\n\t\tvar isCalc = this.map._docLayer ? (this.map._docLayer._docType === 'spreadsheet') : false;\n\t\tvar isAutofilter = isDocumentAreaPopup && isCalc;\n\n\t\tvar containerParent = isDocumentAreaPopup ?\n\t\t\tdocument.getElementById('document-container') : document.body;\n\n\t\tif (isAutofilter)\n\t\t{\n\t\t\t// this is autofilter popup\n\n\t\t\t// RTL mode: only difference is when file is RTL not UI\n\t\t\t// var isViewRTL = document.documentElement.dir === 'rtl';\n\t\t\tvar isSpreadsheetRTL = this.map._docLayer.isCalcRTL();\n\n\t\t\tvar scale = this.map.zoomToFactor(this.map.getZoom());\n\t\t\tvar origin = this.map.getPixelOrigin();\n\t\t\tvar panePos = this.map._getMapPanePos();\n\n\t\t\tvar offsetX = isSpreadsheetRTL ? 0 : app.sectionContainer.getSectionWithName(L.CSections.RowHeader.name).size[0];\n\t\t\tvar offsetY = app.sectionContainer.getSectionWithName(L.CSections.ColumnHeader.name).size[1];\n\n\t\t\tvar left = parseInt(data.posx) * scale;\n\t\t\tvar top = parseInt(data.posy) * scale;\n\n\t\t\tif (left < 0)\n\t\t\t\tleft = -1 * left;\n\n\t\t\tvar splitPanesContext = this.map.getSplitPanesContext();\n\t\t\tvar splitPos = new L.Point(0, 0);\n\n\t\t\tif (splitPanesContext)\n\t\t\t\tsplitPos = splitPanesContext.getSplitPos();\n\n\t\t\tvar newLeft = left + panePos.x - origin.x;\n\t\t\tif (left >= splitPos.x && newLeft >= 0)\n\t\t\t\tleft = newLeft;\n\n\t\t\tvar newTop = top + panePos.y - origin.y;\n\t\t\tif (top >= splitPos.y && newTop >= 0)\n\t\t\t\ttop = newTop;\n\n\t\t\tif (isSpreadsheetRTL)\n\t\t\t\tleft = this.map._size.x - left;\n\n\t\t\tposX = left + offsetX;\n\t\t\tposY = top + offsetY;\n\t\t}\n\n\t\t// it has to be form to handle default button\n\t\tcontainer = L.DomUtil.create('form', 'jsdialog-container ui-dialog ui-widget-content lokdialog_container', containerParent);\n\t\tcontainer.id = data.id;\n\t\tcontainer.style.visibility = 'hidden';\n\t\tif (data.collapsed && (data.collapsed === 'true' || data.collapsed === true))\n\t\t\tL.DomUtil.addClass(container, 'collapsed');\n\t\t// prevent from reloading\n\t\tcontainer.addEventListener('submit', function (event) { event.preventDefault(); });\n\n\t\tvar defaultButtonId = this._getDefaultButtonId(data.children);\n\n\t\t// it has to be first button in the form\n\t\tvar defaultButton = L.DomUtil.createWithId('button', 'default-button', container);\n\t\tdefaultButton.style.display = 'none';\n\t\tdefaultButton.onclick = function() {\n\t\t\tif (defaultButtonId) {\n\t\t\t\tvar button = container.querySelector('#' + defaultButtonId);\n\t\t\t\tif (button)\n\t\t\t\t\tbutton.click();\n\t\t\t}\n\t\t};\n\n\t\tif (!isModalPopup) {\n\t\t\tvar titlebar = L.DomUtil.create('div', 'ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix', container);\n\t\t\tvar title = L.DomUtil.create('span', 'ui-dialog-title', titlebar);\n\t\t\ttitle.innerText = data.title;\n\t\t\tvar button = L.DomUtil.create('button', 'ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close', titlebar);\n\t\t\tL.DomUtil.create('span', 'ui-button-icon ui-icon ui-icon-closethick', button);\n\t\t} else {\n\t\t\tL.DomUtil.addClass(container, 'modalpopup');\n\t\t\tif (isSnackbar)\n\t\t\t\tL.DomUtil.addClass(container, 'snackbar');\n\t\t}\n\n\t\tvar tabs = L.DomUtil.create('div', 'jsdialog-tabs', container);\n\t\tvar content = L.DomUtil.create('div', 'lokdialog ui-dialog-content ui-widget-content', container);\n\n\t\t// required to exist before builder was launched (for setTabs)\n\t\tthis.dialogs[data.id] = {\n\t\t\ttabs: tabs\n\t\t};\n\n\t\tvar builder = new L.control.jsDialogBuilder(\n\t\t\t{\n\t\t\t\twindowId: data.id,\n\t\t\t\tmobileWizard: this,\n\t\t\t\tmap: this.map,\n\t\t\t\tcssClass: 'jsdialog' + (isAutofilter ? ' autofilter' : ''),\n\t\t\t\tcallback: callback\n\t\t\t});\n\n\t\tif (isModalPopup && !isSnackbar) {\n\t\t\tvar overlay = L.DomUtil.create('div', builder.options.cssClass + ' jsdialog-overlay ' + (data.cancellable ? 'cancellable' : ''), containerParent);\n\t\t\toverlay.id = data.id + '-overlay';\n\t\t\tif (data.cancellable)\n\t\t\t\toverlay.onclick = function () { that.close(data.id, true); };\n\t\t}\n\n\t\tbuilder.build(content, [data]);\n\t\tif (isAutofilter)\n\t\t\tcontent.firstChild.dir = document.documentElement.dir;\n\n\t\t// We show some dialogs such as Macro Security Warning Dialog and Text Import Dialog (csv)\n\t\t// They are displayed before the document is loaded\n\t\t// Spinning should be happening until the 1st interaction with the user\n\t\t// which is the dialog opening in this case\n\t\tthis.map._progressBar.end();\n\n\n\t\tvar onInput = function(ev) {\n\t\t\tif (ev.isFirst)\n\t\t\t\tthat.draggingObject = that.dialogs[data.id];\n\n\t\t\tif (ev.isFinal && that.draggingObject\n\t\t\t\t&& that.draggingObject.translateX\n\t\t\t\t&& that.draggingObject.translateY) {\n\t\t\t\tthat.draggingObject.startX = that.draggingObject.translateX;\n\t\t\t\tthat.draggingObject.startY = that.draggingObject.translateY;\n\t\t\t\tthat.draggingObject.translateX = 0;\n\t\t\t\tthat.draggingObject.translateY = 0;\n\t\t\t\tthat.draggingObject = null;\n\t\t\t}\n\t\t};\n\n\t\tif (!isModalPopup) {\n\t\t\tbutton.onclick = function() {\n\t\t\t\tthat.closeDialog(data.id, true);\n\t\t\t};\n\n\t\t\tvar hammerTitlebar = new Hammer(titlebar);\n\t\t\thammerTitlebar.add(new Hammer.Pan({ threshold: 20, pointers: 0 }));\n\n\t\t\thammerTitlebar.on('panstart', this.onPan.bind(this));\n\t\t\thammerTitlebar.on('panmove', this.onPan.bind(this));\n\t\t\thammerTitlebar.on('hammer.input', onInput);\n\t\t}\n\n\t\tvar clickToCloseId = data.clickToClose;\n\t\tif (clickToCloseId && clickToCloseId.indexOf('.uno:') === 0)\n\t\t\tclickToCloseId = clickToCloseId.substr('.uno:'.length);\n\n\t\tvar setupPosition = function(force) {\n\t\t\tif (isModalPopup && data.popupParent) {\n\t\t\t\t// in case of toolbox we want to create popup positioned by toolitem not toolbox\n\t\t\t\tvar parent = L.DomUtil.get(data.popupParent);\n\n\t\t\t\tif (clickToCloseId && parent) {\n\t\t\t\t\tvar childButton = parent.querySelector('[id=\\'' + clickToCloseId + '\\']');\n\t\t\t\t\tif (childButton)\n\t\t\t\t\t\tparent = childButton;\n\t\t\t\t}\n\n\t\t\t\tif (!parent && data.popupParent === '_POPOVER_') {\n\t\t\t\t\t// popup was trigerred not by toolbar or menu button, probably on tile area\n\t\t\t\t\tif (isAutofilter) {\n\t\t\t\t\t\t// we are already done\n\t\t\t\t\t} else if (isDocumentAreaPopup) {\n\t\t\t\t\t\tconsole.warn('other popup than autofilter in the document area');\n\t\t\t\t\t\tposX = data.posx;\n\t\t\t\t\t\tposY = data.posy;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// validity listbox\n\t\t\t\t\t\tparent = document.querySelector('.spreadsheet-drop-down-marker');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tposX = parent.getBoundingClientRect().left;\n\t\t\t\t\tposY = parent.getBoundingClientRect().bottom + 5;\n\n\t\t\t\t\tif (posX + content.clientWidth > window.innerWidth)\n\t\t\t\t\t\tposX -= posX + content.clientWidth + 10 - window.innerWidth;\n\t\t\t\t\tif (posY + content.clientHeight > window.innerHeight)\n\t\t\t\t\t\tposY -= posY + content.clientHeight + 10 - window.innerHeight;\n\t\t\t\t} else if (isDocumentAreaPopup) {\n\t\t\t\t\tvar height = container.getBoundingClientRect().height;\n\t\t\t\t\tif (posY + height > containerParent.getBoundingClientRect().height) {\n\t\t\t\t\t\tvar newTopPosition = posY - height;\n\t\t\t\t\t\tif (newTopPosition < 0)\n\t\t\t\t\t\t\tnewTopPosition = 0;\n\t\t\t\t\t\tposY = newTopPosition;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar width = container.getBoundingClientRect().width;\n\t\t\t\t\tif (posX + width > containerParent.getBoundingClientRect().width) {\n\t\t\t\t\t\tvar newLeftPosition = posX - width;\n\t\t\t\t\t\tif (newLeftPosition < 0)\n\t\t\t\t\t\t\tnewLeftPosition = 0;\n\t\t\t\t\t\tposX = newLeftPosition;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (isSnackbar) {\n\t\t\t\tposX = window.innerWidth/2 - container.offsetWidth/2;\n\t\t\t\tposY = window.innerHeight - container.offsetHeight - 40;\n\t\t\t} else if (force || (posX === 0 && posY === 0)) {\n\t\t\t\tposX = window.innerWidth/2 - container.offsetWidth/2;\n\t\t\t\tposY = window.innerHeight/2 - container.offsetHeight/2;\n\t\t\t}\n\t\t};\n\n\t\tsetupPosition();\n\t\tthis.updatePosition(container, posX, posY);\n\n\t\t// after some updates, eg. drawing areas window can be bigger than initially\n\t\t// update possition according to that with small delay\n\n\t\tvar that = this;\n\t\tvar initialPositionSetup = function (force) {\n\t\t\tsetupPosition(force);\n\t\t\tthat.updatePosition(container, posX, posY);\n\t\t\tcontainer.style.visibility = '';\n\t\t\tif (toRemove)\n\t\t\t\tL.DomUtil.remove(toRemove);\n\t\t\tvar focusWidget = focusWidgetId ?\n\t\t\t\tcontainer.querySelector('[id=\\'' + focusWidgetId + '\\']') : null;\n\t\t\tif (focusWidget)\n\t\t\t\tfocusWidget.focus();\n\t\t\tif (focusWidget && document.activeElement !== focusWidget)\n\t\t\t\tconsole.error('cannot get focus for widget: \"' + focusWidgetId + '\"');\n\t\t};\n\n\t\tthis.dialogs[data.id] = {\n\t\t\tcontainer: container,\n\t\t\tbuilder: builder,\n\t\t\ttabs: tabs,\n\t\t\tstartX: posX,\n\t\t\tstartY: posY,\n\t\t\tclickToClose: clickToCloseId ? L.DomUtil.get(clickToCloseId) : null,\n\t\t\toverlay: overlay,\n\t\t\tisPopup: isModalPopup,\n\t\t\tinvalidated: false,\n\t\t\tsetupPosFunc: initialPositionSetup\n\t\t};\n\n\t\tsetTimeout(initialPositionSetup, 200);\n\n\t\tif (isSnackbar) {\n\t\t\tsetTimeout(function () { that.closePopover(data.id, false); }, this.options.snackbarTimeout);\n\t\t}\n\t},\n\n\tonJSUpdate: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype !== 'dialog')\n\t\t\treturn;\n\n\t\tvar dialog = this.dialogs[data.id] ? this.dialogs[data.id].container : null;\n\t\tif (!dialog)\n\t\t\treturn;\n\n\t\tvar control = dialog.querySelector('[id=\\'' + data.control.id + '\\']');\n\t\tif (!control) {\n\t\t\twindow.app.console.warn('jsdialogupdate: not found control with id: \"' + data.control.id + '\"');\n\t\t\treturn;\n\t\t}\n\n\t\tvar parent = control.parentNode;\n\t\tif (!parent)\n\t\t\treturn;\n\n\t\tvar scrollTop = control.scrollTop;\n\t\tvar focusedElement = document.activeElement;\n\t\tvar focusedElementInDialog = focusedElement ? dialog.querySelector('[id=\\'' + focusedElement.id + '\\']') : null;\n\t\tvar focusedId = focusedElementInDialog ? focusedElementInDialog.id : null;\n\n\t\tcontrol.style.visibility = 'hidden';\n\t\tvar builder = new L.control.jsDialogBuilder({windowId: data.id,\n\t\t\tmobileWizard: this,\n\t\t\tmap: this.map,\n\t\t\tcssClass: 'jsdialog'});\n\n\t\tvar temporaryParent = L.DomUtil.create('div');\n\t\tbuilder.build(temporaryParent, [data.control], false);\n\t\tparent.insertBefore(temporaryParent.firstChild, control.nextSibling);\n\t\tL.DomUtil.remove(control);\n\n\t\tvar newControl = dialog.querySelector('[id=\\'' + data.control.id + '\\']');\n\t\tif (newControl)\n\t\t\tnewControl.scrollTop = scrollTop;\n\n\t\tif (focusedId)\n\t\t\tdialog.querySelector('[id=\\'' + focusedId + '\\']').focus();\n\n\t\tvar dialogInfo = this.dialogs[data.id];\n\t\tif (!dialogInfo.invalidated && dialogInfo.setupPosFunc) {\n\t\t\tsetTimeout(function () { dialogInfo.setupPosFunc(true); }, 100);\n\t\t\tdialogInfo.invalidated = true;\n\t\t}\n\t},\n\n\tonJSAction: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype !== 'dialog')\n\t\t\treturn;\n\n\t\tvar builder = this.dialogs[data.id] ? this.dialogs[data.id].builder : null;\n\t\tif (!builder)\n\t\t\treturn;\n\n\t\tvar dialog = this.dialogs[data.id] ? this.dialogs[data.id].container : null;\n\t\tif (!dialog)\n\t\t\treturn;\n\n\t\tbuilder.executeAction(dialog, data.data);\n\t},\n\n\tonPan: function (ev) {\n\t\tvar target = this.draggingObject;\n\t\tif (target) {\n\t\t\tvar startX = target.startX ? target.startX : 0;\n\t\t\tvar startY = target.startY ? target.startY : 0;\n\n\t\t\tvar newX = startX + ev.deltaX;\n\t\t\tvar newY = startY + ev.deltaY;\n\n\t\t\t// Don't allow to put dialog outside the view\n\t\t\tif (!(newX < 0 || newY < 0\n\t\t\t\t|| newX > window.innerWidth - target.offsetWidth/2\n\t\t\t\t|| newY > window.innerHeight - target.offsetHeight/2)) {\n\t\t\t\ttarget.translateX = newX;\n\t\t\t\ttarget.translateY = newY;\n\n\t\t\t\tthis.updatePosition(target.container, newX, newY);\n\t\t\t}\n\t\t}\n\t},\n\n\tupdatePosition: function (target, newX, newY) {\n\t\ttarget.style.marginLeft = newX + 'px';\n\t\ttarget.style.marginTop = newY + 'px';\n\t},\n\n\thandleKeyEvent: function (event) {\n\t\tvar keyCode = event.keyCode;\n\n\t\tswitch (keyCode) {\n\t\tcase 27:\n\t\t\t// ESC\n\t\t\tvar dialogs = Object.keys(this.dialogs);\n\t\t\tif (dialogs.length) {\n\t\t\t\tvar lastKey = dialogs[dialogs.length - 1];\n\t\t\t\tthis.close(lastKey, true);\n\t\t\t\tthis.map.focus();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n});\n\nL.control.jsDialog = function (options) {\n\treturn new L.Control.JSDialog(options);\n};\n"]}